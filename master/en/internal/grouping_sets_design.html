<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>GROUPING SETS DESIGN | Apache Doris</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="Apache Doris">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/master/assets/css/0.styles.e093dded.css" as="style"><link rel="preload" href="/master/assets/js/app.f6322a31.js" as="script"><link rel="preload" href="/master/assets/js/4.af2e6818.js" as="script"><link rel="preload" href="/master/assets/js/3.7820216c.js" as="script"><link rel="preload" href="/master/assets/js/63.42dc0e05.js" as="script"><link rel="prefetch" href="/master/assets/js/10.e563bb65.js"><link rel="prefetch" href="/master/assets/js/100.86b7ae3f.js"><link rel="prefetch" href="/master/assets/js/101.a2357ffd.js"><link rel="prefetch" href="/master/assets/js/102.a721da5c.js"><link rel="prefetch" href="/master/assets/js/103.cff05f41.js"><link rel="prefetch" href="/master/assets/js/104.f1fb8314.js"><link rel="prefetch" href="/master/assets/js/105.031a4a57.js"><link rel="prefetch" href="/master/assets/js/106.000bdf54.js"><link rel="prefetch" href="/master/assets/js/107.adfdca9c.js"><link rel="prefetch" href="/master/assets/js/108.91d7d9ea.js"><link rel="prefetch" href="/master/assets/js/109.fe70dfe0.js"><link rel="prefetch" href="/master/assets/js/11.4a16800b.js"><link rel="prefetch" href="/master/assets/js/110.54f42360.js"><link rel="prefetch" href="/master/assets/js/111.2a4c30a9.js"><link rel="prefetch" href="/master/assets/js/112.ee451592.js"><link rel="prefetch" href="/master/assets/js/113.a6d9c1e7.js"><link rel="prefetch" href="/master/assets/js/114.2d67cc99.js"><link rel="prefetch" href="/master/assets/js/115.a4aee998.js"><link rel="prefetch" href="/master/assets/js/116.e64f71c9.js"><link rel="prefetch" href="/master/assets/js/117.750dec8e.js"><link rel="prefetch" href="/master/assets/js/118.a1296883.js"><link rel="prefetch" href="/master/assets/js/119.da08852a.js"><link rel="prefetch" href="/master/assets/js/12.fc394f5c.js"><link rel="prefetch" href="/master/assets/js/120.3240a069.js"><link rel="prefetch" href="/master/assets/js/121.7b2248a1.js"><link rel="prefetch" href="/master/assets/js/122.cef28720.js"><link rel="prefetch" href="/master/assets/js/123.16fac326.js"><link rel="prefetch" href="/master/assets/js/124.2095b0ec.js"><link rel="prefetch" href="/master/assets/js/125.209235c9.js"><link rel="prefetch" href="/master/assets/js/126.9a027e35.js"><link rel="prefetch" href="/master/assets/js/127.2dc951b1.js"><link rel="prefetch" href="/master/assets/js/128.1e9869d4.js"><link rel="prefetch" href="/master/assets/js/129.da6828bd.js"><link rel="prefetch" href="/master/assets/js/13.8c0f6cd7.js"><link rel="prefetch" href="/master/assets/js/130.36f83762.js"><link rel="prefetch" href="/master/assets/js/131.5e6f3a59.js"><link rel="prefetch" href="/master/assets/js/132.a2e5d437.js"><link rel="prefetch" href="/master/assets/js/133.f0629047.js"><link rel="prefetch" href="/master/assets/js/134.ba45324b.js"><link rel="prefetch" href="/master/assets/js/135.5f0a07c2.js"><link rel="prefetch" href="/master/assets/js/136.239cd7d6.js"><link rel="prefetch" href="/master/assets/js/137.fb18690a.js"><link rel="prefetch" href="/master/assets/js/138.009ff774.js"><link rel="prefetch" href="/master/assets/js/139.7d090e4f.js"><link rel="prefetch" href="/master/assets/js/14.28795dd5.js"><link rel="prefetch" href="/master/assets/js/140.7095a58d.js"><link rel="prefetch" href="/master/assets/js/141.8d5adf61.js"><link rel="prefetch" href="/master/assets/js/142.52e53a29.js"><link rel="prefetch" href="/master/assets/js/143.da03de1c.js"><link rel="prefetch" href="/master/assets/js/144.7352f211.js"><link rel="prefetch" href="/master/assets/js/145.43611426.js"><link rel="prefetch" href="/master/assets/js/146.4456fd6e.js"><link rel="prefetch" href="/master/assets/js/147.50e053b9.js"><link rel="prefetch" href="/master/assets/js/148.2aa5b508.js"><link rel="prefetch" href="/master/assets/js/149.da851e40.js"><link rel="prefetch" href="/master/assets/js/15.470bfffe.js"><link rel="prefetch" href="/master/assets/js/150.b3cb3b6b.js"><link rel="prefetch" href="/master/assets/js/151.77abc05a.js"><link rel="prefetch" href="/master/assets/js/152.e64fd1ff.js"><link rel="prefetch" href="/master/assets/js/153.a5ae591f.js"><link rel="prefetch" href="/master/assets/js/154.1a6d7dfd.js"><link rel="prefetch" href="/master/assets/js/155.ef3ee96a.js"><link rel="prefetch" href="/master/assets/js/156.266294f7.js"><link rel="prefetch" href="/master/assets/js/157.86070efa.js"><link rel="prefetch" href="/master/assets/js/158.9f6b9c8e.js"><link rel="prefetch" href="/master/assets/js/159.07f2aa5c.js"><link rel="prefetch" href="/master/assets/js/16.4a87efeb.js"><link rel="prefetch" href="/master/assets/js/160.581d04ba.js"><link rel="prefetch" href="/master/assets/js/161.83f720e9.js"><link rel="prefetch" href="/master/assets/js/162.cfef09c8.js"><link rel="prefetch" href="/master/assets/js/163.aef81461.js"><link rel="prefetch" href="/master/assets/js/164.478351ad.js"><link rel="prefetch" href="/master/assets/js/165.268650bc.js"><link rel="prefetch" href="/master/assets/js/166.5c165034.js"><link rel="prefetch" href="/master/assets/js/167.800b7251.js"><link rel="prefetch" href="/master/assets/js/168.e4f5e700.js"><link rel="prefetch" href="/master/assets/js/169.89965e0a.js"><link rel="prefetch" href="/master/assets/js/17.de07095e.js"><link rel="prefetch" href="/master/assets/js/170.509b438e.js"><link rel="prefetch" href="/master/assets/js/171.9df4772f.js"><link rel="prefetch" href="/master/assets/js/172.032be80e.js"><link rel="prefetch" href="/master/assets/js/173.b8c895ae.js"><link rel="prefetch" href="/master/assets/js/174.2bcf95eb.js"><link rel="prefetch" href="/master/assets/js/175.25e4f1d9.js"><link rel="prefetch" href="/master/assets/js/176.3edd089e.js"><link rel="prefetch" href="/master/assets/js/177.3d258d6c.js"><link rel="prefetch" href="/master/assets/js/178.37d270cf.js"><link rel="prefetch" href="/master/assets/js/179.582a698c.js"><link rel="prefetch" href="/master/assets/js/18.fd4e734e.js"><link rel="prefetch" href="/master/assets/js/180.b63e6590.js"><link rel="prefetch" href="/master/assets/js/181.88d96d01.js"><link rel="prefetch" href="/master/assets/js/182.d582ce74.js"><link rel="prefetch" href="/master/assets/js/183.03d5a1eb.js"><link rel="prefetch" href="/master/assets/js/184.4f283a75.js"><link rel="prefetch" href="/master/assets/js/185.1ce878f1.js"><link rel="prefetch" href="/master/assets/js/186.ea7d986e.js"><link rel="prefetch" href="/master/assets/js/187.e102770f.js"><link rel="prefetch" href="/master/assets/js/188.2617dd18.js"><link rel="prefetch" href="/master/assets/js/189.b841c3cd.js"><link rel="prefetch" href="/master/assets/js/19.1ce43294.js"><link rel="prefetch" href="/master/assets/js/190.6ab17735.js"><link rel="prefetch" href="/master/assets/js/191.92e6468c.js"><link rel="prefetch" href="/master/assets/js/192.5aa3d171.js"><link rel="prefetch" href="/master/assets/js/193.62ce7fc1.js"><link rel="prefetch" href="/master/assets/js/194.74b7af8f.js"><link rel="prefetch" href="/master/assets/js/195.70e1bcc7.js"><link rel="prefetch" href="/master/assets/js/196.a98827e7.js"><link rel="prefetch" href="/master/assets/js/197.50c29491.js"><link rel="prefetch" href="/master/assets/js/198.3a1e7c2a.js"><link rel="prefetch" href="/master/assets/js/199.a61c2038.js"><link rel="prefetch" href="/master/assets/js/20.0e145e1d.js"><link rel="prefetch" href="/master/assets/js/200.7d39cf21.js"><link rel="prefetch" href="/master/assets/js/201.c7a199e9.js"><link rel="prefetch" href="/master/assets/js/202.3f5f7671.js"><link rel="prefetch" href="/master/assets/js/203.0569dd55.js"><link rel="prefetch" href="/master/assets/js/204.bbde40e0.js"><link rel="prefetch" href="/master/assets/js/205.08d80faa.js"><link rel="prefetch" href="/master/assets/js/206.8a0ba004.js"><link rel="prefetch" href="/master/assets/js/207.ec49abe1.js"><link rel="prefetch" href="/master/assets/js/208.627e422f.js"><link rel="prefetch" href="/master/assets/js/209.8397ae11.js"><link rel="prefetch" href="/master/assets/js/21.5dfbfabd.js"><link rel="prefetch" href="/master/assets/js/210.9e72f82f.js"><link rel="prefetch" href="/master/assets/js/211.57137875.js"><link rel="prefetch" href="/master/assets/js/212.1a7028e2.js"><link rel="prefetch" href="/master/assets/js/213.874de566.js"><link rel="prefetch" href="/master/assets/js/214.18f1ba3b.js"><link rel="prefetch" href="/master/assets/js/215.a6f5b27d.js"><link rel="prefetch" href="/master/assets/js/216.94689905.js"><link rel="prefetch" href="/master/assets/js/217.0e7f3ecd.js"><link rel="prefetch" href="/master/assets/js/218.4db2308f.js"><link rel="prefetch" href="/master/assets/js/219.c6af8681.js"><link rel="prefetch" href="/master/assets/js/22.0e0d0b79.js"><link rel="prefetch" href="/master/assets/js/220.16dcd883.js"><link rel="prefetch" href="/master/assets/js/221.db4b20fd.js"><link rel="prefetch" href="/master/assets/js/222.b08addfc.js"><link rel="prefetch" href="/master/assets/js/223.4d63cbd2.js"><link rel="prefetch" href="/master/assets/js/224.32f3b335.js"><link rel="prefetch" href="/master/assets/js/225.3d1b2f87.js"><link rel="prefetch" href="/master/assets/js/226.49e36f87.js"><link rel="prefetch" href="/master/assets/js/227.73cf7e7f.js"><link rel="prefetch" href="/master/assets/js/228.f63aa321.js"><link rel="prefetch" href="/master/assets/js/229.e90bc08b.js"><link rel="prefetch" href="/master/assets/js/23.01189ff4.js"><link rel="prefetch" href="/master/assets/js/230.ae1ffe63.js"><link rel="prefetch" href="/master/assets/js/231.a644c281.js"><link rel="prefetch" href="/master/assets/js/232.4ccb90e4.js"><link rel="prefetch" href="/master/assets/js/233.4a4609b8.js"><link rel="prefetch" href="/master/assets/js/234.09a14295.js"><link rel="prefetch" href="/master/assets/js/235.880be7dc.js"><link rel="prefetch" href="/master/assets/js/236.1288966b.js"><link rel="prefetch" href="/master/assets/js/237.7d6f6875.js"><link rel="prefetch" href="/master/assets/js/238.9f646672.js"><link rel="prefetch" href="/master/assets/js/239.50f9fa3d.js"><link rel="prefetch" href="/master/assets/js/24.5e0d491f.js"><link rel="prefetch" href="/master/assets/js/240.5064db2d.js"><link rel="prefetch" href="/master/assets/js/241.295ef7cd.js"><link rel="prefetch" href="/master/assets/js/242.3a38a285.js"><link rel="prefetch" href="/master/assets/js/243.a17b12be.js"><link rel="prefetch" href="/master/assets/js/244.1d2444bc.js"><link rel="prefetch" href="/master/assets/js/245.323307f9.js"><link rel="prefetch" href="/master/assets/js/246.db6a4bc8.js"><link rel="prefetch" href="/master/assets/js/247.b2f5efa3.js"><link rel="prefetch" href="/master/assets/js/248.faadc9ef.js"><link rel="prefetch" href="/master/assets/js/249.b087ac82.js"><link rel="prefetch" href="/master/assets/js/25.9c8f3b8a.js"><link rel="prefetch" href="/master/assets/js/250.cc9e7a05.js"><link rel="prefetch" href="/master/assets/js/251.5f408de1.js"><link rel="prefetch" href="/master/assets/js/252.f226c230.js"><link rel="prefetch" href="/master/assets/js/253.cd531c8b.js"><link rel="prefetch" href="/master/assets/js/254.7aca3f23.js"><link rel="prefetch" href="/master/assets/js/255.3386ba76.js"><link rel="prefetch" href="/master/assets/js/256.8fce9ce6.js"><link rel="prefetch" href="/master/assets/js/257.c19fcf42.js"><link rel="prefetch" href="/master/assets/js/258.207e76d6.js"><link rel="prefetch" href="/master/assets/js/259.ab50a24a.js"><link rel="prefetch" href="/master/assets/js/26.daf52a37.js"><link rel="prefetch" href="/master/assets/js/260.ee4fa5d0.js"><link rel="prefetch" href="/master/assets/js/261.8346d0ca.js"><link rel="prefetch" href="/master/assets/js/262.68283534.js"><link rel="prefetch" href="/master/assets/js/263.d0588d75.js"><link rel="prefetch" href="/master/assets/js/264.7334158b.js"><link rel="prefetch" href="/master/assets/js/265.99bdae45.js"><link rel="prefetch" href="/master/assets/js/266.ec4facf2.js"><link rel="prefetch" href="/master/assets/js/267.9814c152.js"><link rel="prefetch" href="/master/assets/js/268.18290b21.js"><link rel="prefetch" href="/master/assets/js/269.63ada190.js"><link rel="prefetch" href="/master/assets/js/27.e8e81985.js"><link rel="prefetch" href="/master/assets/js/270.01433610.js"><link rel="prefetch" href="/master/assets/js/271.c8895e3d.js"><link rel="prefetch" href="/master/assets/js/272.e06a5587.js"><link rel="prefetch" href="/master/assets/js/273.ecbe1748.js"><link rel="prefetch" href="/master/assets/js/274.450424ff.js"><link rel="prefetch" href="/master/assets/js/275.afd561d8.js"><link rel="prefetch" href="/master/assets/js/276.8070a0b4.js"><link rel="prefetch" href="/master/assets/js/277.b81d4e45.js"><link rel="prefetch" href="/master/assets/js/278.bbe681b3.js"><link rel="prefetch" href="/master/assets/js/279.02b6f250.js"><link rel="prefetch" href="/master/assets/js/28.1260d985.js"><link rel="prefetch" href="/master/assets/js/280.73f2591d.js"><link rel="prefetch" href="/master/assets/js/281.7a8627d7.js"><link rel="prefetch" href="/master/assets/js/282.701c638a.js"><link rel="prefetch" href="/master/assets/js/283.8b0dc280.js"><link rel="prefetch" href="/master/assets/js/284.5ef57603.js"><link rel="prefetch" href="/master/assets/js/285.903489f9.js"><link rel="prefetch" href="/master/assets/js/286.9c46e7dd.js"><link rel="prefetch" href="/master/assets/js/287.37d32048.js"><link rel="prefetch" href="/master/assets/js/288.e55dd085.js"><link rel="prefetch" href="/master/assets/js/289.7bebeb01.js"><link rel="prefetch" href="/master/assets/js/29.1a223dd9.js"><link rel="prefetch" href="/master/assets/js/290.62cfdb53.js"><link rel="prefetch" href="/master/assets/js/291.69d2ce0f.js"><link rel="prefetch" href="/master/assets/js/292.85b59604.js"><link rel="prefetch" href="/master/assets/js/293.5be3ae49.js"><link rel="prefetch" href="/master/assets/js/294.a6c20772.js"><link rel="prefetch" href="/master/assets/js/295.08fecf6c.js"><link rel="prefetch" href="/master/assets/js/296.3e33e95f.js"><link rel="prefetch" href="/master/assets/js/297.7bc5b7ec.js"><link rel="prefetch" href="/master/assets/js/298.925252c5.js"><link rel="prefetch" href="/master/assets/js/299.a95b222b.js"><link rel="prefetch" href="/master/assets/js/30.eac396db.js"><link rel="prefetch" href="/master/assets/js/300.42d89d40.js"><link rel="prefetch" href="/master/assets/js/301.f242bfc9.js"><link rel="prefetch" href="/master/assets/js/302.487c690c.js"><link rel="prefetch" href="/master/assets/js/303.5673d304.js"><link rel="prefetch" href="/master/assets/js/304.5b9ad407.js"><link rel="prefetch" href="/master/assets/js/305.c032427a.js"><link rel="prefetch" href="/master/assets/js/306.8383a263.js"><link rel="prefetch" href="/master/assets/js/307.dc91d3f4.js"><link rel="prefetch" href="/master/assets/js/308.ddea96dc.js"><link rel="prefetch" href="/master/assets/js/309.41e484a1.js"><link rel="prefetch" href="/master/assets/js/31.a216d3d1.js"><link rel="prefetch" href="/master/assets/js/310.691af95b.js"><link rel="prefetch" href="/master/assets/js/311.989f959f.js"><link rel="prefetch" href="/master/assets/js/312.e68daa1f.js"><link rel="prefetch" href="/master/assets/js/313.758d8a87.js"><link rel="prefetch" href="/master/assets/js/314.91e12e03.js"><link rel="prefetch" href="/master/assets/js/315.6651e609.js"><link rel="prefetch" href="/master/assets/js/316.6f936a1b.js"><link rel="prefetch" href="/master/assets/js/317.cfa460c5.js"><link rel="prefetch" href="/master/assets/js/318.6bb12063.js"><link rel="prefetch" href="/master/assets/js/319.da28e902.js"><link rel="prefetch" href="/master/assets/js/32.444128b8.js"><link rel="prefetch" href="/master/assets/js/320.5c933883.js"><link rel="prefetch" href="/master/assets/js/321.9ef8a4c8.js"><link rel="prefetch" href="/master/assets/js/322.5e437e5e.js"><link rel="prefetch" href="/master/assets/js/323.2fce7df4.js"><link rel="prefetch" href="/master/assets/js/324.f57a2d36.js"><link rel="prefetch" href="/master/assets/js/325.70142379.js"><link rel="prefetch" href="/master/assets/js/326.d00fb69c.js"><link rel="prefetch" href="/master/assets/js/327.e53421a6.js"><link rel="prefetch" href="/master/assets/js/328.02bfbe37.js"><link rel="prefetch" href="/master/assets/js/329.5515d284.js"><link rel="prefetch" href="/master/assets/js/33.9414bbce.js"><link rel="prefetch" href="/master/assets/js/330.1d002319.js"><link rel="prefetch" href="/master/assets/js/331.f383fc25.js"><link rel="prefetch" href="/master/assets/js/332.45f4681b.js"><link rel="prefetch" href="/master/assets/js/333.8124a663.js"><link rel="prefetch" href="/master/assets/js/334.550e1e07.js"><link rel="prefetch" href="/master/assets/js/335.be00a9fb.js"><link rel="prefetch" href="/master/assets/js/336.f1438cbd.js"><link rel="prefetch" href="/master/assets/js/337.a5381198.js"><link rel="prefetch" href="/master/assets/js/338.3d6ff08e.js"><link rel="prefetch" href="/master/assets/js/339.e24f795e.js"><link rel="prefetch" href="/master/assets/js/34.f8408fbe.js"><link rel="prefetch" href="/master/assets/js/340.888ee853.js"><link rel="prefetch" href="/master/assets/js/341.8f680270.js"><link rel="prefetch" href="/master/assets/js/342.6e20f8fa.js"><link rel="prefetch" href="/master/assets/js/343.702fb95a.js"><link rel="prefetch" href="/master/assets/js/344.f0cf3530.js"><link rel="prefetch" href="/master/assets/js/345.48e34ebe.js"><link rel="prefetch" href="/master/assets/js/346.9c81c8fd.js"><link rel="prefetch" href="/master/assets/js/347.776625f0.js"><link rel="prefetch" href="/master/assets/js/348.a0d8892c.js"><link rel="prefetch" href="/master/assets/js/349.271b2764.js"><link rel="prefetch" href="/master/assets/js/35.98cb2348.js"><link rel="prefetch" href="/master/assets/js/350.1b965f47.js"><link rel="prefetch" href="/master/assets/js/351.c0624f56.js"><link rel="prefetch" href="/master/assets/js/352.81817c57.js"><link rel="prefetch" href="/master/assets/js/353.ddd2edab.js"><link rel="prefetch" href="/master/assets/js/354.855227b3.js"><link rel="prefetch" href="/master/assets/js/355.804cf1d2.js"><link rel="prefetch" href="/master/assets/js/356.d2964e61.js"><link rel="prefetch" href="/master/assets/js/357.7ba299cf.js"><link rel="prefetch" href="/master/assets/js/358.a8ecfa03.js"><link rel="prefetch" href="/master/assets/js/359.57bbde85.js"><link rel="prefetch" href="/master/assets/js/36.774346ff.js"><link rel="prefetch" href="/master/assets/js/360.0892f546.js"><link rel="prefetch" href="/master/assets/js/361.175e35a4.js"><link rel="prefetch" href="/master/assets/js/362.62140b9d.js"><link rel="prefetch" href="/master/assets/js/363.058f3e26.js"><link rel="prefetch" href="/master/assets/js/364.dc1ade2e.js"><link rel="prefetch" href="/master/assets/js/365.c6850ac9.js"><link rel="prefetch" href="/master/assets/js/366.f6391390.js"><link rel="prefetch" href="/master/assets/js/367.fbae4c5b.js"><link rel="prefetch" href="/master/assets/js/368.1605e421.js"><link rel="prefetch" href="/master/assets/js/369.2ed283c1.js"><link rel="prefetch" href="/master/assets/js/37.7464fe2f.js"><link rel="prefetch" href="/master/assets/js/370.60da5f74.js"><link rel="prefetch" href="/master/assets/js/371.f7735999.js"><link rel="prefetch" href="/master/assets/js/372.c5423a00.js"><link rel="prefetch" href="/master/assets/js/373.e93b3bf1.js"><link rel="prefetch" href="/master/assets/js/374.58cc2687.js"><link rel="prefetch" href="/master/assets/js/375.833f8388.js"><link rel="prefetch" href="/master/assets/js/376.a96713e9.js"><link rel="prefetch" href="/master/assets/js/377.feb8887f.js"><link rel="prefetch" href="/master/assets/js/378.b5ea7da1.js"><link rel="prefetch" href="/master/assets/js/379.9c535c3f.js"><link rel="prefetch" href="/master/assets/js/38.8a01bc34.js"><link rel="prefetch" href="/master/assets/js/380.b2f32db4.js"><link rel="prefetch" href="/master/assets/js/381.244a1a9c.js"><link rel="prefetch" href="/master/assets/js/382.0f1898e4.js"><link rel="prefetch" href="/master/assets/js/383.53b3ef09.js"><link rel="prefetch" href="/master/assets/js/384.a8c06105.js"><link rel="prefetch" href="/master/assets/js/385.94d60c17.js"><link rel="prefetch" href="/master/assets/js/386.c4c84347.js"><link rel="prefetch" href="/master/assets/js/387.32cfe199.js"><link rel="prefetch" href="/master/assets/js/388.d81db295.js"><link rel="prefetch" href="/master/assets/js/389.b980214b.js"><link rel="prefetch" href="/master/assets/js/39.50034261.js"><link rel="prefetch" href="/master/assets/js/390.5b89c16b.js"><link rel="prefetch" href="/master/assets/js/391.19014476.js"><link rel="prefetch" href="/master/assets/js/392.70d17113.js"><link rel="prefetch" href="/master/assets/js/393.a5c7f407.js"><link rel="prefetch" href="/master/assets/js/394.03b1f648.js"><link rel="prefetch" href="/master/assets/js/395.1e1802cd.js"><link rel="prefetch" href="/master/assets/js/396.323b2e41.js"><link rel="prefetch" href="/master/assets/js/397.e291cf21.js"><link rel="prefetch" href="/master/assets/js/398.377b97a2.js"><link rel="prefetch" href="/master/assets/js/399.ca0ae504.js"><link rel="prefetch" href="/master/assets/js/40.a9369b26.js"><link rel="prefetch" href="/master/assets/js/400.81602d18.js"><link rel="prefetch" href="/master/assets/js/401.a6ad6a22.js"><link rel="prefetch" href="/master/assets/js/402.13e47ac3.js"><link rel="prefetch" href="/master/assets/js/403.2a212be0.js"><link rel="prefetch" href="/master/assets/js/404.0e899aa6.js"><link rel="prefetch" href="/master/assets/js/405.8747b7d8.js"><link rel="prefetch" href="/master/assets/js/406.c17daf5a.js"><link rel="prefetch" href="/master/assets/js/407.7c4a4007.js"><link rel="prefetch" href="/master/assets/js/408.7c280c1e.js"><link rel="prefetch" href="/master/assets/js/409.3c81b89c.js"><link rel="prefetch" href="/master/assets/js/41.ec008197.js"><link rel="prefetch" href="/master/assets/js/410.c45bd067.js"><link rel="prefetch" href="/master/assets/js/411.941a8d6d.js"><link rel="prefetch" href="/master/assets/js/412.32a59444.js"><link rel="prefetch" href="/master/assets/js/413.71e70958.js"><link rel="prefetch" href="/master/assets/js/414.6539ce2e.js"><link rel="prefetch" href="/master/assets/js/415.ee290664.js"><link rel="prefetch" href="/master/assets/js/416.be0120c2.js"><link rel="prefetch" href="/master/assets/js/417.cb1287c2.js"><link rel="prefetch" href="/master/assets/js/418.6301f7c8.js"><link rel="prefetch" href="/master/assets/js/419.5e147de6.js"><link rel="prefetch" href="/master/assets/js/42.8c92c493.js"><link rel="prefetch" href="/master/assets/js/420.16554f8d.js"><link rel="prefetch" href="/master/assets/js/421.ad278595.js"><link rel="prefetch" href="/master/assets/js/422.b92f1ebd.js"><link rel="prefetch" href="/master/assets/js/423.bf7e6e62.js"><link rel="prefetch" href="/master/assets/js/424.debea96d.js"><link rel="prefetch" href="/master/assets/js/425.2d16ccda.js"><link rel="prefetch" href="/master/assets/js/426.f208a5bb.js"><link rel="prefetch" href="/master/assets/js/427.65889b04.js"><link rel="prefetch" href="/master/assets/js/428.df4c86f1.js"><link rel="prefetch" href="/master/assets/js/429.3bb0728c.js"><link rel="prefetch" href="/master/assets/js/43.da646fdb.js"><link rel="prefetch" href="/master/assets/js/430.feaada48.js"><link rel="prefetch" href="/master/assets/js/431.bb6ac1f8.js"><link rel="prefetch" href="/master/assets/js/432.25a58692.js"><link rel="prefetch" href="/master/assets/js/433.17462e79.js"><link rel="prefetch" href="/master/assets/js/434.1c5d8a1c.js"><link rel="prefetch" href="/master/assets/js/435.0511ec0d.js"><link rel="prefetch" href="/master/assets/js/436.637567cf.js"><link rel="prefetch" href="/master/assets/js/437.b6fb60a9.js"><link rel="prefetch" href="/master/assets/js/438.111d7d81.js"><link rel="prefetch" href="/master/assets/js/439.d2b13ba7.js"><link rel="prefetch" href="/master/assets/js/44.de72eed2.js"><link rel="prefetch" href="/master/assets/js/440.1e99ab23.js"><link rel="prefetch" href="/master/assets/js/441.7629b928.js"><link rel="prefetch" href="/master/assets/js/442.0da42fd1.js"><link rel="prefetch" href="/master/assets/js/443.03399eb1.js"><link rel="prefetch" href="/master/assets/js/444.3f70eb7c.js"><link rel="prefetch" href="/master/assets/js/445.11a0f546.js"><link rel="prefetch" href="/master/assets/js/446.cbb3a6d7.js"><link rel="prefetch" href="/master/assets/js/447.4ce5ee7b.js"><link rel="prefetch" href="/master/assets/js/448.60387043.js"><link rel="prefetch" href="/master/assets/js/449.88ba3aaa.js"><link rel="prefetch" href="/master/assets/js/45.625b2fe4.js"><link rel="prefetch" href="/master/assets/js/450.5db2dc7a.js"><link rel="prefetch" href="/master/assets/js/451.588dd5d3.js"><link rel="prefetch" href="/master/assets/js/452.48faa5f2.js"><link rel="prefetch" href="/master/assets/js/453.7bd83b22.js"><link rel="prefetch" href="/master/assets/js/454.c735a95b.js"><link rel="prefetch" href="/master/assets/js/455.4fac5865.js"><link rel="prefetch" href="/master/assets/js/456.cf8f3a65.js"><link rel="prefetch" href="/master/assets/js/457.51106dc7.js"><link rel="prefetch" href="/master/assets/js/458.9b5397ba.js"><link rel="prefetch" href="/master/assets/js/459.47a91f20.js"><link rel="prefetch" href="/master/assets/js/46.e6bbda1d.js"><link rel="prefetch" href="/master/assets/js/460.60252740.js"><link rel="prefetch" href="/master/assets/js/461.d05e7712.js"><link rel="prefetch" href="/master/assets/js/462.dc6e87d2.js"><link rel="prefetch" href="/master/assets/js/463.ff90d8d2.js"><link rel="prefetch" href="/master/assets/js/464.081f5d5f.js"><link rel="prefetch" href="/master/assets/js/465.b8bb19b2.js"><link rel="prefetch" href="/master/assets/js/466.76ac0fc0.js"><link rel="prefetch" href="/master/assets/js/467.0b996ead.js"><link rel="prefetch" href="/master/assets/js/468.c8a9da56.js"><link rel="prefetch" href="/master/assets/js/469.ec3d3fbe.js"><link rel="prefetch" href="/master/assets/js/47.7ef0a5fb.js"><link rel="prefetch" href="/master/assets/js/470.8f2c3efb.js"><link rel="prefetch" href="/master/assets/js/471.3b3b2098.js"><link rel="prefetch" href="/master/assets/js/472.563d25b7.js"><link rel="prefetch" href="/master/assets/js/473.7c485718.js"><link rel="prefetch" href="/master/assets/js/474.11e3aa9a.js"><link rel="prefetch" href="/master/assets/js/475.b65af802.js"><link rel="prefetch" href="/master/assets/js/476.fdbd4807.js"><link rel="prefetch" href="/master/assets/js/477.0492a961.js"><link rel="prefetch" href="/master/assets/js/478.a55b56cf.js"><link rel="prefetch" href="/master/assets/js/479.543f05d2.js"><link rel="prefetch" href="/master/assets/js/48.972ccfc1.js"><link rel="prefetch" href="/master/assets/js/480.4a9d0989.js"><link rel="prefetch" href="/master/assets/js/481.9af84d88.js"><link rel="prefetch" href="/master/assets/js/482.c7abc695.js"><link rel="prefetch" href="/master/assets/js/483.c9ac42a2.js"><link rel="prefetch" href="/master/assets/js/484.f62afe46.js"><link rel="prefetch" href="/master/assets/js/485.665e4cfb.js"><link rel="prefetch" href="/master/assets/js/486.1972e89e.js"><link rel="prefetch" href="/master/assets/js/487.0bb61ba0.js"><link rel="prefetch" href="/master/assets/js/488.fe74aaec.js"><link rel="prefetch" href="/master/assets/js/489.560064b2.js"><link rel="prefetch" href="/master/assets/js/49.35aea578.js"><link rel="prefetch" href="/master/assets/js/490.482f13aa.js"><link rel="prefetch" href="/master/assets/js/491.31e4c409.js"><link rel="prefetch" href="/master/assets/js/492.d1382755.js"><link rel="prefetch" href="/master/assets/js/493.11782c6e.js"><link rel="prefetch" href="/master/assets/js/494.a486eafe.js"><link rel="prefetch" href="/master/assets/js/495.8f5ba3ec.js"><link rel="prefetch" href="/master/assets/js/496.d336a61c.js"><link rel="prefetch" href="/master/assets/js/497.1012d902.js"><link rel="prefetch" href="/master/assets/js/498.d4e3a941.js"><link rel="prefetch" href="/master/assets/js/499.9f236736.js"><link rel="prefetch" href="/master/assets/js/5.a5bd7cc1.js"><link rel="prefetch" href="/master/assets/js/50.ab125b12.js"><link rel="prefetch" href="/master/assets/js/500.af0f8d57.js"><link rel="prefetch" href="/master/assets/js/501.9ce9505b.js"><link rel="prefetch" href="/master/assets/js/502.be5de16b.js"><link rel="prefetch" href="/master/assets/js/503.fd5701e0.js"><link rel="prefetch" href="/master/assets/js/504.1435e23f.js"><link rel="prefetch" href="/master/assets/js/505.a2747031.js"><link rel="prefetch" href="/master/assets/js/506.3a96e31f.js"><link rel="prefetch" href="/master/assets/js/507.83861bfe.js"><link rel="prefetch" href="/master/assets/js/508.510f0578.js"><link rel="prefetch" href="/master/assets/js/509.719444e3.js"><link rel="prefetch" href="/master/assets/js/51.82d4e6e7.js"><link rel="prefetch" href="/master/assets/js/510.e4aa5bc0.js"><link rel="prefetch" href="/master/assets/js/511.4d23075a.js"><link rel="prefetch" href="/master/assets/js/512.bc62c9dd.js"><link rel="prefetch" href="/master/assets/js/513.9325bfb3.js"><link rel="prefetch" href="/master/assets/js/514.2599358e.js"><link rel="prefetch" href="/master/assets/js/515.461693cc.js"><link rel="prefetch" href="/master/assets/js/516.714d5519.js"><link rel="prefetch" href="/master/assets/js/517.086e6db6.js"><link rel="prefetch" href="/master/assets/js/518.9e79587d.js"><link rel="prefetch" href="/master/assets/js/519.9ba48d6c.js"><link rel="prefetch" href="/master/assets/js/52.abc08f3a.js"><link rel="prefetch" href="/master/assets/js/520.b11e9b78.js"><link rel="prefetch" href="/master/assets/js/521.c662fa95.js"><link rel="prefetch" href="/master/assets/js/522.7c7177a1.js"><link rel="prefetch" href="/master/assets/js/523.e9f3d12b.js"><link rel="prefetch" href="/master/assets/js/524.38105071.js"><link rel="prefetch" href="/master/assets/js/525.e1d1c339.js"><link rel="prefetch" href="/master/assets/js/526.227023bd.js"><link rel="prefetch" href="/master/assets/js/527.38edbb45.js"><link rel="prefetch" href="/master/assets/js/528.4187837a.js"><link rel="prefetch" href="/master/assets/js/529.8ccc7cd4.js"><link rel="prefetch" href="/master/assets/js/53.18095fce.js"><link rel="prefetch" href="/master/assets/js/530.9f54e42f.js"><link rel="prefetch" href="/master/assets/js/531.9a159858.js"><link rel="prefetch" href="/master/assets/js/532.fba3e5fa.js"><link rel="prefetch" href="/master/assets/js/533.dd8718e7.js"><link rel="prefetch" href="/master/assets/js/534.25b9b396.js"><link rel="prefetch" href="/master/assets/js/535.539f669e.js"><link rel="prefetch" href="/master/assets/js/536.4dfd9143.js"><link rel="prefetch" href="/master/assets/js/54.7ad15f36.js"><link rel="prefetch" href="/master/assets/js/55.342793a5.js"><link rel="prefetch" href="/master/assets/js/56.7e791a9a.js"><link rel="prefetch" href="/master/assets/js/57.6873d70f.js"><link rel="prefetch" href="/master/assets/js/58.f7c03aba.js"><link rel="prefetch" href="/master/assets/js/59.fb89ebdb.js"><link rel="prefetch" href="/master/assets/js/6.6b35b286.js"><link rel="prefetch" href="/master/assets/js/60.d34627ec.js"><link rel="prefetch" href="/master/assets/js/61.b877e605.js"><link rel="prefetch" href="/master/assets/js/62.83d87903.js"><link rel="prefetch" href="/master/assets/js/64.cc72cc99.js"><link rel="prefetch" href="/master/assets/js/65.50e7005e.js"><link rel="prefetch" href="/master/assets/js/66.d222c5de.js"><link rel="prefetch" href="/master/assets/js/67.d46e6e13.js"><link rel="prefetch" href="/master/assets/js/68.22e71702.js"><link rel="prefetch" href="/master/assets/js/69.c7246744.js"><link rel="prefetch" href="/master/assets/js/7.d3b9cd26.js"><link rel="prefetch" href="/master/assets/js/70.31cd880e.js"><link rel="prefetch" href="/master/assets/js/71.fa69488e.js"><link rel="prefetch" href="/master/assets/js/72.61a4a97d.js"><link rel="prefetch" href="/master/assets/js/73.de915ee8.js"><link rel="prefetch" href="/master/assets/js/74.f3630fd5.js"><link rel="prefetch" href="/master/assets/js/75.78655477.js"><link rel="prefetch" href="/master/assets/js/76.d32ed91e.js"><link rel="prefetch" href="/master/assets/js/77.0864f6f8.js"><link rel="prefetch" href="/master/assets/js/78.08f8a117.js"><link rel="prefetch" href="/master/assets/js/79.795950e7.js"><link rel="prefetch" href="/master/assets/js/8.9e2a8377.js"><link rel="prefetch" href="/master/assets/js/80.8dd388a0.js"><link rel="prefetch" href="/master/assets/js/81.8bbdd2df.js"><link rel="prefetch" href="/master/assets/js/82.16c18c8a.js"><link rel="prefetch" href="/master/assets/js/83.d3fa828d.js"><link rel="prefetch" href="/master/assets/js/84.55a3e93e.js"><link rel="prefetch" href="/master/assets/js/85.ecfd5f5b.js"><link rel="prefetch" href="/master/assets/js/86.938daad3.js"><link rel="prefetch" href="/master/assets/js/87.02044294.js"><link rel="prefetch" href="/master/assets/js/88.0c9035bb.js"><link rel="prefetch" href="/master/assets/js/89.99f2085b.js"><link rel="prefetch" href="/master/assets/js/9.fa0d8336.js"><link rel="prefetch" href="/master/assets/js/90.3e006ff3.js"><link rel="prefetch" href="/master/assets/js/91.318c9e89.js"><link rel="prefetch" href="/master/assets/js/92.28b5d1d1.js"><link rel="prefetch" href="/master/assets/js/93.73381079.js"><link rel="prefetch" href="/master/assets/js/94.76ceddae.js"><link rel="prefetch" href="/master/assets/js/95.98ff82e9.js"><link rel="prefetch" href="/master/assets/js/96.dd53f80f.js"><link rel="prefetch" href="/master/assets/js/97.ef905fc8.js"><link rel="prefetch" href="/master/assets/js/98.aa71e859.js"><link rel="prefetch" href="/master/assets/js/99.2ac6a26c.js"><link rel="prefetch" href="/master/assets/js/vendors~docsearch.4e4574f6.js">
    <link rel="stylesheet" href="/master/assets/css/0.styles.e093dded.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/master/en/" class="home-link router-link-active"><img src="/master/images/doris-logo-only.png" alt="Apache Doris" class="logo"> <span class="site-name can-hide">Apache Doris</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <div class="can-hide"><!----></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><div><!----></div>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Downloads</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Compilation and Deployment</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Getting Started</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Administrator Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Extending Ability</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Design Documents</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/master/en/internal/doris_storage_optimization.html" class="sidebar-link">Doris Storage File Format Optimization</a></li><li><a href="/master/en/internal/grouping_sets_design.html" class="active sidebar-link">GROUPING SETS DESIGN</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/master/en/internal/grouping_sets_design.html#_1-grouping-sets-background" class="sidebar-link">1. GROUPING SETS Background</a></li><li class="sidebar-sub-header"><a href="/master/en/internal/grouping_sets_design.html#_2-object" class="sidebar-link">2. Object</a></li><li class="sidebar-sub-header"><a href="/master/en/internal/grouping_sets_design.html#_3-implementation" class="sidebar-link">3. Implementation</a></li></ul></li><li><a href="/master/en/internal/metadata-design.html" class="sidebar-link">Metadata Design Document</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SQL Manual</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Developer Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Apache Commnity</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="grouping-sets-design"><a href="#grouping-sets-design" class="header-anchor">#</a> GROUPING SETS DESIGN</h1> <h2 id="_1-grouping-sets-background"><a href="#_1-grouping-sets-background" class="header-anchor">#</a> 1. GROUPING SETS Background</h2> <p>The <code>CUBE</code>, <code>ROLLUP</code>, and <code>GROUPING</code> <code>SETS</code> extensions to SQL make querying and reporting easier and faster. <code>CUBE</code>, <code>ROLLUP</code>, and grouping sets produce a single result set that is equivalent to a <code>UNION</code> <code>ALL</code> of differently grouped rows. <code>ROLLUP</code> calculates aggregations such as <code>SUM</code>, <code>COUNT</code>, <code>MAX</code>, <code>MIN</code>, and <code>AVG</code> at increasing levels of aggregation, from the most detailed up to a grand total. <code>CUBE</code> is an extension similar to <code>ROLLUP</code>, enabling a single statement to calculate all possible combinations of aggregations. The <code>CUBE</code>, <code>ROLLUP</code>, and the <code>GROUPING</code> <code>SETS</code> extension lets you specify just the groupings needed in the <code>GROUP</code> <code>BY</code> clause. This allows efficient analysis across multiple dimensions without performing a <code>CUBE</code> operation. Computing a <code>CUBE</code> creates a heavy processing load, so replacing cubes with grouping sets can significantly increase performance.
To enhance performance, <code>CUBE</code>, <code>ROLLUP</code>, and <code>GROUPING SETS</code> can be parallelized: multiple processes can simultaneously execute all of these statements. These capabilities make aggregate calculations more efficient, thereby enhancing database performance, and scalability.</p> <p>The three <code>GROUPING</code> functions help you identify the group each row belongs to and enable sorting subtotal rows and filtering results.</p> <h3 id="_1-1-grouping-sets-syntax"><a href="#_1-1-grouping-sets-syntax" class="header-anchor">#</a> 1.1 GROUPING SETS Syntax</h3> <p><code>GROUPING SETS</code> syntax lets you define multiple groupings in the same query. <code>GROUP BY</code> computes all the groupings specified and combines them with <code>UNION ALL</code>. For example, consider the following statement:</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT k1, k2, SUM( k3 ) FROM t GROUP BY GROUPING SETS ( (k1, k2), (k1), (k2), ( ) );
</code></pre></div><p>This statement is equivalent to:</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT k1, k2, SUM( k3 ) FROM t GROUP BY k1, k2
UNION
SELECT k1, null, SUM( k3 ) FROM t GROUP BY k1
UNION
SELECT null, k2, SUM( k3 ) FROM t GROUP BY k2
UNION
SELECT null, null, SUM( k3 ) FROM t
</code></pre></div><p>This is an example of real query：</p> <div class="language- extra-class"><pre class="language-text"><code>mysql&gt; SELECT * FROM t;
+------+------+------+
| k1   | k2   | k3   |
+------+------+------+
| a    | A    |    1 |
| a    | A    |    2 |
| a    | B    |    1 |
| a    | B    |    3 |
| b    | A    |    1 |
| b    | A    |    4 |
| b    | B    |    1 |
| b    | B    |    5 |
+------+------+------+
8 rows in set (0.01 sec)

mysql&gt; SELECT k1, k2, SUM(k3) FROM t GROUP BY GROUPING SETS ( (k1, k2), (k2), (k1), ( ) );
+------+------+-----------+
| k1   | k2   | sum(`k3`) |
+------+------+-----------+
| b    | B    |         6 |
| a    | B    |         4 |
| a    | A    |         3 |
| b    | A    |         5 |
| NULL | B    |        10 |
| NULL | A    |         8 |
| a    | NULL |         7 |
| b    | NULL |        11 |
| NULL | NULL |        18 |
+------+------+-----------+
9 rows in set (0.06 sec)
</code></pre></div><h3 id="_1-2-rollup-syntax"><a href="#_1-2-rollup-syntax" class="header-anchor">#</a> 1.2 ROLLUP Syntax</h3> <p><code>ROLLUP</code> enables a <code>SELECT</code> statement to calculate multiple levels of subtotals across a specified group of dimensions. It also calculates a grand total. <code>ROLLUP</code> is a simple extension to the <code>GROUP</code> <code>BY</code> clause, so its syntax is extremely easy to use. The <code>ROLLUP</code> extension is highly efficient, adding minimal overhead to a query.</p> <p><code>ROLLUP</code> appears in the <code>GROUP</code> <code>BY</code> clause in a <code>SELECT</code> statement. Its form is:</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT a, b,c, SUM( d ) FROM tab1 GROUP BY ROLLUP(a,b,c)
</code></pre></div><p>This statement is equivalent to GROUPING SETS as followed：</p> <div class="language- extra-class"><pre class="language-text"><code>GROUPING SETS (
(a,b,c),
( a, b ),
( a),
( )
)
</code></pre></div><h3 id="_1-3-cube-syntax"><a href="#_1-3-cube-syntax" class="header-anchor">#</a> 1.3 CUBE Syntax</h3> <p>Like <code>ROLLUP</code> <code>CUBE</code> generates all the subtotals that could be calculated for a data cube with the specified dimensions.</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT a, b,c, SUM( d ) FROM tab1 GROUP BY CUBE(a,b,c)
</code></pre></div><p>e.g.  CUBE ( a, b, c )  is equivalent to GROUPING SETS as followed:</p> <div class="language- extra-class"><pre class="language-text"><code>GROUPING SETS (
( a, b, c ),
( a, b ),
( a,    c ),
( a       ),
(    b, c ),
(    b    ),
(       c ),
(         )
)
</code></pre></div><h3 id="_1-4-grouping-and-grouping-id-function"><a href="#_1-4-grouping-and-grouping-id-function" class="header-anchor">#</a> 1.4 GROUPING and GROUPING_ID Function</h3> <p>Indicates whether a specified column expression in a <code>GROUP BY</code> list is aggregated or not. <code>GROUPING</code>returns 1 for aggregated or 0 for not aggregated in the result set. <code>GROUPING</code> can be used only in the <code>SELECT</code> list, <code>HAVING</code>, and <code>ORDER BY</code> clauses when <code>GROUP BY</code> is specified.</p> <p><code>GROUPING_ID</code> describes which of a list of expressions are grouped in a row produced by a <code>GROUP BY</code> query. The <code>GROUPING_ID</code> function simply returns the decimal equivalent of the binary value formed as a result of the concatenation of the values returned by the <code>GROUPING</code> functions.</p> <p>Each <code>GROUPING_ID</code> argument must be an element of the <code>GROUP BY</code> list. <code>GROUPING_ID ()</code> returns an <strong>integer</strong> bitmap whose lowest N bits may be lit. A lit <strong>bit</strong> indicates the corresponding argument is not a grouping column for the given output row. The lowest-order <strong>bit</strong> corresponds to argument N, and the N-1th lowest-order <strong>bit</strong> corresponds to argument 1. If the column is a grouping column the bit is 0 else is 1.</p> <p>For example：</p> <div class="language- extra-class"><pre class="language-text"><code>mysql&gt; select * from t;
+------+------+------+
| k1   | k2   | k3   |
+------+------+------+
| a    | A    |    1 |
| a    | A    |    2 |
| a    | B    |    1 |
| a    | B    |    3 |
| b    | A    |    1 |
| b    | A    |    4 |
| b    | B    |    1 |
| b    | B    |    5 |
+------+------+------+
</code></pre></div><p>grouping sets result：</p> <div class="language- extra-class"><pre class="language-text"><code>mysql&gt; SELECT k1, k2, GROUPING(k1), GROUPING(k2), SUM(k3) FROM t GROUP BY GROUPING SETS ( (k1, k2), (k2), (k1), ( ) );
+------+------+----------------+----------------+-----------+
| k1   | k2   | grouping(`k1`) | grouping(`k2`) | sum(`k3`) |
+------+------+----------------+----------------+-----------+
| a    | A    |              0 |              0 |         3 |
| a    | B    |              0 |              0 |         4 |
| a    | NULL |              0 |              1 |         7 |
| b    | A    |              0 |              0 |         5 |
| b    | B    |              0 |              0 |         6 |
| b    | NULL |              0 |              1 |        11 |
| NULL | A    |              1 |              0 |         8 |
| NULL | B    |              1 |              0 |        10 |
| NULL | NULL |              1 |              1 |        18 |
+------+------+----------------+----------------+-----------+
9 rows in set (0.02 sec)

mysql&gt; SELECT k1, k2, GROUPING_ID(k1,k2), SUM(k3) FROM t GROUP BY GROUPING SETS ( (k1, k2), (k2), (k1), ( ) );
+------+------+-------------------------+-----------+
| k1   | k2   | grouping_id(`k1`, `k2`) | sum(`k3`) |
+------+------+-------------------------+-----------+
| a    | A    |                       0 |         3 |
| a    | B    |                       0 |         4 |
| a    | NULL |                       1 |         7 |
| b    | A    |                       0 |         5 |
| b    | B    |                       0 |         6 |
| b    | NULL |                       1 |        11 |
| NULL | A    |                       2 |         8 |
| NULL | B    |                       2 |        10 |
| NULL | NULL |                       3 |        18 |
+------+------+-------------------------+-----------+
9 rows in set (0.02 sec)

mysql&gt; SELECT k1, k2, grouping(k1), grouping(k2), GROUPING_ID(k1,k2), SUM(k4) FROM t GROUP BY GROUPING SETS ( (k1, k2), (k2), (k1), ( ) ) order by k1, k2;
+------+------+----------------+----------------+-------------------------+-----------+
| k1   | k2   | grouping(`k1`) | grouping(`k2`) | grouping_id(`k1`, `k2`) | sum(`k4`) |
+------+------+----------------+----------------+-------------------------+-----------+
| a    | A    |              0 |              0 |                       0 |         3 |
| a    | B    |              0 |              0 |                       0 |         4 |
| a    | NULL |              0 |              1 |                       1 |         7 |
| b    | A    |              0 |              0 |                       0 |         5 |
| b    | B    |              0 |              0 |                       0 |         6 |
| b    | NULL |              0 |              1 |                       1 |        11 |
| NULL | A    |              1 |              0 |                       2 |         8 |
| NULL | B    |              1 |              0 |                       2 |        10 |
| NULL | NULL |              1 |              1 |                       3 |        18 |
+------+------+----------------+----------------+-------------------------+-----------+
9 rows in set (0.02 sec)

</code></pre></div><h3 id="_1-5-composition-and-nesting-of-grouping-sets"><a href="#_1-5-composition-and-nesting-of-grouping-sets" class="header-anchor">#</a> 1.5 Composition and nesting of GROUPING SETS</h3> <p>First of all, a GROUP BY clause is essentially a special case of GROUPING SETS, for example:</p> <div class="language- extra-class"><pre class="language-text"><code>   GROUP BY a
is equivalent to:
   GROUP BY GROUPING SETS((a))
also，
   GROUP BY a,b,c
is equivalent to:
   GROUP BY GROUPING SETS((a,b,c))
</code></pre></div><p>Similarly, CUBE and ROLLUP can be expanded into GROUPING SETS, so the various combinations and nesting of GROUP BY, CUBE, ROLLUP, GROUPING SETS are essentially the combination and nesting of GROUPING SETS.</p> <p>For GROUPING SETS nesting, it is semantically equivalent to writing the statements inside the nest directly outside. (ref:<a href="https://www.brytlyt.com/documentation/data-manipulation-dml/grouping-sets-rollup-cube/" target="_blank" rel="noopener noreferrer">https://www.brytlyt.com/documentation/data-manipulation-dml/grouping-sets-rollup-cube/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>) mentions:</p> <div class="language- extra-class"><pre class="language-text"><code>The CUBE and ROLLUP constructs can be used either directly in the GROUP BY clause, or nested inside a GROUPING SETS clause. If one GROUPING SETS clause is nested inside another, the effect is the same as if all the elements of the inner clause had been written directly in the outer clause.
</code></pre></div><p>For a combined list of multiple GROUPING SETS, many databases consider it a cross product relationship.</p> <p>for example:</p> <div class="language- extra-class"><pre class="language-text"><code>GROUP BY a, CUBE (b, c), GROUPING SETS ((d), (e))

is equivalent to:

GROUP BY GROUPING SETS (
(a, b, c, d), (a, b, c, e),
(a, b, d),    (a, b, e),
(a, c, d),    (a, c, e),
(a, d),       (a, e)
)
</code></pre></div><p>For the combination and nesting of GROUPING SETS, each database support is not the same. For example snowflake does not support any combination and nesting.
（<a href="https://docs.snowflake.net/manuals/sql-reference/constructs/group-by.html" target="_blank" rel="noopener noreferrer">https://docs.snowflake.net/manuals/sql-reference/constructs/group-by.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）</p> <p>Oracle supports both composition and nesting.
（<a href="https://docs.oracle.com/cd/B19306_01/server.102/b14223/aggreg.htm#i1006842" target="_blank" rel="noopener noreferrer">https://docs.oracle.com/cd/B19306_01/server.102/b14223/aggreg.htm#i1006842<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）</p> <p>Presto supports composition, but not nesting.
（<a href="https://prestodb.github.io/docs/current/sql/select.html" target="_blank" rel="noopener noreferrer">https://prestodb.github.io/docs/current/sql/select.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）</p> <h2 id="_2-object"><a href="#_2-object" class="header-anchor">#</a> 2. Object</h2> <p>Support <code>GROUPING SETS</code>， <code>ROLLUP</code> and <code>CUBE</code> syntax，impliments 1.1, 1.2, 1.3 1.4, 1.5, not support the combination
and nesting of GROUPING SETS at current version.</p> <h3 id="_2-1-grouping-sets-syntax"><a href="#_2-1-grouping-sets-syntax" class="header-anchor">#</a> 2.1 GROUPING SETS Syntax</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT ...
FROM ...
[ ... ]
GROUP BY GROUPING SETS ( groupSet [ , groupSet [ , ... ] ] )
[ ... ]

groupSet ::= { ( expr  [ , expr [ , ... ] ] )}

&lt;expr&gt;
Expression，column name.
</code></pre></div><h3 id="_2-2-rollup-syntax"><a href="#_2-2-rollup-syntax" class="header-anchor">#</a> 2.2 ROLLUP Syntax</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT ...
FROM ...
[ ... ]
GROUP BY ROLLUP ( expr  [ , expr [ , ... ] ] )
[ ... ]

&lt;expr&gt;
Expression，column name.
</code></pre></div><h3 id="_2-3-cube-syntax"><a href="#_2-3-cube-syntax" class="header-anchor">#</a> 2.3 CUBE Syntax</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT ...
FROM ...
[ ... ]
GROUP BY CUBE ( expr  [ , expr [ , ... ] ] )
[ ... ]

&lt;expr&gt;
Expression，column name.
</code></pre></div><h2 id="_3-implementation"><a href="#_3-implementation" class="header-anchor">#</a> 3. Implementation</h2> <h3 id="_3-1-overall-design-approaches"><a href="#_3-1-overall-design-approaches" class="header-anchor">#</a> 3.1 Overall Design Approaches</h3> <p>For <code>GROUPING SET</code>  is equivalent to the <code>UNION</code> of  <code>GROUP BY</code> .  So we can expand input rows, and run an  GROUP BY on these rows。</p> <p>For example：</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT a, b FROM src GROUP BY a, b GROUPING SETS ((a, b), (a), (b), ());
</code></pre></div><p>Data in  table src :</p> <div class="language- extra-class"><pre class="language-text"><code>1, 2
3, 4
</code></pre></div><p>Base on  GROUPING SETS , we can expend the input to：</p> <div class="language- extra-class"><pre class="language-text"><code>1, 2       (GROUPING_ID: a, b -&gt; 00 -&gt; 0)
1, null    (GROUPING_ID: a, null -&gt; 01 -&gt; 1)
null, 2    (GROUPING_ID: null, b -&gt; 10 -&gt; 2)
null, null (GROUPING_ID: null, null -&gt; 11 -&gt; 3)

3, 4       (GROUPING_ID: a, b -&gt; 00 -&gt; 0)
3, null    (GROUPING_ID: a, null -&gt; 01 -&gt; 1)
null, 4    (GROUPING_ID: null, b -&gt; 10 -&gt; 2)
null, null (GROUPING_ID: null, null -&gt; 11 -&gt; 3)
</code></pre></div><p>And then use those row as input, then GROUP BY  a, b, GROUPING_ID</p> <h3 id="_3-2-example"><a href="#_3-2-example" class="header-anchor">#</a> 3.2 Example</h3> <p>Table t：</p> <div class="language- extra-class"><pre class="language-text"><code>mysql&gt; select * from t;
+------+------+------+
| k1   | k2   | k3   |
+------+------+------+
| a    | A    |    1 |
| a    | A    |    2 |
| a    | B    |    1 |
| a    | B    |    3 |
| b    | A    |    1 |
| b    | A    |    4 |
| b    | B    |    1 |
| b    | B    |    5 |
+------+------+------+
8 rows in set (0.01 sec)
</code></pre></div><p>for the query：</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT k1, k2, GROUPING_ID(k1,k2), SUM(k3) FROM t GROUP BY GROUPING SETS ((k1, k2), (k1), (k2), ());
</code></pre></div><p>First，expand the input，every row expand into 4 rows ( the size of GROUPING SETS), and insert GROUPING_ID column</p> <p>e.g.  a, A, 1 expanded to：</p> <div class="language- extra-class"><pre class="language-text"><code>+------+------+------+-------------------------+
| k1   | k2   | k3   | GROUPING_ID(`k1`, `k2`) |
+------+------+------+-------------------------+
| a    | A    |    1 |                       0 |
| a    | NULL |    1 |                       1 |
| NULL | A    |    1 |                       2 |
| NULL | NULL |    1 |                       3 |
+------+------+------+-------------------------+
</code></pre></div><p>Finally, all rows expended as follows (32 rows):</p> <div class="language- extra-class"><pre class="language-text"><code>+------+------+------+-------------------------+
| k1   | k2   | k3   | GROUPING_ID(`k1`, `k2`) |
+------+------+------+-------------------------+
| a    | A    |    1 |                       0 |
| a    | A    |    2 |                       0 |
| a    | B    |    1 |                       0 |
| a    | B    |    3 |                       0 |
| b    | A    |    1 |                       0 |
| b    | A    |    4 |                       0 |
| b    | B    |    1 |                       0 |
| b    | B    |    5 |                       0 |
| a    | NULL |    1 |                       1 |
| a    | NULL |    1 |                       1 |
| a    | NULL |    2 |                       1 |
| a    | NULL |    3 |                       1 |
| b    | NULL |    1 |                       1 |
| b    | NULL |    1 |                       1 |
| b    | NULL |    4 |                       1 |
| b    | NULL |    5 |                       1 |
| NULL | A    |    1 |                       2 |
| NULL | A    |    1 |                       2 |
| NULL | A    |    2 |                       2 |
| NULL | A    |    4 |                       2 |
| NULL | B    |    1 |                       2 |
| NULL | B    |    1 |                       2 |
| NULL | B    |    3 |                       2 |
| NULL | B    |    5 |                       2 |
| NULL | NULL |    1 |                       3 |
| NULL | NULL |    1 |                       3 |
| NULL | NULL |    1 |                       3 |
| NULL | NULL |    1 |                       3 |
| NULL | NULL |    2 |                       3 |
| NULL | NULL |    3 |                       3 |
| NULL | NULL |    4 |                       3 |
| NULL | NULL |    5 |                       3 |
+------+------+------+-------------------------+
32 rows in set.
</code></pre></div><p>now GROUP BY k1, k2, GROUPING_ID(k1,k2):</p> <div class="language- extra-class"><pre class="language-text"><code>+------+------+-------------------------+-----------+
| k1   | k2   | grouping_id(`k1`, `k2`) | sum(`k3`) |
+------+------+-------------------------+-----------+
| a    | A    |                       0 |         3 |
| a    | B    |                       0 |         4 |
| a    | NULL |                       1 |         7 |
| b    | A    |                       0 |         5 |
| b    | B    |                       0 |         6 |
| b    | NULL |                       1 |        11 |
| NULL | A    |                       2 |         8 |
| NULL | B    |                       2 |        10 |
| NULL | NULL |                       3 |        18 |
+------+------+-------------------------+-----------+
9 rows in set (0.02 sec)
</code></pre></div><p>The result is equivalent to the UNION ALL</p> <div class="language- extra-class"><pre class="language-text"><code>select k1, k2, sum(k3) from t group by k1, k2
UNION ALL
select NULL, k2, sum(k3) from t group by k2
UNION ALL
select k1, NULL, sum(k3) from t group by k1
UNION ALL
select NULL, NULL, sum(k3) from t;

+------+------+-----------+
| k1   | k2   | sum(`k3`) |
+------+------+-----------+
| b    | B    |         6 |
| b    | A    |         5 |
| a    | A    |         3 |
| a    | B    |         4 |
| a    | NULL |         7 |
| b    | NULL |        11 |
| NULL | B    |        10 |
| NULL | A    |         8 |
| NULL | NULL |        18 |
+------+------+-----------+
9 rows in set (0.06 sec)
</code></pre></div><h3 id="_3-3-fe"><a href="#_3-3-fe" class="header-anchor">#</a> 3.3 FE</h3> <h4 id="_3-3-1-tasks"><a href="#_3-3-1-tasks" class="header-anchor">#</a> 3.3.1 Tasks</h4> <ol><li>Add GroupByClause, repalce groupingExprs.</li> <li>Add Grouping Sets, Cube and RollUp syntax.</li> <li>Add GroupByClause in SelectStmt.</li> <li>Add GroupingFunctionCallExpr, impliments grouping grouping_id function call</li> <li>Add VirtualSlot, generate the map of virtual slots and real slots</li> <li>add virtual column GROUPING_ID and other virtual columns generated by grouping and grouping_id, insert into groupingExprs,</li> <li>Add a PlanNode, name as RepeatNode. For GroupingSets aggregation insert RepeatNode to the plan.</li></ol> <h4 id="_3-3-2-tuple"><a href="#_3-3-2-tuple" class="header-anchor">#</a> 3.3.2 Tuple</h4> <p>In order to add GROUPING_ID to groupingExprs in GroupByClause, need to create virtual SlotRef, also, need tot create a tuple for this slot, named GROUPING__ID Tuple.</p> <p>For the plannode RepeatNode, it's input is all the  tuple of it's children, It's output tuple is the repeat data and GROUPING_ID.</p> <h4 id="_3-3-3-expression-and-function-substitution"><a href="#_3-3-3-expression-and-function-substitution" class="header-anchor">#</a> 3.3.3 Expression and Function Substitution</h4> <p>expr -&gt; if(bitand(pos, grouping_id)=0, expr, null) for expr in extension grouping clause
grouping_id() -&gt; grouping_id(grouping_id) for grouping_id function</p> <h3 id="_3-4-be"><a href="#_3-4-be" class="header-anchor">#</a> 3.4 BE</h3> <h4 id="_3-4-1-tasks"><a href="#_3-4-1-tasks" class="header-anchor">#</a> 3.4.1 Tasks</h4> <ol><li>Add RepeatNode executor, expend the input data and append GROUPING_ID to every row</li> <li>Implements grouping_id() and grouping() function.</li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/apache/incubator-doris/edit/master/docs/en/internal/grouping_sets_design.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/29/2020, 1:14:31 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/master/en/internal/doris_storage_optimization.html" class="prev">
        Doris Storage File Format Optimization
      </a></span> <span class="next"><a href="/master/en/internal/metadata-design.html">
        Metadata Design Document
      </a>
      →
    </span></p></div> <footer><div class="footer-wrapper"><br> <span class="footer-text">© Copyright 2020, Apache Doris(Incubating)</span> <br> <span class="footer-text">
  Apache Doris(incubating) is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</span></div></footer></main></div><div class="global-ui"></div></div>
    <script src="/master/assets/js/app.f6322a31.js" defer></script><script src="/master/assets/js/4.af2e6818.js" defer></script><script src="/master/assets/js/3.7820216c.js" defer></script><script src="/master/assets/js/63.42dc0e05.js" defer></script>
  </body>
</html>
