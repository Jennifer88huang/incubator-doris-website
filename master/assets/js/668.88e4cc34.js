(window.webpackJsonp=window.webpackJsonp||[]).push([[668],{1058:function(t,r,a){"use strict";a.r(r);var e=a(43),v=Object(e.a)({},(function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"datax-doriswriter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#datax-doriswriter"}},[t._v("#")]),t._v(" DataX doriswriter")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/alibaba/DataX",target:"_blank",rel:"noopener noreferrer"}},[t._v("DataX"),a("OutboundLink")],1),t._v(" doriswriter 插件，用于通过 DataX 同步其他数据源的数据到 Doris 中。")]),t._v(" "),a("p",[t._v("这个插件是利用Doris的Stream Load 功能进行数据导入的。需要配合 DataX 服务一起使用。")]),t._v(" "),a("h2",{attrs:{id:"关于-datax"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于-datax"}},[t._v("#")]),t._v(" 关于 DataX")]),t._v(" "),a("p",[t._v("DataX 是阿里云 DataWorks数据集成 的开源版本，在阿里巴巴集团内被广泛使用的离线数据同步工具/平台。DataX 实现了包括 MySQL、Oracle、SqlServer、Postgre、HDFS、Hive、ADS、HBase、TableStore(OTS)、MaxCompute(ODPS)、Hologres、DRDS 等各种异构数据源之间高效的数据同步功能。")]),t._v(" "),a("p",[t._v("更多信息请参阅: "),a("code",[t._v("https://github.com/alibaba/DataX/")])]),t._v(" "),a("h2",{attrs:{id:"使用手册"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用手册"}},[t._v("#")]),t._v(" 使用手册")]),t._v(" "),a("p",[t._v("DataX doriswriter 插件代码 "),a("a",{attrs:{href:"https://github.com/apache/incubator-doris/tree/master/extension/DataX",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("这个目录包含插件代码以及 DataX 项目的开发环境。")]),t._v(" "),a("p",[t._v("doriswriter 插件依赖的 DataX 代码中的一些模块。而这些模块并没有在 Maven 官方仓库中。所以我们在开发 doriswriter 插件时，需要下载完整的 DataX 代码库，才能进行插件的编译和开发。")]),t._v(" "),a("h3",{attrs:{id:"目录结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[t._v("#")]),t._v(" 目录结构")]),t._v(" "),a("ol",[a("li",[a("p",[a("code",[t._v("doriswriter/")])]),t._v(" "),a("p",[t._v("这个目录是 doriswriter 插件的代码目录。这个目录中的所有代码，都托管在 Apache Doris 的代码库中。")]),t._v(" "),a("p",[t._v("doriswriter 插件帮助文档在这里："),a("code",[t._v("doriswriter/doc")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("init_env.sh")])]),t._v(" "),a("p",[t._v("这个脚本主要用于构建 DataX 开发环境，他主要进行了以下操作：")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("将 DataX 代码库 clone 到本地。")])]),t._v(" "),a("li",[a("p",[t._v("将 "),a("code",[t._v("doriswriter/")]),t._v(" 目录软链到 "),a("code",[t._v("DataX/doriswriter")]),t._v(" 目录。")])]),t._v(" "),a("li",[a("p",[t._v("在 "),a("code",[t._v("DataX/pom.xml")]),t._v(" 文件中添加 "),a("code",[t._v("<module>doriswriter</module>")]),t._v(" 模块。")])]),t._v(" "),a("li",[a("p",[t._v("将 "),a("code",[t._v("DataX/core/pom.xml")]),t._v(" 文件中的 httpclient 版本从 4.5 改为 4.5.13.")]),t._v(" "),a("blockquote",[a("p",[t._v("httpclient v4.5 在处理 307 转发时有bug。")])])])]),t._v(" "),a("p",[t._v("这个脚本执行后，开发者就可以进入 "),a("code",[t._v("DataX/")]),t._v(" 目录开始开发或编译了。因为做了软链，所以任何对 "),a("code",[t._v("DataX/doriswriter")]),t._v(" 目录中文件的修改，都会反映到 "),a("code",[t._v("doriswriter/")]),t._v(" 目录中，方便开发者提交代码。")])])]),t._v(" "),a("h3",{attrs:{id:"编译"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译"}},[t._v("#")]),t._v(" 编译")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("运行 "),a("code",[t._v("init_env.sh")])])]),t._v(" "),a("li",[a("p",[t._v("按需修改 "),a("code",[t._v("DataX/doriswriter")]),t._v(" 中的代码。")])]),t._v(" "),a("li",[a("p",[t._v("编译 doriswriter：")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("单独编译 doriswriter 插件:")]),t._v(" "),a("p",[a("code",[t._v("mvn clean install -pl plugin-rdbms-util,doriswriter -DskipTests")])])]),t._v(" "),a("li",[a("p",[t._v("编译整个 DataX 项目:")]),t._v(" "),a("p",[a("code",[t._v("mvn package assembly:assembly -Dmaven.test.skip=true")])]),t._v(" "),a("p",[t._v("产出在 "),a("code",[t._v("target/datax/datax/")]),t._v(".")]),t._v(" "),a("blockquote",[a("p",[t._v("hdfsreader, hdfswriter and oscarwriter 这三个插件需要额外的jar包。如果你并不需要这些插件，可以在 "),a("code",[t._v("DataX/pom.xml")]),t._v(" 中删除这些插件的模块。")])])])])]),t._v(" "),a("li",[a("p",[t._v("按需提交修改。")])])]),t._v(" "),a("h3",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),a("p",[t._v("doriswriter 插件的使用说明请参阅 "),a("a",{attrs:{href:"https://github.com/apache/incubator-doris/blob/master/extension/DataX/doriswriter/doc/doriswriter.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),a("OutboundLink")],1)])])}),[],!1,null,null,null);r.default=v.exports}}]);