(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{447:function(e,t,a){"use strict";a.r(t);var o=a(43),r=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"setting-fe-dev-env-using-eclipse"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setting-fe-dev-env-using-eclipse"}},[e._v("#")]),e._v(" Setting FE dev env using Eclipse")]),e._v(" "),a("h2",{attrs:{id:"preparation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#preparation"}},[e._v("#")]),e._v(" Preparation")]),e._v(" "),a("ul",[a("li",[e._v("JDK 1.8+")]),e._v(" "),a("li",[e._v("Maven 3.x+")]),e._v(" "),a("li",[e._v("Eclipse，with "),a("a",{attrs:{href:"http://www.eclipse.org/m2e/",target:"_blank",rel:"noopener noreferrer"}},[e._v("M2Eclipse"),a("OutboundLink")],1),e._v(" installed")])]),e._v(" "),a("h3",{attrs:{id:"code-generation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#code-generation"}},[e._v("#")]),e._v(" Code Generation")]),e._v(" "),a("p",[e._v("The FE module requires part of the generated code, such as Thrift, Protobuf and other frameworks. This part needs to be generated by compiling the contents of the "),a("code",[e._v("gensrc/")]),e._v(" directory in the Linux environment.")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Under Linux, enter the source code directory and execute the following command:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sh build.sh --clean --fe\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Then package the generated "),a("code",[e._v("gensrc/build/java")]),e._v(" directory:")]),e._v(" "),a("p",[a("code",[e._v("cd gensrc/build/ && tar czf java.tar.gz java/")])])]),e._v(" "),a("li",[a("p",[e._v("Copy "),a("code",[e._v("java.tar.gz")]),e._v(" to the "),a("code",[e._v("fe/")]),e._v(" directory of the development environment and unzip")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("cp java.tar.gz /path/to/doris/fe/\ncd /path/to/doris/fe/ && tar xzf java.tar.gz\n")])])])])]),e._v(" "),a("h2",{attrs:{id:"import-fe-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#import-fe-project"}},[e._v("#")]),e._v(" Import FE project")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("In the "),a("code",[e._v("fe/")]),e._v(" directory of the development environment, execute the following command to generate the Eclipse project file:")]),e._v(" "),a("p",[a("code",[e._v("cd /path/to/doris/fe/ && mvn -npr eclipse:eclipse -Dskip.plugin=true")])]),e._v(" "),a("p",[e._v("After the execution is completed, the "),a("code",[e._v(".project")]),e._v(" and "),a("code",[e._v(".classpath")]),e._v(" files will be generated in the "),a("code",[e._v("fe/")]),e._v(" directory.")])]),e._v(" "),a("li",[a("p",[e._v("Import FE project")]),e._v(" "),a("ul",[a("li",[e._v("Open Eclipse，choose "),a("code",[e._v("File -> Import")]),e._v(".")]),e._v(" "),a("li",[e._v("Choose "),a("code",[e._v("General -> Existing Projects into Workspace")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("Select root directory")]),e._v(" and choose "),a("code",[e._v("fe/")]),e._v(" directory，click "),a("code",[e._v("Finish")]),e._v(" to finish.")]),e._v(" "),a("li",[e._v("Right click the project, and choose "),a("code",[e._v("Build Path -> Configure Build Path")]),e._v(".")]),e._v(" "),a("li",[e._v("In the "),a("code",[e._v("Java Build Path")]),e._v(" dialog, choose the "),a("code",[e._v("Source")]),e._v(" tab, click "),a("code",[e._v("Add Folder")]),e._v(", and select the "),a("code",[e._v("java/")]),e._v(" directory that was copied and unzipped before adding.")]),e._v(" "),a("li",[e._v("Click "),a("code",[e._v("Apply and Close")]),e._v(" to finish.")])])])]),e._v(" "),a("p",[e._v("At this point, FE project import is complete. The project directory in Eclipse is roughly as follows:")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/eclipse-import-fe-project-1.png"),alt:""}}),e._v(" "),a("h2",{attrs:{id:"run-unit-test"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run-unit-test"}},[e._v("#")]),e._v(" Run Unit Test")]),e._v(" "),a("p",[e._v("Right-click on the unit test file you want to run and select "),a("code",[e._v("Run As -> JUnit Test")]),e._v(". (If you want to debug, select "),a("code",[e._v("Debug As -> JUnit Test")]),e._v(").")]),e._v(" "),a("p",[e._v("If the following error occurs:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("java.lang.Exception: Method xxxx should have no parameters\n")])])]),a("p",[e._v("Then right-click the unit test file and select "),a("code",[e._v("Run As -> Run Configurations...")]),e._v(". (If you want to debug, select "),a("code",[e._v("Debug As -> Debug Configurations...")]),e._v(").")]),e._v(" "),a("p",[e._v("Add to the "),a("code",[e._v("VM arguments")]),e._v(" in the "),a("code",[e._v("Arguments")]),e._v(" tab:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("-javaagent:${settings.localRepository}/org/jmockit/jmockit/1.48/jmockit-1.48.jar\n")])])]),a("p",[e._v("Among them, "),a("code",[e._v("${settings.localRepository}")]),e._v(" should be replaced with the path of the maven library path, such as:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("-javaagent:/Users/cmy/.m2/repository/org/jmockit/jmockit/1.48/jmockit-1.48.jar\n")])])]),a("p",[e._v("Then just run "),a("code",[e._v("Run/Debug")]),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"run-fe"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run-fe"}},[e._v("#")]),e._v(" Run FE")]),e._v(" "),a("p",[e._v("You can directly start an FE process in Ecplise to facilitate debugging the code.")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Create a runtime directory")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("mkdir /path/to/doris/fe/run/\ncd /path/to/doris/fe/run/\nmkdir conf/ log/ palo-meta/\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Create configuration file")]),e._v(" "),a("p",[e._v("Create the configuration file "),a("code",[e._v("fe.conf")]),e._v(" in the "),a("code",[e._v("conf/")]),e._v(" directory created in the first step. You can directly copy "),a("code",[e._v("conf/fe.conf")]),e._v(" in the source directory and make simple changes.")])]),e._v(" "),a("li",[a("p",[e._v("Find the "),a("code",[e._v("src/main/java/org/apache/doris/PaloFe.java")]),e._v(" file in Ecplise, right-click and select "),a("code",[e._v("Run As -> Run Configurations...")]),e._v(". Add the following environment variables to the "),a("code",[e._v("Environment")]),e._v(" tab:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("DORIS_HOME: /path/to/doris/fe/run/")])]),e._v(" "),a("li",[a("code",[e._v("PID_DIR: /path/to/doris/fe/run/")])]),e._v(" "),a("li",[a("code",[e._v("LOG_DIR: /path/to/doris/fe/run/log")])])])]),e._v(" "),a("li",[a("p",[e._v("Right-click "),a("code",[e._v("PaloFe.java")]),e._v(" and select "),a("code",[e._v("Run As -> Java Application")]),e._v(" to start FE.")])])]),e._v(" "),a("h2",{attrs:{id:"code-update"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#code-update"}},[e._v("#")]),e._v(" Code Update")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Update lexical and grammar files")]),e._v(" "),a("p",[e._v("If you modified "),a("code",[e._v("fe/src/main/cup/sql_parser.cup")]),e._v(" or "),a("code",[e._v("fe/src/main/jflex/sql_scanner.flex")]),e._v(" file. You need to execute the following commands in the "),a("code",[e._v("fe/")]),e._v(" directory:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("mvn de.jflex:maven-jflex-plugin:1.4.3:generate\nmvn net.sourceforge.czt.dev:cup-maven-plugin:1.6-cdh:generate\n")])])]),a("p",[e._v("Then refresh the project in Eclipse.")])]),e._v(" "),a("li",[a("p",[e._v("Update maven dependencies")]),e._v(" "),a("p",[e._v("If you update the dependency in "),a("code",[e._v("fe/pom.xml")]),e._v(", you need to execute the following command in the "),a("code",[e._v("fe/")]),e._v(" directory:")]),e._v(" "),a("p",[a("code",[e._v("mvn -npr eclipse:eclipse -Dskip.plugin=true")])]),e._v(" "),a("p",[e._v("Then refresh the project in Eclipse. If it cannot be updated, it is recommended to delete the project and import it again according to this document.")])])]),e._v(" "),a("h2",{attrs:{id:"imports-order"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#imports-order"}},[e._v("#")]),e._v(" Imports Order")]),e._v(" "),a("p",[e._v("In order to maintain the Imports order of Java, please perform the following operations to set the Imports Order of the project.")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Create the file "),a("code",[e._v("fe_doris.importorder")]),e._v(" and write the following:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("#Organize Import Order\n#Wed Jul 01 16:42:47 CST 2020\n4=javax\n3=java\n2=org\n1=com\n0=org.apache.doris\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Open Eclipse Preferences, select "),a("code",[e._v("Java -> Code Style -> Organize Imports")]),e._v(". Click "),a("code",[e._v("Import")]),e._v(" to import the above file.")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);