(window.webpackJsonp=window.webpackJsonp||[]).push([[615],{1004:function(e,a,_){"use strict";_.r(a);var t=_(43),s=Object(t.a)({},(function(){var e=this,a=e.$createElement,_=e._self._c||a;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("h1",{attrs:{id:"s3-load"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#s3-load"}},[e._v("#")]),e._v(" S3 Load")]),e._v(" "),_("p",[e._v("从0.14 版本开始，Doris 支持通过S3协议直接从支持S3协议的在线存储系统导入数据。")]),e._v(" "),_("p",[e._v("本文档主要介绍如何导入 AWS S3 中存储的数据。也支持导入其他支持S3协议的对象存储系统导入，如果百度云的BOS，阿里云的OSS和腾讯云的COS等、")]),e._v(" "),_("h2",{attrs:{id:"适用场景"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#适用场景"}},[e._v("#")]),e._v(" 适用场景")]),e._v(" "),_("ul",[_("li",[e._v("源数据在 支持S3协议的存储系统中，如 S3,BOS 等。")]),e._v(" "),_("li",[e._v("数据量在 几十到百GB 级别。")])]),e._v(" "),_("h2",{attrs:{id:"准备工作"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[e._v("#")]),e._v(" 准备工作")]),e._v(" "),_("ol",[_("li",[e._v("准本AK 和 SK\n首先需要找到或者重新生成 AWS "),_("code",[e._v("Access keys")]),e._v("，可以在AWS console 的 "),_("code",[e._v("My Security Credentials")]),e._v(" 找到生成方式， 如下图所示：\n"),_("a",{attrs:{href:"/images/aws_ak_sk.png"}},[e._v("AK_SK")]),e._v("\n选择 "),_("code",[e._v("Create New Access Key")]),e._v(" 注意保存生成 AK和SK.")]),e._v(" "),_("li",[e._v("准备 REGION 和 ENDPOINT\nREGION 可以在创建桶的时候选择也可以在桶列表中查看到。ENDPOINT 可以通过如下页面通过REGION查到 "),_("a",{attrs:{href:"https://docs.aws.amazon.com/general/latest/gr/s3.html#s3_region",target:"_blank",rel:"noopener noreferrer"}},[e._v("AWS 文档"),_("OutboundLink")],1)])]),e._v(" "),_("p",[e._v("其他云存储系统可以相应的文档找到与S3兼容的相关信息")]),e._v(" "),_("h2",{attrs:{id:"开始导入"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#开始导入"}},[e._v("#")]),e._v(" 开始导入")]),e._v(" "),_("p",[e._v("导入方式和Broker Load 基本相同，只需要将 "),_("code",[e._v("WITH BROKER broker_name ()")]),e._v(" 语句替换成如下部分")]),e._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v('    WITH S3\n (\n        "AWS_ENDPOINT" = "AWS_ENDPOINT",\n        "AWS_ACCESS_KEY" = "AWS_ACCESS_KEY",\n        "AWS_SECRET_KEY"="AWS_SECRET_KEY",\n        "AWS_REGION" = "AWS_REGION"\n  )\n')])])]),_("p",[e._v("完整示例如下")]),e._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v('    LOAD LABEL example_db.exmpale_label_1\n    (\n        DATA INFILE("s3://your_bucket_name/your_file.txt")\n        INTO TABLE load_test\n        COLUMNS TERMINATED BY ","\n    )\n    WITH S3\n    (\n        "AWS_ENDPOINT" = "AWS_ENDPOINT",\n        "AWS_ACCESS_KEY" = "AWS_ACCESS_KEY",\n        "AWS_SECRET_KEY"="AWS_SECRET_KEY",\n        "AWS_REGION" = "AWS_REGION"\n    )\n    PROPERTIES\n    (\n        "timeout" = "3600"\n    );\n')])])])])}),[],!1,null,null,null);a.default=s.exports}}]);