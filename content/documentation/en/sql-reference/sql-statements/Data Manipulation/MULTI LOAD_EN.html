

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>MULTI LOAD &mdash; Doris Documentations 0.11.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="PAUSE ROUTINE LOAD" href="PAUSE ROUTINE LOAD_EN.html" />
    <link rel="prev" title="MINI LOAD" href="MINI LOAD_EN.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> Doris Documentations
          

          
          </a>

          
            
            
              <div class="version">
                0.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../cn/index.html">中文</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">English</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../downloads/index.html">Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installing/index.html">Compilation and Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../administrator-guide/index.html">Administrator Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../extending-doris/index.html">Extending Ability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../internal/index.html">Design Documents</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">SQL Manual</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../sql-functions/index.html">SQL Functions</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">DDL Statements</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../Account Management/index.html">Account Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Administration/index.html">Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Data Definition/index.html">Data Definition</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">Data Manipulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Data Types/index.html">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Utility/index.html">Utility</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer-guide/index.html">Developer Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../community/index.html">Apache Commnity</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Doris Documentations</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">English</a> &raquo;</li>
        
          <li><a href="../../index.html">SQL Manual</a> &raquo;</li>
        
          <li><a href="../index.html">DDL Statements</a> &raquo;</li>
        
          <li><a href="index.html">Data Manipulation</a> &raquo;</li>
        
      <li>MULTI LOAD</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/apache/incubator-doris/blob/master/docs/documentation/en/sql-reference/sql-statements/Data Manipulation/MULTI LOAD_EN.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <!-- 
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
--><div class="section" id="multi-load">
<h1>MULTI LOAD<a class="headerlink" href="#multi-load" title="Permalink to this headline">¶</a></h1>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Syntax:
curl –location-trusted -u user:passwd -XPOST http://host:port/api/{db}/_multi_start?label=xxx
curl –location-trusted -u user:passwd -T data.file http://host:port/api/{db}/{table1}/_load?label=xxx&amp;sub_label=yyy
curl –location-trusted -u user:passwd -T data.file http://host:port/api/{db}/{table2}/_load?label=xxx&amp;sub_label=zzz
curl –location-trusted -u user:passwd -XPOST http://host:port/api/{db}/_multi_commit?label=xxx
curl –location-trusted -u user:passwd -XPOST http://host:port/api/{db}/_multi_desc?label=xxx</p>
<p>‘MULTI LOAD’can support users to import multiple tables at the same time on the basis of’MINI LOAD’. The specific commands are shown above.
‘/api/{db}/_multi_start’starts a multi-table import task
‘/api/{db}/{table}/_load’adds a table to be imported to an import task. The main difference from’MINI LOAD’ is that the’sub_label’parameter needs to be passed in.
‘/api/{db}/_multi_commit’submits the entire multi-table import task and the background begins processing
‘/api/{db}/_multi_abort’Abandons a multi-table import task
‘/api/{db}/_multi_desc’shows the number of jobs submitted by a multi-table import task</p>
<p>HTTP Protocol Specification
Privilege Authentication Currently Doris uses the Basic mode of HTTP for privilege authentication. So you need to specify a username and password when importing
This way is to pass passwords in plaintext, since we are all in the Intranet environment at present…</p>
<p>Expect Doris needs to send an HTTP request, and needs the’Expect’header information with the content of’100-continue’.
Why? Because we need to redirect the request, we have to transfer the data content before.
This can avoid causing multiple data transmission, thereby improving efficiency.</p>
<p>Content-Length Doris needs to send a request with the header’Content-Length’. If the content ratio is sent
If’Content-Length’is less, Palo believes that if there is a transmission problem, the submission of the task fails.
NOTE: If you send more data than’Content-Length’, Doris reads only’Content-Length’.
Length content and import</p>
<p>Description of parameters:
User: User is user_name if the user is in default_cluster. Otherwise, it is user_name&#64;cluster_name.</p>
<p>Label: Used to specify the label number imported in this batch for later job status queries, etc.
This parameter must be passed in.</p>
<p>Sub_label: Used to specify a subversion number within a multi-table import task. For multi-table imported loads, this parameter must be passed in.</p>
<p>Columns: Used to describe the corresponding column name in the import file.
If it is not passed in, the column order in the file is considered to be the same as the order in which the table is built.
The specified method is comma-separated, such as columns = k1, k2, k3, K4</p>
<p>Column_separator: Used to specify the separator between columns, default is’ t’
NOTE: Url encoding is required, such as specifying’t’as a delimiter.
Then you should pass in’column_separator=% 09’</p>
<p>Max_filter_ratio: Used to specify the maximum percentage allowed to filter irregular data, default is 0, not allowed to filter
Custom specification should be as follows:’max_filter_ratio = 0.2’, meaning that 20% error rate is allowed.
Pass in effect at’_multi_start’</p>
<p>NOTE:</p>
<ol class="simple">
<li>This method of importing is currently completed on a single machine, so it is not suitable to import a large amount of data.
It is recommended that the amount of data imported should not exceed 1GB</li>
<li>Currently, it is not possible to submit multiple files in the form of <code class="docutils literal notranslate"><span class="pre">curl-T',</span> </code>{file1, file2}’, because curl splits them into multiple files.
Request sent, multiple requests can not share a label number, so it can not be used</li>
<li>Supports streaming-like ways to use curl to import data into Doris, but Doris will have to wait until the streaming is over
Real import behavior will occur, and the amount of data in this way can not be too large.</li>
</ol>
<p>‘35;’35; example</p>
<ol class="simple">
<li>Import the data from the local file’testData1’into the table of’testTbl1’ in the database’testDb’, and
Import the data from’testData2’into the table’testTbl2’ in’testDb’(the user is in defalut_cluster)
curl –location-trusted -u root -XPOST http://host:port/api/testDb/_multi_start?label=123
curl –location-trusted -u root -T testData1 http://host:port/api/testDb/testTbl1/_load?label=123&amp;sub_label=1
curl –location-trusted -u root -T testData2 http://host:port/api/testDb/testTbl2/_load?label=123&amp;sub_label=2
curl –location-trusted -u root -XPOST http://host:port/api/testDb/_multi_commit?label=123</li>
<li>Multi-table Import Midway Abandon (User in defalut_cluster)
curl –location-trusted -u root -XPOST http://host:port/api/testDb/_multi_start?label=123
curl –location-trusted -u root -T testData1 http://host:port/api/testDb/testTbl1/_load?label=123&amp;sub_label=1
curl –location-trusted -u root -XPOST http://host:port/api/testDb/_multi_abort?label=123</li>
<li>Multi-table import to see how much content has been submitted (user is in defalut_cluster)
curl –location-trusted -u root -XPOST http://host:port/api/testDb/_multi_start?label=123
curl –location-trusted -u root -T testData1 http://host:port/api/testDb/testTbl1/_load?label=123&amp;sub_label=1
curl –location-trusted -u root -XPOST http://host:port/api/testDb/_multi_desc?label=123</li>
</ol>
</div>
<div class="section" id="keyword">
<h2>keyword<a class="headerlink" href="#keyword" title="Permalink to this headline">¶</a></h2>
<p>MULTI, MINI, LOAD</p>
</div>
</div>


           </div>
           
          </div>
          <!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="PAUSE ROUTINE LOAD_EN.html" class="btn btn-neutral float-right" title="PAUSE ROUTINE LOAD" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="MINI LOAD_EN.html" class="btn btn-neutral float-left" title="MINI LOAD" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Apache Doris(Incubating)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
<div role="contentinfo">
    <p></p>
    <p>

        Apache Doris(incubating) is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.

    </p>
</div>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>