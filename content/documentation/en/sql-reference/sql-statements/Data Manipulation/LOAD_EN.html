

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>LOAD &mdash; Doris Documentations 0.11.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="MINI LOAD" href="MINI LOAD_EN.html" />
    <link rel="prev" title="GROUP BY" href="GROUP BY_EN.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> Doris Documentations
          

          
          </a>

          
            
            
              <div class="version">
                0.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../cn/index.html">中文</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">English</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../downloads/index.html">Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installing/index.html">Compilation and Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../administrator-guide/index.html">Administrator Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../extending-doris/index.html">Extending Ability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../internal/index.html">Design Documents</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">SQL Manual</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../sql-functions/index.html">SQL Functions</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">DDL Statements</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../Account Management/index.html">Account Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Administration/index.html">Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Data Definition/index.html">Data Definition</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">Data Manipulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Data Types/index.html">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Utility/index.html">Utility</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer-guide/index.html">Developer Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../community/index.html">Apache Commnity</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Doris Documentations</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">English</a> &raquo;</li>
        
          <li><a href="../../index.html">SQL Manual</a> &raquo;</li>
        
          <li><a href="../index.html">DDL Statements</a> &raquo;</li>
        
          <li><a href="index.html">Data Manipulation</a> &raquo;</li>
        
      <li>LOAD</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/apache/incubator-doris/blob/master/docs/documentation/en/sql-reference/sql-statements/Data Manipulation/LOAD_EN.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <!-- 
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
--><div class="section" id="load">
<h1>LOAD<a class="headerlink" href="#load" title="Permalink to this headline">¶</a></h1>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Palo currently supports the following four import methods:</p>
<ol class="simple">
<li>Hadoop Load: Importing ETL based on MR.</li>
<li>Broker Load: Use broker to import data.</li>
<li>Mini Load: Upload files through HTTP protocol for batch data import.</li>
<li>Stream Load: Stream data import through HTTP protocol.</li>
</ol>
<p>This help mainly describes the first import method, namely Hadoop Load related help information. The rest of the import methods can use the following commands to view help:</p>
<p>This import method may not be supported in a subsequent version. It is recommended that other import methods be used for data import. !!!</p>
<ol class="simple">
<li>help broker load;</li>
<li>help mini load;</li>
<li>help stream load;</li>
</ol>
<p>Hadoop Load is only applicable to Baidu’s internal environment. Public, private and open source environments cannot use this import approach.
The import method must set up a Hadoop computing queue for ETL, which can be viewed through the help set property command.</p>
<p>Stream load only supports Baidu internal users for the time being. Open source communities and public cloud users will be supported in subsequent version updates.</p>
<p>Grammar:</p>
<p>LOAD LABEL load_label
(
Date of date of date of entry
)
[opt_properties];</p>
<ol class="simple">
<li>load label</li>
</ol>
<p>The label of the current imported batch. Unique in a database.
Grammar:
[database_name.]your_label</p>
<ol class="simple">
<li>data_desc</li>
</ol>
<p>Used to describe a batch of imported data.
Grammar:
DATA INFILE
(
“file_path1”[, file_path2, …]
)
[NEGATIVE]
INTO TABLE <code class="docutils literal notranslate"><span class="pre">table_name</span></code>
[PARTITION (p1, P2)]
[COLUMNS TERMINATED BY “column_separator”]
[FORMAT AS “file_type”]
[(column_list)]
[set (k1 = fun (k2)]]</p>
<p>Explain:
file_path:</p>
<p>File paths can be specified to a file, or * wildcards can be used to specify all files in a directory. Wildcards must match to files, not directories.</p>
<p>PARTICIPATION:</p>
<p>If this parameter is specified, only the specified partition will be imported, and data outside the imported partition will be filtered out.
If not specified, all partitions of the table are imported by default.</p>
<p>NEGATIVE：
If this parameter is specified, it is equivalent to importing a batch of “negative” data. Used to offset the same batch of data imported before.
This parameter applies only to the case where there are value columns and the aggregation type of value columns is SUM only.</p>
<p>Column U separator:</p>
<p>Used to specify the column separator in the import file. Default tot
If the character is invisible, it needs to be prefixed with \x, using hexadecimal to represent the separator.
For example, the separator X01 of the hive file is specified as “\ x01”</p>
<p>File type:</p>
<p>Used to specify the type of imported file, such as parquet, orc, csv. The default value is determined by the file suffix name.</p>
<p>column_list：</p>
<p>Used to specify the correspondence between columns in the import file and columns in the table.
When you need to skip a column in the import file, specify it as a column name that does not exist in the table.
Grammar:
(col_name1, col_name2, …)</p>
<p>SET:</p>
<p>If this parameter is specified, a column of the source file can be transformed according to a function, and then the transformed result can be imported into the table.
The functions currently supported are:</p>
<p>Strftime (fmt, column) date conversion function
Fmt: Date format, such as% Y% m% d% H% M% S (year, month, day, hour, second)
Column: Column in column_list, which is the column in the input file. Storage content should be a digital timestamp.
If there is no column_list, the columns of the input file are entered by default in the column order of the Palo table.</p>
<p>time_format(output_fmt, input_fmt, column) 日期格式转化
Output_fmt: Converted date format, such as% Y% m% d% H% M% S (year, month, day, hour, second)
Input_fmt: The date format of the column before transformation, such as% Y% m% d% H% M% S (days, hours, seconds, months, years)
Column: Column in column_list, which is the column in the input file. Storage content should be a date string in input_fmt format.
If there is no column_list, the columns of the input file are entered by default in the column order of the Palo table.</p>
<p>alignment_timestamp(precision, column) 将时间戳对齐到指定精度
Precision: year 124month;124day;124hour;
Column: Column in column_list, which is the column in the input file. Storage content should be a digital timestamp.
If there is no column_list, the columns of the input file are entered by default in the column order of the Palo table.
Note: When the alignment accuracy is year and month, only the time stamps in the range of 20050101-20191231 are supported.</p>
<p>Default_value (value) sets the default value for a column import
Use default values of columns when creating tables without specifying</p>
<p>Md5sum (column1, column2,…) evaluates the value of the specified imported column to md5sum, returning a 32-bit hexadecimal string</p>
<p>Replace_value (old_value [, new_value]) replaces old_value specified in the import file with new_value
New_value, if not specified, uses the default value of the column when building the table</p>
<p>Hll_hash (column) is used to transform a column in a table or data into a data structure of a HLL column</p>
<ol class="simple">
<li>opt_properties</li>
</ol>
<p>Used to specify some special parameters.
Grammar:
[PROPERTIES (“key”=”value”, …)]</p>
<p>The following parameters can be specified:
Cluster: Import the Hadoop computed queue used.
Timeout: Specifies the timeout time of the import operation. The default timeout is 3 days. Unit seconds.
Max_filter_ratio: The ratio of data that is most tolerant of being filterable (for reasons such as data irregularities). Default zero tolerance.
Load_delete_flag: Specifies whether the import deletes data by importing the key column, which applies only to UNIQUE KEY.
Value column is not specified when importing. The default is false.</p>
<ol class="simple">
<li>Import data format sample</li>
</ol>
<p>Integer classes (TINYINT/SMALLINT/INT/BIGINT/LARGEINT): 1,1000,1234
Floating Point Class (FLOAT/DOUBLE/DECIMAL): 1.1, 0.23, 356
Date class (DATE/DATETIME): 2017-10-03, 2017-06-13 12:34:03.
(Note: If it’s in other date formats, you can use strftime or time_format functions to convert in the import command)
字符串类（CHAR/VARCHAR）：”I am a student”, “a”
NULL value: N</p>
<p>‘35;’35; example</p>
<ol class="simple">
<li>Import a batch of data, specify timeout time and filtering ratio. Specify the import queue as my_cluster.</li>
</ol>
<p>LOAD LABEL example db.label1
(
DATA INFILE(“hdfs://hdfs_host:hdfs_port/user/palo/data/input/file”)
INTO TABLE <code class="docutils literal notranslate"><span class="pre">my_table</span></code>
)
PROPERTIES
(
“cluster” =”my” cluster,
Timeout =”3600”,
“max_filter_ratio” = “0.1”
);</p>
<p>Where hdfs_host is the host of the namenode and hdfs_port is the fs.defaultFS port (default 9000)</p>
<ol class="simple">
<li>Import a batch of data, including multiple files. Import different tables, specify separators, and specify column correspondences</li>
</ol>
<p>LOAD LABEL example db.label2
(
DATA INFILE(“hdfs://hdfs_host:hdfs_port/user/palo/data/input/file1”)
INTO TABLE <code class="docutils literal notranslate"><span class="pre">my_table_1</span></code>
COLUMNS TERMINATED BY “,”
(k1, k3, k2, v1, v2),
DATA INFILE(“hdfs://hdfs_host:hdfs_port/user/palo/data/input/file2”)
INTO TABLE <code class="docutils literal notranslate"><span class="pre">my_table_2</span></code>
COLUMNS TERMINATED BY “\t”
(k1, k2, k3, v2, v1)
);</p>
<ol class="simple">
<li>Import a batch of data, specify hive’s default delimiter x01, and use wildcard * to specify all files in the directory</li>
</ol>
<p>LOAD LABEL example db.label3
(
DATA INFILE(“hdfs://hdfs_host:hdfs_port/user/palo/data/input/*”)
NEGATIVE
INTO TABLE <code class="docutils literal notranslate"><span class="pre">my_table</span></code>
COLUMNS TERMINATED BY “\x01”
);</p>
<ol class="simple">
<li>Import a batch of “negative” data</li>
</ol>
<p>LOAD LABEL example db.label4
(
DATA INFILE(“hdfs://hdfs_host:hdfs_port/user/palo/data/input/old_file)
NEGATIVE
INTO TABLE <code class="docutils literal notranslate"><span class="pre">my_table</span></code>
COLUMNS TERMINATED BY “\t”
);</p>
<ol class="simple">
<li>Import a batch of data and specify partitions</li>
</ol>
<p>LOAD LABEL example db.label5
(
DATA INFILE(“hdfs://hdfs_host:hdfs_port/user/palo/data/input/file”)
INTO TABLE <code class="docutils literal notranslate"><span class="pre">my_table</span></code>
PARTITION (p1, P2)
COLUMNS TERMINATED BY “,”
(k1, k3, k2, v1, v2)
);</p>
<ol class="simple">
<li>Import a batch of data, specify partitions, and make some transformations to the columns of the imported files, as follows:
The table structure is as follows:
K1 date
date
k3 bigint
k4 varchar (20)
k5 varchar (64)
k6 int</li>
</ol>
<p>Assume that the data file has only one row of data, five columns, and comma-separated:</p>
<p>1537002087,2018-08-09 11:12:13,1537002087,-,1</p>
<p>The columns in the data file correspond to the columns specified in the import statement:
tmp -u k1, tmp -u k2, tmp u k3, k6, v1</p>
<p>The conversion is as follows:</p>
<ol class="simple">
<li>k1: Transform tmp_k1 timestamp column into datetime type data</li>
<li>k2: Converting tmp_k2 datetime-type data into date data</li>
<li>k3: Transform tmp_k3 timestamp column into day-level timestamp</li>
<li>k4: Specify import default value of 1</li>
<li>k5: Calculate MD5 values from tmp_k1, tmp_k2, tmp_k3 columns</li>
<li>k6: Replace the - value in the imported file with 10</li>
</ol>
<p>LOAD LABEL example db.label6
(
DATA INFILE(“hdfs://hdfs_host:hdfs_port/user/palo/data/input/file”)
INTO TABLE <code class="docutils literal notranslate"><span class="pre">my_table</span></code>
PARTITION (p1, P2)
COLUMNS TERMINATED BY “,”
(tmp /u k1, tmp /u k2, tmp /u k3, k6, v1)
SET (
K1 = strftime (%Y -%m -%d%H:%M:%S “, TMP u K1),
K2 = Time = UFormat (“% Y-% M-% D% H:% M:% S”, “% Y-% M-% D”, “TMP = UK2),
k3 = alignment_timestamp(“day”, tmp_k3),
k4 = default_value(“1”),
K5 = MD5Sum (TMP = UK1, TMP = UK2, TMP = UK3)
k6 = replace value (“-“, “10”)
)
);</p>
<ol class="simple">
<li>Import data into tables containing HLL columns, which can be columns in tables or columns in data</li>
</ol>
<p>LOAD LABEL example db.label7
(
DATA INFILE(“hdfs://hdfs_host:hdfs_port/user/palo/data/input/file”)
INTO TABLE <code class="docutils literal notranslate"><span class="pre">my_table</span></code>
PARTITION (p1, P2)
COLUMNS TERMINATED BY “,”
SET (
v1 = hll, u hash (k1),
v2 = hll, u hash (k2)
)
);</p>
</div>
<div class="section" id="keyword">
<h2>keyword<a class="headerlink" href="#keyword" title="Permalink to this headline">¶</a></h2>
<p>LOAD</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="MINI LOAD_EN.html" class="btn btn-neutral float-right" title="MINI LOAD" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="GROUP BY_EN.html" class="btn btn-neutral float-left" title="GROUP BY" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Apache Doris(Incubating)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
<div role="contentinfo">
    <p></p>
    <p>

        Apache Doris(incubating) is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.

    </p>
</div>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>