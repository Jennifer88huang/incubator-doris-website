

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ALTER TABLE &mdash; Doris Documentations 0.11.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="ALTER VIEW" href="ALTER VIEW_EN.html" />
    <link rel="prev" title="ALTER DATABASE" href="ALTER DATABASE_EN.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> Doris Documentations
          

          
          </a>

          
            
            
              <div class="version">
                0.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../cn/index.html">中文</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">English</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../downloads/index.html">Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installing/index.html">Compilation and Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../administrator-guide/index.html">Administrator Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../extending-doris/index.html">Extending Ability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../internal/index.html">Design Documents</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">SQL Manual</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../sql-functions/index.html">SQL Functions</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">DDL Statements</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../Account Management/index.html">Account Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Administration/index.html">Administration</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">Data Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Data Manipulation/index.html">Data Manipulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Data Types/index.html">Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Utility/index.html">Utility</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer-guide/index.html">Developer Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../community/index.html">Apache Commnity</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Doris Documentations</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">English</a> &raquo;</li>
        
          <li><a href="../../index.html">SQL Manual</a> &raquo;</li>
        
          <li><a href="../index.html">DDL Statements</a> &raquo;</li>
        
          <li><a href="index.html">Data Definition</a> &raquo;</li>
        
      <li>ALTER TABLE</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/apache/incubator-doris/blob/master/docs/documentation/en/sql-reference/sql-statements/Data Definition/ALTER TABLE_EN.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <!-- 
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
--><div class="section" id="alter-table">
<h1>ALTER TABLE<a class="headerlink" href="#alter-table" title="Permalink to this headline">¶</a></h1>
<div class="section" id="description">
<h2>description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>This statement is used to modify an existing table. If no rollup index is specified, the base operation is the default.
The statement is divided into three types of operations: schema change, rollup, partition
These three types of operations cannot appear in an ALTER TABLE statement at the same time.
Where schema change and rollup are asynchronous operations and are returned if the task commits successfully. You can then use the SHOW ALTER command to view the progress.
Partition is a synchronous operation, and a command return indicates that execution is complete.

grammar:
    ALTER TABLE [database.]table
    Alter_clause1[, alter_clause2, ...];

The alter_clause is divided into partition, rollup, schema change, rename and bimmap index.

Partition supports the following modifications
Increase the partition
    grammar:
        ADD PARTITION [IF NOT EXISTS] partition_name
        Partition_desc [&quot;key&quot;=&quot;value&quot;]
        [DISTRIBUTED BY HASH (k1[,k2 ...]) [BUCKETS num]]
    note:
        1) partition_desc supports two ways of writing:
            * VALUES LESS THAN [MAXVALUE|(&quot;value1&quot;, ...)]
            * VALUES [(&quot;value1&quot;, ...), (&quot;value1&quot;, ...))
        1) The partition is the left closed right open interval. If the user only specifies the right boundary, the system will automatically determine the left boundary.
        2) If the bucket mode is not specified, the bucket method used by the built-in table is automatically used.
        3) If the bucket mode is specified, only the bucket number can be modified, and the bucket mode or bucket column cannot be modified.
        4) [&quot;key&quot;=&quot;value&quot;] section can set some properties of the partition, see CREATE TABLE for details.

2. Delete the partition
    grammar:
        DROP PARTITION [IF EXISTS] partition_name
    note:
        1) Use a partitioned table to keep at least one partition.
        2) Execute DROP PARTITION For a period of time, the deleted partition can be recovered by the RECOVER statement. See the RECOVER statement for details.
        
3. Modify the partition properties
    grammar:
        MODIFY PARTITION partition_name SET (&quot;key&quot; = &quot;value&quot;, ...)
    Description:
        1) The following attributes of the modified partition are currently supported.
            - storage_medium
            - storage_cooldown_time
            - replication_num 
            — in_memory
        2) For single-partition tables, partition_name is the same as the table name.
    
Rollup supports the following ways to create:
1. Create a rollup index
    grammar:
        ADD ROLLUP rollup_name (column_name1, column_name2, ...)
        [FROM from_index_name]
        [PROPERTIES (&quot;key&quot;=&quot;value&quot;, ...)]
    example:
        ADD ROLLUP r1(col1,col2) from r0
1.2 Batch create rollup index
    grammar:
        ADD ROLLUP [rollup_name (column_name1, column_name2, ...)
                                [FROM from_index_name]
                                [PROPERTIES (&quot;key&quot;=&quot;value&quot;, ...)],...]
    example：
        ADD ROLLUP r1(col1,col2) from r0, r2(col3,col4) from r0
1.3 note:
        1) If from_index_name is not specified, it is created by default from base index
        2) The columns in the rollup table must be existing columns in from_index
        3) In properties, you can specify the storage format. See CREATE TABLE for details.
        
2. Delete the rollup index
    grammar:
        DROP ROLLUP rollup_name
        [PROPERTIES (&quot;key&quot;=&quot;value&quot;, ...)]
    example:
       DROP ROLLUP r1
2.1 Batch Delete rollup index
    grammar：DROP ROLLUP [rollup_name [PROPERTIES (&quot;key&quot;=&quot;value&quot;, ...)],...]
    example：DROP ROLLUP r1,r2
2.2 note:
        1) Cannot delete base index
        2) Execute DROP ROLLUP For a period of time, the deleted rollup index can be restored by the RECOVER statement. See the RECOVER statement for details.

        
Schema change supports the following modifications:
1. Add a column to the specified location of the specified index
    grammar:
        ADD COLUMN column_name column_type [KEY | agg_type] [DEFAULT &quot;default_value&quot;]
        [AFTER column_name|FIRST]
        [TO rollup_index_name]
        [PROPERTIES (&quot;key&quot;=&quot;value&quot;, ...)]
    note:
        1) Aggregate model If you add a value column, you need to specify agg_type
        2) Non-aggregate models (such as DUPLICATE KEY) If you add a key column, you need to specify the KEY keyword.
        3) You cannot add a column that already exists in the base index to the rollup index
            Recreate a rollup index if needed
        
2. Add multiple columns to the specified index
    grammar:
        ADD COLUMN (column_name1 column_type [KEY | agg_type] DEFAULT &quot;default_value&quot;, ...)
        [TO rollup_index_name]
        [PROPERTIES (&quot;key&quot;=&quot;value&quot;, ...)]
    note:
        1) Aggregate model If you add a value column, you need to specify agg_type
        2) Non-aggregate model If you add a key column, you need to specify the KEY keyword.
        3) You cannot add a column that already exists in the base index to the rollup index
        (You can recreate a rollup index if needed)

3. Remove a column from the specified index
    grammar:
        DROP COLUMN column_name
        [FROM rollup_index_name]
    note:
        1) Cannot delete partition column
        2) If the column is removed from the base index, it will also be deleted if the column is included in the rollup index
    
4. Modify the column type and column position of the specified index
    grammar:
        MODIFY COLUMN column_name column_type [KEY | agg_type] [NULL | NOT NULL] [DEFAULT &quot;default_value&quot;]
        [AFTER column_name|FIRST]
        [FROM rollup_index_name]
        [PROPERTIES (&quot;key&quot;=&quot;value&quot;, ...)]
    note:
        1) Aggregate model If you modify the value column, you need to specify agg_type
        2) Non-aggregate type If you modify the key column, you need to specify the KEY keyword.
        3) Only the type of the column can be modified. The other attributes of the column remain as they are (ie other attributes need to be explicitly written in the statement according to the original attribute, see example 8)
        4) The partition column cannot be modified
        5) The following types of conversions are currently supported (accuracy loss is guaranteed by the user)
            TINYINT/SMALLINT/INT/BIGINT is converted to TINYINT/SMALLINT/INT/BIGINT/DOUBLE.
            TINTINT/SMALLINT/INT/BIGINT/LARGEINT/FLOAT/DOUBLE/DECIMAL is converted to VARCHAR
            Convert LARGEINT to DOUBLE
            VARCHAR supports modification of maximum length
            Convert VARCHAR to TINYINT/SMALLINT/INT/BIGINT/LARGEINT/FLOAT/DOUBLE.
            Convert VARCHAR to DATE (currently support six formats: &quot;%Y-%m-%d&quot;, &quot;%y-%m-%d&quot;, &quot;%Y%m%d&quot;, &quot;%y%m%d&quot;, &quot;%Y/%m/%d, &quot;%y/%m/%d&quot;)
            Convert DATETIME to DATE(Only year-month-day information is retained, For example: `2019-12-09 21:47:05` &lt;--&gt; `2019-12-09`)
            Convert DATE to DATETIME(Set hour, minute, second to zero, For example: `2019-12-09` &lt;--&gt; `2019-12-09 00:00:00`)
            Convert FLOAT to DOUBLE
            Convert INT to DATE (If the INT data fails to convert, the original data remains the same)
        6) Does not support changing from NULL to NOT NULL
            
5. Reorder the columns of the specified index
    grammar:
        ORDER BY (column_name1, column_name2, ...)
        [FROM rollup_index_name]
        [PROPERTIES (&quot;key&quot;=&quot;value&quot;, ...)]
    note:
        1) All columns in index must be written
        2) value is listed after the key column
        
6. Modify the properties of the table, currently supports modifying the bloom filter column, the colocate_with attribute and the dynamic_partition attribute.
    grammar:
        PROPERTIES (&quot;key&quot;=&quot;value&quot;)
    note:
        Can also be merged into the above schema change operation to modify, see the example below
 

Rename supports modification of the following names:
1. Modify the table name
    grammar:
        RENAME new_table_name;
        
2. Modify the rollup index name
    grammar:
        RENAME ROLLUP old_rollup_name new_rollup_name;
        
3. Modify the partition name
    grammar:
        RENAME PARTITION old_partition_name new_partition_name;

Bitmap index supports the following modifications:
1. create bitmap index
    grammar:
        ADD INDEX index_name (column [, ...],) [USING BITMAP] [COMMENT &#39;balabala&#39;];
    note:
        1. only supports bitmap index for current version
        2. BITMAP index only supports apply on single column
2. drop index
    grammar:
        DROP INDEX index_name；
</pre></div>
</div>
</div>
<div class="section" id="example">
<h2>example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">partition</span><span class="p">]</span>
<span class="mf">1.</span> <span class="n">Add</span> <span class="n">partition</span><span class="p">,</span> <span class="n">existing</span> <span class="n">partition</span> <span class="p">[</span><span class="n">MIN</span><span class="p">,</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="p">),</span> <span class="n">add</span> <span class="n">partition</span> <span class="p">[</span><span class="mi">2013</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="p">,</span> <span class="mi">2014</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="p">),</span> <span class="n">use</span> <span class="n">default</span> <span class="n">bucket</span> <span class="n">mode</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">ADD</span> <span class="n">PARTITION</span> <span class="n">p1</span> <span class="n">VALUES</span> <span class="n">LESS</span> <span class="n">THAN</span> <span class="p">(</span><span class="s2">&quot;2014-01-01&quot;</span><span class="p">);</span>

<span class="mf">2.</span> <span class="n">Increase</span> <span class="n">the</span> <span class="n">partition</span> <span class="ow">and</span> <span class="n">use</span> <span class="n">the</span> <span class="n">new</span> <span class="n">number</span> <span class="n">of</span> <span class="n">buckets</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">ADD</span> <span class="n">PARTITION</span> <span class="n">p1</span> <span class="n">VALUES</span> <span class="n">LESS</span> <span class="n">THAN</span> <span class="p">(</span><span class="s2">&quot;2015-01-01&quot;</span><span class="p">)</span>
    <span class="n">DISTRIBUTED</span> <span class="n">BY</span> <span class="n">HASH</span><span class="p">(</span><span class="n">k1</span><span class="p">)</span> <span class="n">BUCKETS</span> <span class="mi">20</span><span class="p">;</span>

<span class="mf">3.</span> <span class="n">Increase</span> <span class="n">the</span> <span class="n">partition</span> <span class="ow">and</span> <span class="n">use</span> <span class="n">the</span> <span class="n">new</span> <span class="n">number</span> <span class="n">of</span> <span class="n">copies</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">ADD</span> <span class="n">PARTITION</span> <span class="n">p1</span> <span class="n">VALUES</span> <span class="n">LESS</span> <span class="n">THAN</span> <span class="p">(</span><span class="s2">&quot;2015-01-01&quot;</span><span class="p">)</span>
    <span class="p">(</span><span class="s2">&quot;replication_num&quot;</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">);</span>

<span class="mf">4.</span> <span class="n">Modify</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">partition</span> <span class="n">copies</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">MODIFY</span> <span class="n">PARTITION</span> <span class="n">p1</span> <span class="n">SET</span><span class="p">(</span><span class="s2">&quot;replication_num&quot;</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">);</span>

<span class="mf">5.</span> <span class="n">Delete</span> <span class="n">the</span> <span class="n">partition</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">DROP</span> <span class="n">PARTITION</span> <span class="n">p1</span><span class="p">;</span>
    
<span class="mf">6.</span> <span class="n">Add</span> <span class="n">a</span> <span class="n">partition</span> <span class="n">that</span> <span class="n">specifies</span> <span class="n">the</span> <span class="n">upper</span> <span class="ow">and</span> <span class="n">lower</span> <span class="n">bounds</span>

    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">ADD</span> <span class="n">PARTITION</span> <span class="n">p1</span> <span class="n">VALUES</span> <span class="p">[(</span><span class="s2">&quot;2014-01-01&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;2014-02-01&quot;</span><span class="p">));</span>

<span class="p">[</span><span class="n">rollup</span><span class="p">]</span>
<span class="mf">1.</span> <span class="n">Create</span> <span class="n">index</span><span class="p">:</span> <span class="n">example_rollup_index</span><span class="p">,</span> <span class="n">based</span> <span class="n">on</span> <span class="n">base</span> <span class="n">index</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span><span class="n">k2</span><span class="p">,</span><span class="n">k3</span><span class="p">,</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">)</span><span class="o">.</span> <span class="n">Columnar</span> <span class="n">storage</span><span class="o">.</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">ADD</span> <span class="n">ROLLUP</span> <span class="n">example_rollup_index</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span> <span class="n">k3</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">)</span>
    <span class="n">PROPERTIES</span><span class="p">(</span><span class="s2">&quot;storage_type&quot;</span><span class="o">=</span><span class="s2">&quot;column&quot;</span><span class="p">);</span>
    
<span class="mf">2.</span> <span class="n">Create</span> <span class="n">index</span><span class="p">:</span> <span class="n">example_rollup_index2</span><span class="p">,</span> <span class="n">based</span> <span class="n">on</span> <span class="n">example_rollup_index</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span><span class="n">k3</span><span class="p">,</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">)</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">ADD</span> <span class="n">ROLLUP</span> <span class="n">example_rollup_index2</span> <span class="p">(</span><span class="n">k1</span><span class="p">,</span> <span class="n">v1</span><span class="p">)</span>
    <span class="n">FROM</span> <span class="n">example_rollup_index</span><span class="p">;</span>

<span class="mf">3.</span> <span class="n">Delete</span> <span class="n">index</span><span class="p">:</span> <span class="n">example_rollup_index2</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">DROP</span> <span class="n">ROLLUP</span> <span class="n">example_rollup_index2</span><span class="p">;</span>

<span class="p">[</span><span class="n">schema</span> <span class="n">change</span><span class="p">]</span>
<span class="mf">1.</span> <span class="n">Add</span> <span class="n">a</span> <span class="n">key</span> <span class="n">column</span> <span class="n">new_col</span> <span class="n">to</span> <span class="n">the</span> <span class="n">col1</span> <span class="n">of</span> <span class="n">example_rollup_index</span> <span class="p">(</span><span class="n">non</span><span class="o">-</span><span class="n">aggregate</span> <span class="n">model</span><span class="p">)</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">new_col</span> <span class="n">INT</span> <span class="n">KEY</span> <span class="n">DEFAULT</span> <span class="s2">&quot;0&quot;</span> <span class="n">AFTER</span> <span class="n">col1</span>
    <span class="n">TO</span> <span class="n">example_rollup_index</span><span class="p">;</span>

<span class="mf">2.</span> <span class="n">Add</span> <span class="n">a</span> <span class="n">value</span> <span class="n">column</span> <span class="n">new_col</span> <span class="n">to</span> <span class="n">the</span> <span class="n">col1</span> <span class="n">of</span> <span class="n">example_rollup_index</span> <span class="p">(</span><span class="n">non</span><span class="o">-</span><span class="n">aggregate</span> <span class="n">model</span><span class="p">)</span>
      <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
      <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">new_col</span> <span class="n">INT</span> <span class="n">DEFAULT</span> <span class="s2">&quot;0&quot;</span> <span class="n">AFTER</span> <span class="n">col1</span>
      <span class="n">TO</span> <span class="n">example_rollup_index</span><span class="p">;</span>

<span class="mf">3.</span> <span class="n">Add</span> <span class="n">a</span> <span class="n">key</span> <span class="n">column</span> <span class="n">new_col</span> <span class="p">(</span><span class="n">aggregation</span> <span class="n">model</span><span class="p">)</span> <span class="n">to</span> <span class="n">col1</span> <span class="n">of</span> <span class="n">example_rollup_index</span>
      <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
      <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">new_col</span> <span class="n">INT</span> <span class="n">DEFAULT</span> <span class="s2">&quot;0&quot;</span> <span class="n">AFTER</span> <span class="n">col1</span>
      <span class="n">TO</span> <span class="n">example_rollup_index</span><span class="p">;</span>

<span class="mf">4.</span> <span class="n">Add</span> <span class="n">a</span> <span class="n">value</span> <span class="n">column</span> <span class="n">to</span> <span class="n">the</span> <span class="n">col1</span> <span class="n">of</span> <span class="n">example_rollup_index</span><span class="o">.</span> <span class="n">new_col</span> <span class="n">SUM</span> <span class="n">aggregation</span> <span class="nb">type</span> <span class="p">(</span><span class="n">aggregation</span> <span class="n">model</span><span class="p">)</span>
      <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
      <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">new_col</span> <span class="n">INT</span> <span class="n">SUM</span> <span class="n">DEFAULT</span> <span class="s2">&quot;0&quot;</span> <span class="n">AFTER</span> <span class="n">col1</span>
      <span class="n">TO</span> <span class="n">example_rollup_index</span><span class="p">;</span>

<span class="mf">5.</span> <span class="n">Add</span> <span class="n">multiple</span> <span class="n">columns</span> <span class="n">to</span> <span class="n">the</span> <span class="n">example_rollup_index</span> <span class="p">(</span><span class="n">aggregate</span> <span class="n">model</span><span class="p">)</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="p">(</span><span class="n">col1</span> <span class="n">INT</span> <span class="n">DEFAULT</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">col2</span> <span class="n">FLOAT</span> <span class="n">SUM</span> <span class="n">DEFAULT</span> <span class="s2">&quot;2.3&quot;</span><span class="p">)</span>
    <span class="n">TO</span> <span class="n">example_rollup_index</span><span class="p">;</span>

<span class="mf">6.</span> <span class="n">Remove</span> <span class="n">a</span> <span class="n">column</span> <span class="kn">from</span> <span class="nn">example_rollup_index</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">DROP</span> <span class="n">COLUMN</span> <span class="n">col2</span>
    <span class="n">FROM</span> <span class="n">example_rollup_index</span><span class="p">;</span>
    
<span class="mf">7.</span> <span class="n">Modify</span> <span class="n">the</span> <span class="n">base</span> <span class="n">index</span><span class="s1">&#39;s col1 column to be of type BIGINT and move to the col2 column</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">MODIFY</span> <span class="n">COLUMN</span> <span class="n">col1</span> <span class="n">BIGINT</span> <span class="n">DEFAULT</span> <span class="s2">&quot;1&quot;</span> <span class="n">AFTER</span> <span class="n">col2</span><span class="p">;</span>

<span class="mf">8.</span> <span class="n">Modify</span> <span class="n">the</span> <span class="n">maximum</span> <span class="n">length</span> <span class="n">of</span> <span class="n">the</span> <span class="n">val1</span> <span class="n">column</span> <span class="n">of</span> <span class="n">the</span> <span class="n">base</span> <span class="n">index</span><span class="o">.</span> <span class="n">The</span> <span class="n">original</span> <span class="n">val1</span> <span class="ow">is</span> <span class="p">(</span><span class="n">val1</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">REPLACE</span> <span class="n">DEFAULT</span> <span class="s2">&quot;abc&quot;</span><span class="p">)</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">MODIFY</span> <span class="n">COLUMN</span> <span class="n">val1</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span> <span class="n">REPLACE</span> <span class="n">DEFAULT</span> <span class="s2">&quot;abc&quot;</span><span class="p">;</span>

<span class="mf">9.</span> <span class="n">Reorder</span> <span class="n">the</span> <span class="n">columns</span> <span class="ow">in</span> <span class="n">example_rollup_index</span> <span class="p">(</span><span class="nb">set</span> <span class="n">the</span> <span class="n">original</span> <span class="n">column</span> <span class="n">order</span><span class="p">:</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">)</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">ORDER</span> <span class="n">BY</span> <span class="p">(</span><span class="n">k3</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v1</span><span class="p">)</span>
    <span class="n">FROM</span> <span class="n">example_rollup_index</span><span class="p">;</span>
    
<span class="mf">10.</span> <span class="n">Perform</span> <span class="n">both</span> <span class="n">operations</span> <span class="n">simultaneously</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">v2</span> <span class="n">INT</span> <span class="n">MAX</span> <span class="n">DEFAULT</span> <span class="s2">&quot;0&quot;</span> <span class="n">AFTER</span> <span class="n">k2</span> <span class="n">TO</span> <span class="n">example_rollup_index</span><span class="p">,</span>
    <span class="n">ORDER</span> <span class="n">BY</span> <span class="p">(</span><span class="n">k3</span><span class="p">,</span><span class="n">k1</span><span class="p">,</span><span class="n">k2</span><span class="p">,</span><span class="n">v2</span><span class="p">,</span><span class="n">v1</span><span class="p">)</span> <span class="n">FROM</span> <span class="n">example_rollup_index</span><span class="p">;</span>

<span class="mf">11.</span> <span class="n">Modify</span> <span class="n">the</span> <span class="n">bloom</span> <span class="nb">filter</span> <span class="n">column</span> <span class="n">of</span> <span class="n">the</span> <span class="n">table</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span> <span class="n">SET</span> <span class="p">(</span><span class="s2">&quot;bloom_filter_columns&quot;</span><span class="o">=</span><span class="s2">&quot;k1,k2,k3&quot;</span><span class="p">);</span>

    <span class="n">Can</span> <span class="n">also</span> <span class="n">be</span> <span class="n">merged</span> <span class="n">into</span> <span class="n">the</span> <span class="n">above</span> <span class="n">schema</span> <span class="n">change</span> <span class="n">operation</span> <span class="p">(</span><span class="n">note</span> <span class="n">that</span> <span class="n">the</span> <span class="n">syntax</span> <span class="n">of</span> <span class="n">multiple</span> <span class="n">clauses</span> <span class="ow">is</span> <span class="n">slightly</span> <span class="n">different</span><span class="p">)</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span>
    <span class="n">DROP</span> <span class="n">COLUMN</span> <span class="n">col2</span>
    <span class="n">PROPERTIES</span> <span class="p">(</span><span class="s2">&quot;bloom_filter_columns&quot;</span><span class="o">=</span><span class="s2">&quot;k1,k2,k3&quot;</span><span class="p">);</span>

<span class="mf">12.</span> <span class="n">Modify</span> <span class="n">the</span> <span class="n">Colocate</span> <span class="nb">property</span> <span class="n">of</span> <span class="n">the</span> <span class="n">table</span>

    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span> <span class="nb">set</span> <span class="p">(</span><span class="s2">&quot;colocate_with&quot;</span> <span class="o">=</span> <span class="s2">&quot;t1&quot;</span><span class="p">);</span>

<span class="mf">13.</span> <span class="n">Change</span> <span class="n">the</span> <span class="n">bucketing</span> <span class="n">mode</span> <span class="n">of</span> <span class="n">the</span> <span class="n">table</span> <span class="kn">from</span> <span class="nn">Random</span> <span class="n">Distribution</span> <span class="n">to</span> <span class="n">Hash</span> <span class="n">Distribution</span>

    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span> <span class="nb">set</span> <span class="p">(</span><span class="s2">&quot;distribution_type&quot;</span> <span class="o">=</span> <span class="s2">&quot;hash&quot;</span><span class="p">);</span>

<span class="mf">14.</span> <span class="n">Modify</span> <span class="n">the</span> <span class="n">dynamic</span> <span class="n">partition</span> <span class="n">properties</span> <span class="n">of</span> <span class="n">the</span> <span class="n">table</span> <span class="p">(</span><span class="n">support</span> <span class="n">adding</span> <span class="n">dynamic</span> <span class="n">partition</span> <span class="n">properties</span> <span class="n">to</span> <span class="n">tables</span> <span class="n">without</span> <span class="n">dynamic</span> <span class="n">partition</span> <span class="n">properties</span><span class="p">)</span>

    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span> <span class="nb">set</span> <span class="p">(</span><span class="s2">&quot;dynamic_partition_enable&quot;</span> <span class="o">=</span> <span class="s2">&quot;false&quot;</span><span class="p">);</span>

    <span class="n">If</span> <span class="n">you</span> <span class="n">need</span> <span class="n">to</span> <span class="n">add</span> <span class="n">dynamic</span> <span class="n">partition</span> <span class="n">attributes</span> <span class="n">to</span> <span class="n">a</span> <span class="n">table</span> <span class="n">without</span> <span class="n">dynamic</span> <span class="n">partition</span> <span class="n">attributes</span><span class="p">,</span> <span class="n">you</span> <span class="n">need</span> <span class="n">to</span> <span class="n">specify</span> <span class="nb">all</span> <span class="n">dynamic</span> <span class="n">partition</span> <span class="n">attributes</span>

    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span> <span class="nb">set</span> <span class="p">(</span><span class="s2">&quot;dynamic_partition. Enable &quot;</span><span class="o">=</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="n">dynamic_partition</span><span class="o">.</span> <span class="n">Time_unit</span><span class="s2">&quot; = &quot;</span><span class="n">DAY</span><span class="s2">&quot;, &quot;</span><span class="n">dynamic_partition</span><span class="o">.</span> <span class="n">End</span> <span class="s2">&quot;= &quot;</span><span class="mi">3</span><span class="s2">&quot;, &quot;</span><span class="n">dynamic_partition</span><span class="o">.</span> <span class="n">Prefix</span><span class="s2">&quot; = &quot;</span><span class="n">p</span><span class="s2">&quot;, &quot;</span><span class="n">Dynamic_partition</span><span class="o">.</span> <span class="n">Buckets</span><span class="s2">&quot; = &quot;</span><span class="mi">32</span><span class="s2">&quot;);</span>

<span class="mf">15.</span> <span class="n">Modify</span> <span class="n">the</span> <span class="n">in_memory</span> <span class="nb">property</span> <span class="n">of</span> <span class="n">the</span> <span class="n">table</span>

    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">my_table</span> <span class="nb">set</span> <span class="p">(</span><span class="s2">&quot;in_memory&quot;</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span><span class="p">);</span>
    
<span class="p">[</span><span class="n">rename</span><span class="p">]</span>
<span class="mf">1.</span> <span class="n">Modify</span> <span class="n">the</span> <span class="n">table</span> <span class="n">named</span> <span class="n">table1</span> <span class="n">to</span> <span class="n">table2</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">table1</span> <span class="n">RENAME</span> <span class="n">table2</span><span class="p">;</span>
    
<span class="mf">2.</span> <span class="n">Modify</span> <span class="n">the</span> <span class="n">rollup</span> <span class="n">index</span> <span class="n">named</span> <span class="n">rollup1</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">table</span> <span class="n">example_table</span> <span class="n">to</span> <span class="n">rollup2</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_table</span> <span class="n">RENAME</span> <span class="n">ROLLUP</span> <span class="n">rollup1</span> <span class="n">rollup2</span><span class="p">;</span>
    
<span class="mf">3.</span> <span class="n">Modify</span> <span class="n">the</span> <span class="n">partition</span> <span class="n">named</span> <span class="n">p1</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">table</span> <span class="n">example_table</span> <span class="n">to</span> <span class="n">p2</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">example_table</span> <span class="n">RENAME</span> <span class="n">PARTITION</span> <span class="n">p1</span> <span class="n">p2</span><span class="p">;</span>

<span class="p">[</span><span class="n">index</span><span class="p">]</span>
<span class="mf">1.</span> <span class="n">create</span> <span class="n">index</span> <span class="n">on</span> <span class="n">table1</span> <span class="n">column</span> <span class="n">siteid</span> <span class="n">using</span> <span class="n">bitmap</span> 
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">table1</span> <span class="n">ADD</span> <span class="n">INDEX</span> <span class="n">index_name</span>  <span class="p">[</span><span class="n">USING</span> <span class="n">BITMAP</span><span class="p">]</span> <span class="p">(</span><span class="n">siteid</span><span class="p">)</span> <span class="n">COMMENT</span> <span class="s1">&#39;balabala&#39;</span><span class="p">;</span>
<span class="mf">2.</span> <span class="n">drop</span> <span class="n">bitmap</span> <span class="n">index</span> <span class="n">of</span> <span class="n">table1</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">table1</span> <span class="n">DROP</span> <span class="n">INDEX</span> <span class="n">index_name</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="keyword">
<h2>keyword<a class="headerlink" href="#keyword" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALTER</span><span class="p">,</span> <span class="n">TABLE</span><span class="p">,</span> <span class="n">ROLLUP</span><span class="p">,</span> <span class="n">COLUMN</span><span class="p">,</span> <span class="n">PARTITION</span><span class="p">,</span> <span class="n">RENAME</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ALTER VIEW_EN.html" class="btn btn-neutral float-right" title="ALTER VIEW" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ALTER DATABASE_EN.html" class="btn btn-neutral float-left" title="ALTER DATABASE" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Apache Doris(Incubating)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
<div role="contentinfo">
    <p></p>
    <p>

        Apache Doris(incubating) is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.

    </p>
</div>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>