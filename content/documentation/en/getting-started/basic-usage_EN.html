

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Guidelines for Basic Use &mdash; Doris Documentations 0.11.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Advanced Use Guide" href="advance-usage_EN.html" />
    <link rel="prev" title="Getting started" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Doris Documentations
          

          
          </a>

          
            
            
              <div class="version">
                0.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../cn/index.html">中文</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">English</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../installing/index.html">Compilation and deployment</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Getting started</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Guidelines for Basic Use</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-users">1 Create Users</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-table-creation-and-data-import">2 Data Table Creation and Data Import</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-query">3 Data query</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="advance-usage_EN.html">Advanced Use Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="best-practice_EN.html">Best Practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="data-partition_EN.html">Data Partition</a></li>
<li class="toctree-l3"><a class="reference internal" href="data-model-rollup_EN.html">Data Model, ROLLUP and Prefix Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="hit-the-rollup_EN.html">Noun Interpretation</a></li>
<li class="toctree-l3"><a class="reference internal" href="hit-the-rollup_EN.html#index">Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="hit-the-rollup_EN.html#aggregate-data">Aggregate data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../administrator-guide/index.html">Administrator Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending-doris/index.html">Extending Ability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal/index.html">Design Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql-reference/index.html">SQL Manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer-guide/index.html">Developer Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../community/index.html">Apache Commnity</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Doris Documentations</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">English</a> &raquo;</li>
        
          <li><a href="index.html">Getting started</a> &raquo;</li>
        
      <li>Guidelines for Basic Use</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/apache/incubator-doris/blob/master/docs/documentation/en/getting-started/basic-usage_EN.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="guidelines-for-basic-use">
<h1>Guidelines for Basic Use<a class="headerlink" href="#guidelines-for-basic-use" title="Permalink to this headline">¶</a></h1>
<p>Doris uses MySQL protocol to communicate. Users can connect to Doris cluster through MySQL client or MySQL JDBC. When selecting the MySQL client version, it is recommended to use the version after 5.1, because user names of more than 16 characters can not be supported before 5.1. This paper takes MySQL client as an example to show users the basic usage of Doris through a complete process.</p>
<div class="section" id="create-users">
<h2>1 Create Users<a class="headerlink" href="#create-users" title="Permalink to this headline">¶</a></h2>
<div class="section" id="root-user-logon-and-password-modification">
<h3>1.1 Root User Logon and Password Modification<a class="headerlink" href="#root-user-logon-and-password-modification" title="Permalink to this headline">¶</a></h3>
<p>Doris has built-in root and admin users, and the password is empty by default. After starting the Doris program, you can connect to the Doris cluster through root or admin users.
Use the following command to log in to Doris:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span> <span class="o">-</span><span class="n">h</span> <span class="n">FE_HOST</span> <span class="o">-</span><span class="n">P9030</span> <span class="o">-</span><span class="n">uroot</span>
</pre></div>
</div>
<blockquote>
<div><code class="docutils literal notranslate"> <span class="pre">fe_host</span></code> is the IP address of any FE node. <code class="docutils literal notranslate"><span class="pre">9030</span></code> is the query_port configuration in fe.conf.</div></blockquote>
<p>After login, you can modify the root password by following commands</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">PASSWORD</span> <span class="n">FOR</span> <span class="s1">&#39;root&#39;</span> <span class="o">=</span> <span class="n">PASSWORD</span><span class="p">(</span><span class="s1">&#39;your_password&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-new-users">
<h3>1.3 Creating New Users<a class="headerlink" href="#creating-new-users" title="Permalink to this headline">¶</a></h3>
<p>Create an ordinary user with the following command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">USER</span> <span class="s1">&#39;test&#39;</span> <span class="n">IDENTIFIED</span> <span class="n">BY</span> <span class="s1">&#39;test_passwd&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>Follow-up login can be done through the following connection commands.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span> <span class="o">-</span><span class="n">h</span> <span class="n">FE_HOST</span> <span class="o">-</span><span class="n">P9030</span> <span class="o">-</span><span class="n">utest</span> <span class="o">-</span><span class="n">ptest_passwd</span>
</pre></div>
</div>
<blockquote>
<div>By default, the newly created common user does not have any permissions. Permission grants can be referred to later permission grants.</div></blockquote>
</div>
</div>
<div class="section" id="data-table-creation-and-data-import">
<h2>2 Data Table Creation and Data Import<a class="headerlink" href="#data-table-creation-and-data-import" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create-a-database">
<h3>2.1 Create a database<a class="headerlink" href="#create-a-database" title="Permalink to this headline">¶</a></h3>
<p>Initially, a database can be created through root or admin users:</p>
<p><code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">DATABASE</span> <span class="pre">example_db;</span></code></p>
<blockquote>
<div>All commands can use’HELP command;’to see detailed grammar help. For example: <code class="docutils literal notranslate"><span class="pre">HELP</span> <span class="pre">CREATE</span> <span class="pre">DATABASE;'</span></code></div></blockquote>
<blockquote>
<div>If you don’t know the full name of the command, you can use “help command a field” for fuzzy query. If you type’HELP CREATE’, you can match commands like <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">DATABASE',</span> </code>CREATE TABLE’, `CREATE USER’, etc.</div></blockquote>
<p>After the database is created, you can view the database information through `SHOW DATABASES’.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MySQL</span><span class="o">&gt;</span> <span class="n">SHOW</span> <span class="n">DATABASES</span><span class="p">;</span>
<span class="o">+--------------------+</span>
<span class="o">|</span> <span class="n">Database</span>           <span class="o">|</span>
<span class="o">+--------------------+</span>
<span class="o">|</span> <span class="n">example_db</span>         <span class="o">|</span>
<span class="o">|</span> <span class="n">information_schema</span> <span class="o">|</span>
<span class="o">+--------------------+</span>
<span class="mi">2</span> <span class="n">rows</span> <span class="ow">in</span> <span class="nb">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>
</div>
<p>Information_schema exists to be compatible with MySQL protocol. In practice, information may not be very accurate. Therefore, information about specific databases is suggested to be obtained by directly querying the corresponding databases.</p>
</div>
<div class="section" id="account-authorization">
<h3>2.2 Account Authorization<a class="headerlink" href="#account-authorization" title="Permalink to this headline">¶</a></h3>
<p>After the example_db is created, the read and write permissions of example_db can be authorized to ordinary accounts, such as test, through the root/admin account. After authorization, the example_db database can be operated by logging in with the test account.</p>
<p><code class="docutils literal notranslate"><span class="pre">GRANT</span> <span class="pre">ALL</span> <span class="pre">ON</span> <span class="pre">example_db</span> <span class="pre">TO</span> <span class="pre">test;</span></code></p>
</div>
<div class="section" id="formulation">
<h3>2.3 Formulation<a class="headerlink" href="#formulation" title="Permalink to this headline">¶</a></h3>
<p>Create a table using the `CREATE TABLE’command. More detailed parameters can be seen:</p>
<p><code class="docutils literal notranslate"><span class="pre">HELP</span> <span class="pre">CREATE</span> <span class="pre">TABLE;</span></code></p>
<p>First switch the database:</p>
<p><code class="docutils literal notranslate"><span class="pre">USE</span> <span class="pre">example_db;</span></code></p>
<p>Doris supports single partition and composite partition.</p>
<p>In the composite partition:</p>
<ul class="simple">
<li>The first level is called Partition, or partition. Users can specify a dimension column as a partition column (currently only integer and time type columns are supported), and specify the range of values for each partition.</li>
<li>The second stage is called Distribution, or bucket division. Users can specify one or more dimension columns and the number of buckets for HASH distribution of data.</li>
</ul>
<p>Composite partitioning is recommended for the following scenarios</p>
<ul class="simple">
<li>There are time dimensions or similar dimensions with ordered values, which can be used as partition columns. The partition granularity can be evaluated according to the frequency of importation and the amount of partition data.</li>
<li>Historic data deletion requirements: If there is a need to delete historical data (for example, only the last N days of data are retained). Using composite partitions, you can achieve this by deleting historical partitions. Data can also be deleted by sending a DELETE statement within a specified partition.</li>
<li>Solve the data skew problem: Each partition can specify the number of buckets separately. If dividing by day, when the amount of data varies greatly every day, we can divide the data of different partitions reasonably by the number of buckets in the specified partition. Bucket columns recommend choosing columns with high degree of differentiation.</li>
</ul>
<p>Users can also use no composite partitions, even single partitions. Then the data are only distributed by HASH.</p>
<p>Taking the aggregation model as an example, the following two partitions are illustrated separately.</p>
<div class="section" id="single-partition">
<h4>Single partition<a class="headerlink" href="#single-partition" title="Permalink to this headline">¶</a></h4>
<p>Create a logical table with the name table1. The number of barrels is 10.</p>
<p>The schema of this table is as follows:</p>
<ul class="simple">
<li>Siteid: Type is INT (4 bytes), default value is 10</li>
<li>citycode: The type is SMALLINT (2 bytes)</li>
<li>username: The type is VARCHAR, the maximum length is 32, and the default value is an empty string.</li>
<li>pv: Type is BIGINT (8 bytes), default value is 0; this is an index column, Doris will aggregate the index column internally, the aggregation method of this column is SUM.</li>
</ul>
<p>The TABLE statement is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">table1</span>
<span class="p">(</span>
<span class="n">siteid</span> <span class="n">INT</span> <span class="n">DEFAULT</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span>
<span class="n">citycode</span> <span class="n">SMALLINT</span><span class="p">,</span>
<span class="n">Username</span> <span class="n">VARCHAR</span> <span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">DEFAULT</span><span class="s1">&#39;,</span>
<span class="n">pv</span> <span class="n">BIGINT</span> <span class="n">SUM</span> <span class="n">DEFAULT</span> <span class="s1">&#39;0&#39;</span>
<span class="p">)</span>
<span class="n">AGGREGATE</span> <span class="n">KEY</span><span class="p">(</span><span class="n">siteid</span><span class="p">,</span> <span class="n">citycode</span><span class="p">,</span> <span class="n">username</span><span class="p">)</span>
<span class="n">DISTRIBUTED</span> <span class="n">BY</span> <span class="n">HASH</span><span class="p">(</span><span class="n">siteid</span><span class="p">)</span> <span class="n">BUCKETS</span> <span class="mi">10</span>
<span class="n">PROPERTIES</span><span class="p">(</span><span class="s2">&quot;replication_num&quot;</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="composite-partition">
<h4>Composite partition<a class="headerlink" href="#composite-partition" title="Permalink to this headline">¶</a></h4>
<p>Create a logical table named table2.</p>
<p>The schema of this table is as follows:</p>
<ul class="simple">
<li>event_day: Type DATE, no default</li>
<li>Siteid: Type is INT (4 bytes), default value is 10</li>
<li>citycode: The type is SMALLINT (2 bytes)</li>
<li>username: The type is VARCHAR, the maximum length is 32, and the default value is an empty string.</li>
<li>pv: Type is BIGINT (8 bytes), default value is 0; this is an index column, Doris will aggregate the index column internally, the aggregation method of this column is SUM.</li>
</ul>
<p>We use the event_day column as the partition column to create three partitions: p201706, p201707, and p201708.</p>
<ul class="simple">
<li>p201706: Range [Minimum, 2017-07-01)</li>
<li>p201707: Scope [2017-07-01, 2017-08-01)</li>
<li>p201708: Scope [2017-08-01, 2017-09-01)</li>
</ul>
<blockquote>
<div>Note that the interval is left closed and right open.</div></blockquote>
<p>Each partition uses siteid to hash buckets, with a bucket count of 10</p>
<p>The TABLE statement is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">table2</span>
<span class="p">(</span>
<span class="n">event</span> <span class="o">/</span><span class="n">day</span> <span class="n">DATE</span><span class="p">,</span>
<span class="n">siteid</span> <span class="n">INT</span> <span class="n">DEFAULT</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span>
<span class="n">citycode</span> <span class="n">SMALLINT</span><span class="p">,</span>
<span class="n">Username</span> <span class="n">VARCHAR</span> <span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">DEFAULT</span><span class="s1">&#39;,</span>
<span class="n">pv</span> <span class="n">BIGINT</span> <span class="n">SUM</span> <span class="n">DEFAULT</span> <span class="s1">&#39;0&#39;</span>
<span class="p">)</span>
<span class="n">AGGREGATE</span> <span class="n">KEY</span><span class="p">(</span><span class="n">event_day</span><span class="p">,</span> <span class="n">siteid</span><span class="p">,</span> <span class="n">citycode</span><span class="p">,</span> <span class="n">username</span><span class="p">)</span>
<span class="n">PARTITION</span> <span class="n">BY</span> <span class="n">RANGE</span><span class="p">(</span><span class="n">event_day</span><span class="p">)</span>
<span class="p">(</span>
<span class="n">The</span> <span class="n">distribution</span> <span class="n">value</span> <span class="n">of</span> <span class="n">P201706</span> <span class="n">was</span> <span class="n">lower</span> <span class="n">than</span> <span class="n">that</span> <span class="n">of</span> <span class="p">(</span><span class="s2">&quot;2017-07-01&quot;</span><span class="p">)</span><span class="o">.</span>
<span class="n">The</span> <span class="n">segmentation</span> <span class="n">value</span> <span class="n">of</span> <span class="n">P201707</span> <span class="ow">is</span> <span class="n">lower</span> <span class="n">than</span> <span class="n">that</span> <span class="n">of</span> <span class="p">(</span><span class="s2">&quot;2017-08-01&quot;</span><span class="p">)</span><span class="o">.</span>
<span class="n">The</span> <span class="n">segmentation</span> <span class="n">value</span> <span class="n">of</span> <span class="n">P201708</span> <span class="ow">is</span> <span class="n">lower</span> <span class="n">than</span> <span class="n">that</span> <span class="n">of</span> <span class="p">(</span><span class="s2">&quot;2017-09-01&quot;</span><span class="p">)</span><span class="o">.</span>
<span class="p">)</span>
<span class="n">DISTRIBUTED</span> <span class="n">BY</span> <span class="n">HASH</span><span class="p">(</span><span class="n">siteid</span><span class="p">)</span> <span class="n">BUCKETS</span> <span class="mi">10</span>
<span class="n">PROPERTIES</span><span class="p">(</span><span class="s2">&quot;replication_num&quot;</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>After the table is built, you can view the information of the table in example_db:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MySQL</span><span class="o">&gt;</span> <span class="n">SHOW</span> <span class="n">TABLES</span><span class="p">;</span>
<span class="o">+----------------------+</span>
<span class="mf">1.1</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.1</span><span class="o">.</span><span class="mf">2.1</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span><span class="mf">2.2</span><span class="o">.</span>
<span class="o">+----------------------+</span>
<span class="o">|</span> <span class="n">table1</span>               <span class="o">|</span>
<span class="o">|</span> <span class="n">table2</span>               <span class="o">|</span>
<span class="o">+----------------------+</span>
<span class="mi">2</span> <span class="n">rows</span> <span class="ow">in</span> <span class="nb">set</span> <span class="p">(</span><span class="mf">0.01</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MySQL</span><span class="o">&gt;</span> <span class="n">DESC</span> <span class="n">table1</span><span class="p">;</span>
<span class="o">+----------+-------------+------+-------+---------+-------+</span>
<span class="o">|</span> <span class="n">Field</span>    <span class="o">|</span> <span class="n">Type</span>        <span class="o">|</span> <span class="n">Null</span> <span class="o">|</span> <span class="n">Key</span>   <span class="o">|</span> <span class="n">Default</span> <span class="o">|</span> <span class="n">Extra</span> <span class="o">|</span>
<span class="o">+----------+-------------+------+-------+---------+-------+</span>
<span class="o">|</span> <span class="n">siteid</span>   <span class="o">|</span> <span class="nb">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>     <span class="o">|</span> <span class="n">Yes</span>  <span class="o">|</span> <span class="n">true</span>  <span class="o">|</span> <span class="mi">10</span>      <span class="o">|</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">citycode</span> <span class="o">|</span> <span class="n">smallint</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="n">Yes</span>  <span class="o">|</span> <span class="n">true</span>  <span class="o">|</span> <span class="n">N</span><span class="o">/</span><span class="n">A</span>     <span class="o">|</span>       <span class="o">|</span>
<span class="s2">&quot;124s; username&quot;</span><span class="mi">124</span><span class="n">s</span><span class="p">;</span> <span class="n">varchar</span> <span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="s2">&quot;124s; Yes&quot;</span><span class="mi">124</span><span class="n">s</span><span class="p">;</span> <span class="n">true</span> <span class="s2">&quot;124s;&quot;</span><span class="mi">124</span><span class="n">s</span><span class="p">;</span> <span class="s2">&quot;124s;</span>
<span class="o">+</span> <span class="mi">124</span><span class="p">;</span> <span class="n">PV</span> <span class="o">=</span> <span class="mi">124</span><span class="p">;</span> <span class="n">Bigint</span> <span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">Yes</span> <span class="kc">False</span> <span class="mi">0</span> <span class="n">Sum</span>
<span class="o">+----------+-------------+------+-------+---------+-------+</span>
<span class="mi">4</span> <span class="n">rows</span> <span class="ow">in</span> <span class="nb">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">MySQL</span><span class="o">&gt;</span> <span class="n">DESC</span> <span class="n">table2</span><span class="p">;</span>
<span class="o">+-----------+-------------+------+-------+---------+-------+</span>
<span class="o">|</span> <span class="n">Field</span>     <span class="o">|</span> <span class="n">Type</span>        <span class="o">|</span> <span class="n">Null</span> <span class="o">|</span> <span class="n">Key</span>   <span class="o">|</span> <span class="n">Default</span> <span class="o">|</span> <span class="n">Extra</span> <span class="o">|</span>
<span class="o">+-----------+-------------+------+-------+---------+-------+</span>
<span class="o">|</span> <span class="n">event_day</span> <span class="o">|</span> <span class="n">date</span>        <span class="o">|</span> <span class="n">Yes</span>  <span class="o">|</span> <span class="n">true</span>  <span class="o">|</span> <span class="n">N</span><span class="o">/</span><span class="n">A</span>     <span class="o">|</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">siteid</span>    <span class="o">|</span> <span class="nb">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>     <span class="o">|</span> <span class="n">Yes</span>  <span class="o">|</span> <span class="n">true</span>  <span class="o">|</span> <span class="mi">10</span>      <span class="o">|</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">citycode</span>  <span class="o">|</span> <span class="n">smallint</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="n">Yes</span>  <span class="o">|</span> <span class="n">true</span>  <span class="o">|</span> <span class="n">N</span><span class="o">/</span><span class="n">A</span>     <span class="o">|</span>       <span class="o">|</span>
<span class="s2">&quot;124s; username&quot;</span><span class="mi">124</span><span class="n">s</span><span class="p">;</span> <span class="n">varchar</span> <span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="s2">&quot;124s; Yes&quot;</span><span class="mi">124</span><span class="n">s</span><span class="p">;</span> <span class="n">true</span> <span class="s2">&quot;124s;&quot;</span><span class="mi">124</span><span class="n">s</span><span class="p">;</span> <span class="s2">&quot;124s;</span>
<span class="o">+</span> <span class="mi">124</span><span class="p">;</span> <span class="n">PV</span> <span class="o">=</span> <span class="mi">124</span><span class="p">;</span> <span class="n">Bigint</span> <span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">Yes</span> <span class="kc">False</span> <span class="mi">0</span> <span class="n">Sum</span>
<span class="o">+-----------+-------------+------+-------+---------+-------+</span>
<span class="mi">5</span> <span class="n">rows</span> <span class="ow">in</span> <span class="nb">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><p>Notes:</p>
<ol class="simple">
<li>By setting replication_num, the above tables are all single-copy tables. Doris recommends that users adopt the default three-copy settings to ensure high availability.</li>
<li>Composite partition tables can be added or deleted dynamically. See the Partition section in `HELP ALTER TABLE’.</li>
<li>Data import can import the specified Partition. See `HELP LOAD’.</li>
<li>Schema of table can be dynamically modified.</li>
<li>Rollup can be added to Table to improve query performance. This section can be referred to the description of Rollup in Advanced Usage Guide.</li>
</ol>
</div></blockquote>
</div>
</div>
<div class="section" id="import-data">
<h3>2.4 Import data<a class="headerlink" href="#import-data" title="Permalink to this headline">¶</a></h3>
<p>Doris supports a variety of data import methods. Specifically, you can refer to the data import document. Here we use streaming import and Broker import as examples.</p>
<div class="section" id="flow-in">
<h4>Flow-in<a class="headerlink" href="#flow-in" title="Permalink to this headline">¶</a></h4>
<p>Streaming import transfers data to Doris via HTTP protocol. It can import local data directly without relying on other systems or components. Detailed grammar help can be found in `HELP STREAM LOAD;’</p>
<p>Example 1: With “table1_20170707” as Label, import table1 tables using the local file table1_data.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">--</span><span class="n">location</span><span class="o">-</span><span class="n">trusted</span> <span class="o">-</span><span class="n">u</span> <span class="n">test</span><span class="p">:</span><span class="n">test</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;label:table1_20170707&quot;</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;column_separator:,&quot;</span> <span class="o">-</span><span class="n">T</span> <span class="n">table1_data</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">FE_HOST</span><span class="p">:</span><span class="mi">8030</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">example_db</span><span class="o">/</span><span class="n">table1</span><span class="o">/</span><span class="n">_stream_load</span>
</pre></div>
</div>
<blockquote>
<div><ol class="simple">
<li>FE_HOST is the IP of any FE node and 8030 is http_port in fe.conf.</li>
<li>You can use the IP of any BE and the webserver_port in be.conf to connect the target left and right for import. For example: <code class="docutils literal notranslate"><span class="pre">BE_HOST:8040</span></code></li>
</ol>
</div></blockquote>
<p>The local file <code class="docutils literal notranslate"><span class="pre">table1_data'takes</span> </code>, `as the separation between data, and the specific contents are as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">Jim</span><span class="p">,</span><span class="mi">2</span>
<span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">grace</span><span class="p">,</span><span class="mi">2</span>
<span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">tom</span><span class="p">,</span><span class="mi">2</span>
<span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">bush</span><span class="p">,</span><span class="mi">3</span>
<span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">helen</span><span class="p">,</span><span class="mi">3</span>
</pre></div>
</div>
<p>Example 2: With “table2_20170707” as Label, import table2 tables using the local file table2_data.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">--</span><span class="n">location</span><span class="o">-</span><span class="n">trusted</span> <span class="o">-</span><span class="n">u</span> <span class="n">test</span><span class="p">:</span><span class="n">test</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;label:table2_20170707&quot;</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;column_separator:,&quot;</span> <span class="o">-</span><span class="n">T</span> <span class="n">table1_data</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">8030</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">example_db</span><span class="o">/</span><span class="n">table2</span><span class="o">/</span><span class="n">_stream_load</span>
</pre></div>
</div>
<p>The local file <code class="docutils literal notranslate"><span class="pre">table2_data'is</span> <span class="pre">separated</span> <span class="pre">by</span> </code>t’. The details are as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2017</span> <span class="o">-</span><span class="mi">07</span> <span class="o">-</span><span class="mi">03</span><span class="p">:</span> <span class="mi">1</span><span class="n">st</span> <span class="n">Jim</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">07</span><span class="o">-</span><span class="mi">05</span>  <span class="mi">2</span>   <span class="mi">1</span>   <span class="n">grace</span> <span class="mi">2</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">07</span><span class="o">-</span><span class="mi">123</span> <span class="mi">2</span> <span class="n">Tom</span> <span class="mi">2</span>
<span class="mi">2017</span> <span class="o">-</span><span class="mi">07</span> <span class="o">-</span><span class="mi">15</span> <span class="mi">4</span> <span class="mi">3</span> <span class="s1">&#39;bush&#39;</span> <span class="mi">3</span>
<span class="mi">2017</span> <span class="o">-</span><span class="mi">07</span> <span class="o">-</span><span class="mi">12</span> <span class="mi">5</span> <span class="mi">3</span> <span class="s1">&#39;helen 3</span>
</pre></div>
</div>
<blockquote>
<div><p>Notes:</p>
<ol class="simple">
<li>The recommended file size for streaming import is limited to 10GB. Excessive file size will result in higher cost of retry failure.</li>
<li>Each batch of imported data needs to take a Label. Label is best a string related to a batch of data for easy reading and management. Doris based on Label guarantees that the same batch of data can be imported only once in a database. Label for failed tasks can be reused.</li>
<li>Streaming imports are synchronous commands. The successful return of the command indicates that the data has been imported, and the failure of the return indicates that the batch of data has not been imported.</li>
</ol>
</div></blockquote>
<p>‘35;’35;’ 35;’35; Broker’235488;’</p>
<p>Broker imports import data from external storage through deployed Broker processes. For more help, see <code class="docutils literal notranslate"><span class="pre">HELP</span> <span class="pre">BROKER</span> <span class="pre">LOAD;'</span></code></p>
<p>Example: Import files on HDFS into table1 table with “table1_20170708” as Label</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LOAD</span> <span class="n">LABEL</span> <span class="n">table1_20170708</span>
<span class="p">(</span>
<span class="n">DATA</span> <span class="n">INFILE</span><span class="p">(</span><span class="s2">&quot;hdfs://your.namenode.host:port/dir/table1_data&quot;</span><span class="p">)</span>
<span class="n">INTO</span> <span class="n">TABLE</span> <span class="n">table1</span>
<span class="p">)</span>
<span class="n">WITH</span> <span class="n">BROKER</span> <span class="n">hdfs</span>
<span class="p">(</span>
<span class="s2">&quot;Username&quot;</span> <span class="o">=</span> <span class="s2">&quot;HDFS</span><span class="se">\\</span><span class="s2"> user&quot;</span>
<span class="s2">&quot;password&quot;</span><span class="o">=</span><span class="s2">&quot;hdfs_password&quot;</span>
<span class="p">)</span>
<span class="n">PROPERTIES</span>
<span class="p">(</span>
<span class="n">Timeout</span> <span class="o">=</span><span class="s2">&quot;3600&quot;</span><span class="p">,</span>
<span class="s2">&quot;max_filter_ratio&quot;</span><span class="o">=</span><span class="s2">&quot;0.1&quot;</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Broker imports are asynchronous commands. Successful execution of the above commands only indicates successful submission of tasks. Successful imports need to be checked through `SHOW LOAD;’ Such as:</p>
<p><code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">LOAD</span> <span class="pre">WHERE</span> <span class="pre">LABLE</span> <span class="pre">=</span> <span class="pre">&quot;table1_20170708&quot;;</span></code></p>
<p>In the return result, FINISHED in the `State’field indicates that the import was successful.</p>
<p>关于 <code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">LOAD</span></code> 的更多说明，可以参阅 <code class="docutils literal notranslate"><span class="pre">HELP</span> <span class="pre">SHOW</span> <span class="pre">LOAD;</span></code></p>
<p>Asynchronous import tasks can be cancelled before the end:</p>
<p>‘CANCEL LOAD WHERE LABEL =”Table 1’u 201708”;`</p>
</div>
</div>
</div>
<div class="section" id="data-query">
<h2>3 Data query<a class="headerlink" href="#data-query" title="Permalink to this headline">¶</a></h2>
<div class="section" id="simple-query">
<h3>3.1 Simple Query<a class="headerlink" href="#simple-query" title="Permalink to this headline">¶</a></h3>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>MySQL&gt; SELECT * FROM table1 LIMIT 3;
+--------+----------+----------+------+
| siteid | citycode | username | pv   |
+--------+----------+----------+------+
1244; 2 *1244; 1 *1244;&#39;grace &#39;1242 *1244;
|      5 |        3 | &#39;helen&#39;  |    3 |
124; 3 $124; 2 `124tom &#39;&quot;124; 2 `1244;
+--------+----------+----------+------+
5 rows in set (0.01 sec)

MySQL&gt; SELECT * FROM table1 ORDER BY citycode;
+--------+----------+----------+------+
| siteid | citycode | username | pv   |
+--------+----------+----------+------+
1244; 2 *1244; 1 *1244;&#39;grace &#39;1242 *1244;
|      1 |        1 | &#39;jim&#39;    |    2 |
124; 3 $124; 2 `124tom &#39;&quot;124; 2 `1244;
1244; 4 *1243 *124bush &quot;; 3 *1244;
|      5 |        3 | &#39;helen&#39;  |    3 |
+--------+----------+----------+------+
5 rows in set (0.01 sec)
</pre></div>
</div>
</div>
<div class="section" id="join-query">
<h3>3.3 Join Query<a class="headerlink" href="#join-query" title="Permalink to this headline">¶</a></h3>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>MySQL&gt; SELECT SUM(table1.pv) FROM table1 JOIN table2 WHERE table1.siteid = table2.siteid;
+--------------------+
+ 124; Sum (`Table1&#39;`PV `124);
+--------------------+
|                 12 |
+--------------------+
1 row in set (0.20 sec)
</pre></div>
</div>
</div>
<div class="section" id="subquery">
<h3>3.4 Subquery<a class="headerlink" href="#subquery" title="Permalink to this headline">¶</a></h3>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>MySQL&gt; SELECT SUM(pv) FROM table2 WHERE siteid IN (SELECT siteid FROM table1 WHERE siteid &gt; 2);
+-----------+
+ 124; Sum (`PV&#39;) 124;
+-----------+
|         8 |
+-----------+
1 row in set (0.13 sec)
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="advance-usage_EN.html" class="btn btn-neutral float-right" title="Advanced Use Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Getting started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Apache Doris(Incubating)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
<div role="contentinfo">
    <p></p>
    <p>

        Apache Doris is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the name of Apache TLP sponsor. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.

    </p>
</div>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>