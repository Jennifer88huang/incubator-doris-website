

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>INSERT &mdash; Doris Documentations 0.11.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="数据类型" href="../Data Types/index.html" />
    <link rel="prev" title="STREAM LOAD" href="STREAM LOAD.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> Doris Documentations
          

          
          </a>

          
            
            
              <div class="version">
                0.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">中文</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../installing/index.html">编译与部署</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting-started/index.html">开始使用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../administrator-guide/index.html">操作手册</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../extending-doris/index.html">扩展功能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../internal/index.html">设计文档</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">SQL 手册</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../sql-functions/index.html">SQL 函数</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">语法帮助</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../Account Management/index.html">用户账户管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Administration/index.html">集群管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Data Definition/index.html">DDL</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">DML</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Data Types/index.html">数据类型</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Utility/index.html">辅助命令</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer-guide/index.html">开发者手册</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../community/index.html">Apache 社区</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../en/index.html">English</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Doris Documentations</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">中文</a> &raquo;</li>
        
          <li><a href="../../index.html">SQL 手册</a> &raquo;</li>
        
          <li><a href="../index.html">语法帮助</a> &raquo;</li>
        
          <li><a href="index.html">DML</a> &raquo;</li>
        
      <li>INSERT</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/apache/incubator-doris/blob/master/docs/documentation/cn/sql-reference/sql-statements/Data Manipulation/insert.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <!-- 
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
--><div class="section" id="insert">
<h1>INSERT<a class="headerlink" href="#insert" title="Permalink to this headline">¶</a></h1>
<div class="section" id="description">
<h2>description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<div class="section" id="syntax">
<h3>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">table_name</span>
    <span class="p">[</span> <span class="n">PARTITION</span> <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span> <span class="p">]</span>
    <span class="p">[</span> <span class="n">WITH</span> <span class="n">LABEL</span> <span class="n">label</span><span class="p">]</span>
    <span class="p">[</span> <span class="p">(</span><span class="n">column</span> <span class="p">[,</span> <span class="o">...</span><span class="p">])</span> <span class="p">]</span>
    <span class="p">[</span> <span class="p">[</span> <span class="n">hint</span> <span class="p">[,</span> <span class="o">...</span><span class="p">]</span> <span class="p">]</span> <span class="p">]</span>
    <span class="p">{</span> <span class="n">VALUES</span> <span class="p">(</span> <span class="p">{</span> <span class="n">expression</span> <span class="o">|</span> <span class="n">DEFAULT</span> <span class="p">}</span> <span class="p">[,</span> <span class="o">...</span><span class="p">]</span> <span class="p">)</span> <span class="p">[,</span> <span class="o">...</span><span class="p">]</span> <span class="o">|</span> <span class="n">query</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>tablet_name: 导入数据的目的表。可以是 <code class="docutils literal notranslate"><span class="pre">db_name.table_name</span></code> 形式</p>
<p>partitions: 指定待导入的分区，必须是 <code class="docutils literal notranslate"><span class="pre">table_name</span></code> 中存在的分区，多个分区名称用逗号分隔</p>
<p>label: 为 Insert 任务指定一个 label</p>
<p>column_name: 指定的目的列，必须是 <code class="docutils literal notranslate"><span class="pre">table_name</span></code> 中存在的列</p>
<p>expression: 需要赋值给某个列的对应表达式</p>
<p>DEFAULT: 让对应列使用默认值</p>
<p>query: 一个普通查询，查询的结果会写入到目标中</p>
<p>hint: 用于指示 <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> 执行行为的一些指示符。<code class="docutils literal notranslate"><span class="pre">streaming</span></code> 和 默认的非 <code class="docutils literal notranslate"><span class="pre">streaming</span></code> 方式均会使用同步方式完成 <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> 语句执行
非 <code class="docutils literal notranslate"><span class="pre">streaming</span></code> 方式在执行完成后会返回一个 label 方便用户通过 <code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">LOAD</span></code> 查询导入的状态</p>
</div></blockquote>
</div>
<div class="section" id="note">
<h3>Note<a class="headerlink" href="#note" title="Permalink to this headline">¶</a></h3>
<p>当前执行 <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> 语句时，对于有不符合目标表格式的数据，默认的行为是过滤，比如字符串超长等。但是对于有要求数据不能够被过滤的业务场景，可以通过设置会话变量 <code class="docutils literal notranslate"><span class="pre">enable_insert_strict</span></code> 为 <code class="docutils literal notranslate"><span class="pre">true</span></code> 来确保当有数据被过滤掉的时候，<code class="docutils literal notranslate"><span class="pre">INSERT</span></code> 不会被执行成功。</p>
</div>
</div>
<div class="section" id="example">
<h2>example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">test</span></code> 表包含两个列<code class="docutils literal notranslate"><span class="pre">c1</span></code>, <code class="docutils literal notranslate"><span class="pre">c2</span></code>。</p>
<ol class="simple">
<li>向<code class="docutils literal notranslate"><span class="pre">test</span></code>表中导入一行数据</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">test</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">test</span> <span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">test</span> <span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">DEFAULT</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">test</span> <span class="p">(</span><span class="n">c1</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
<p>其中第一条、第二条语句是一样的效果。在不指定目标列时，使用表中的列顺序来作为默认的目标列。
第三条、第四条语句表达的意思是一样的，使用<code class="docutils literal notranslate"><span class="pre">c2</span></code>列的默认值，来完成数据导入。</p>
<ol class="simple">
<li>向<code class="docutils literal notranslate"><span class="pre">test</span></code>表中一次性导入多行数据</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">test</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">test</span> <span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">test</span> <span class="p">(</span><span class="n">c1</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">test</span> <span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">DEFAULT</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">DEFAULT</span><span class="p">);</span>
</pre></div>
</div>
<p>其中第一条、第二条语句效果一样，向<code class="docutils literal notranslate"><span class="pre">test</span></code>表中一次性导入两条数据
第三条、第四条语句效果已知，使用<code class="docutils literal notranslate"><span class="pre">c2</span></code>列的默认值向<code class="docutils literal notranslate"><span class="pre">test</span></code>表中导入两条数据</p>
<ol class="simple">
<li>向 <code class="docutils literal notranslate"><span class="pre">test</span></code> 表中导入一个查询语句结果</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">test</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">test2</span><span class="p">;</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">test</span> <span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">)</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">test2</span><span class="p">;</span>
</pre></div>
</div>
<ol class="simple">
<li>向 <code class="docutils literal notranslate"><span class="pre">test</span></code> 表中导入一个查询语句结果，并指定 partition 和 label</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>INSERT INTO test PARTITION(p1, p2) WITH LABEL `label1` SELECT * FROM test2;
INSERT INTO test WITH LABEL `label1` (c1, c2) SELECT * from test2;
</pre></div>
</div>
<p>异步的导入其实是，一个同步的导入封装成了异步。填写 streaming 和不填写的<strong>执行效率是一样</strong>的。</p>
<p>由于Doris之前的导入方式都是异步导入方式，为了兼容旧有的使用习惯，不加 streaming 的 <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> 语句依旧会返回一个 label，用户需要通过<code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">LOAD</span></code>命令查看此<code class="docutils literal notranslate"><span class="pre">label</span></code>导入作业的状态。</p>
</div>
<div class="section" id="keyword">
<h2>keyword<a class="headerlink" href="#keyword" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSERT</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Data Types/index.html" class="btn btn-neutral float-right" title="数据类型" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="STREAM LOAD.html" class="btn btn-neutral float-left" title="STREAM LOAD" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Apache Doris(Incubating)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
<div role="contentinfo">
    <p></p>
    <p>

        Apache Doris(incubating) is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.

    </p>
</div>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>