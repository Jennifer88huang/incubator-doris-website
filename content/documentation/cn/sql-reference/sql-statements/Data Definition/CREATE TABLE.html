

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CREATE TABLE &mdash; Doris Documentations 0.11.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="CREATE VIEW" href="CREATE VIEW.html" />
    <link rel="prev" title="CREATE REPOSITORY" href="CREATE REPOSITORY.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> Doris Documentations
          

          
          </a>

          
            
            
              <div class="version">
                0.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">中文</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../downloads/index.html">下载</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installing/index.html">编译与部署</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting-started/index.html">开始使用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../administrator-guide/index.html">操作手册</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../extending-doris/index.html">扩展功能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../internal/index.html">设计文档</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">SQL 手册</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../sql-functions/index.html">SQL 函数</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">语法帮助</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../Account Management/index.html">用户账户管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Administration/index.html">集群管理</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">DDL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Data Manipulation/index.html">DML</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Data Types/index.html">数据类型</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Utility/index.html">辅助命令</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../developer-guide/index.html">开发者手册</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../community/index.html">Apache 社区</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../en/index.html">English</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Doris Documentations</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">中文</a> &raquo;</li>
        
          <li><a href="../../index.html">SQL 手册</a> &raquo;</li>
        
          <li><a href="../index.html">语法帮助</a> &raquo;</li>
        
          <li><a href="index.html">DDL</a> &raquo;</li>
        
      <li>CREATE TABLE</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/apache/incubator-doris/blob/master/docs/documentation/cn/sql-reference/sql-statements/Data Definition/CREATE TABLE.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <!-- 
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
--><div class="section" id="create-table">
<h1>CREATE TABLE<a class="headerlink" href="#create-table" title="Permalink to this headline">¶</a></h1>
<div class="section" id="description">
<h2>description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>该语句用于创建 table。
语法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">CREATE</span> <span class="p">[</span><span class="n">EXTERNAL</span><span class="p">]</span> <span class="n">TABLE</span> <span class="p">[</span><span class="n">IF</span> <span class="n">NOT</span> <span class="n">EXISTS</span><span class="p">]</span> <span class="p">[</span><span class="n">database</span><span class="o">.</span><span class="p">]</span><span class="n">table_name</span>
    <span class="p">(</span><span class="n">column_definition1</span><span class="p">[,</span> <span class="n">column_definition2</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
    <span class="p">[,</span> <span class="n">index_definition1</span><span class="p">[,</span> <span class="n">ndex_definition12</span><span class="p">,]])</span>
    <span class="p">[</span><span class="n">ENGINE</span> <span class="o">=</span> <span class="p">[</span><span class="n">olap</span><span class="o">|</span><span class="n">mysql</span><span class="o">|</span><span class="n">broker</span><span class="p">]]</span>
    <span class="p">[</span><span class="n">key_desc</span><span class="p">]</span>
    <span class="p">[</span><span class="n">COMMENT</span> <span class="s2">&quot;table comment&quot;</span><span class="p">];</span>
    <span class="p">[</span><span class="n">partition_desc</span><span class="p">]</span>
    <span class="p">[</span><span class="n">distribution_desc</span><span class="p">]</span>
    <span class="p">[</span><span class="n">rollup_index</span><span class="p">]</span>
    <span class="p">[</span><span class="n">PROPERTIES</span> <span class="p">(</span><span class="s2">&quot;key&quot;</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)]</span>
    <span class="p">[</span><span class="n">BROKER</span> <span class="n">PROPERTIES</span> <span class="p">(</span><span class="s2">&quot;key&quot;</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)]</span>
</pre></div>
</div>
<ol>
<li><p class="first">column_definition
语法：
<code class="docutils literal notranslate"><span class="pre">col_name</span> <span class="pre">col_type</span> <span class="pre">[agg_type]</span> <span class="pre">[NULL</span> <span class="pre">|</span> <span class="pre">NOT</span> <span class="pre">NULL]</span> <span class="pre">[DEFAULT</span> <span class="pre">&quot;default_value&quot;]</span></code></p>
<p>说明：
col_name：列名称
col_type：列类型</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    TINYINT（1字节）
        范围：-2^7 + 1 ~ 2^7 - 1
    SMALLINT（2字节）
        范围：-2^15 + 1 ~ 2^15 - 1
    INT（4字节）
        范围：-2^31 + 1 ~ 2^31 - 1
    BIGINT（8字节）
        范围：-2^63 + 1 ~ 2^63 - 1
    LARGEINT（16字节）
        范围：-2^127 + 1 ~ 2^127 - 1
    FLOAT（4字节）
        支持科学计数法
    DOUBLE（12字节）
        支持科学计数法
    DECIMAL[(precision, scale)] (16字节)
        保证精度的小数类型。默认是 DECIMAL(10, 0)
        precision: 1 ~ 27
        scale: 0 ~ 9
        其中整数部分为 1 ~ 18
        不支持科学计数法
    DATE（3字节）
        范围：0000-01-01 ~ 9999-12-31
    DATETIME（8字节）
        范围：0000-01-01 00:00:00 ~ 9999-12-31 23:59:59
    CHAR[(length)]
        定长字符串。长度范围：1 ~ 255。默认为1
    VARCHAR[(length)]
        变长字符串。长度范围：1 ~ 65533
    HLL (1~16385个字节)
        hll列类型，不需要指定长度和默认值、长度根据数据的聚合
        程度系统内控制，并且HLL列只能通过配套的hll_union_agg、Hll_cardinality、hll_hash进行查询或使用
    BITMAP
        bitmap列类型，不需要指定长度和默认值。表示整型的集合，元素最大支持到2^64 - 1
</pre></div>
</div>
<p>agg_type：聚合类型，如果不指定，则该列为 key 列。否则，该列为 value 列
* SUM、MAX、MIN、REPLACE
* HLL_UNION(仅用于HLL列，为HLL独有的聚合方式)、
* BITMAP_UNION(仅用于 BITMAP 列，为 BITMAP 独有的聚合方式)、
* REPLACE_IF_NOT_NULL：这个聚合类型的含义是当且仅当新导入数据是非NULL值时会发生替换行为，如果新导入的数据是NULL，那么Doris仍然会保留原值。注意：如果用在建表时REPLACE_IF_NOT_NULL列指定了NOT NULL，那么Doris仍然会将其转化NULL，不会向用户报错。用户可以借助这个类型完成部分列导入的功能。
* 该类型只对聚合模型(key_desc的type为AGGREGATE KEY)有用，其它模型不需要指这个。</p>
<p>是否允许为NULL: 默认不允许为 NULL。NULL 值在导入数据中用 \N 来表示</p>
<p>注意：
BITMAP_UNION聚合类型列在导入时的原始数据类型必须是TINYINT,SMALLINT,INT,BIGINT。</p>
</li>
<li><p class="first">index_definition
语法：
<code class="docutils literal notranslate"><span class="pre">INDEX</span> <span class="pre">index_name</span> <span class="pre">(col_name[,</span> <span class="pre">col_name,</span> <span class="pre">...])</span> <span class="pre">[USING</span> <span class="pre">BITMAP]</span> <span class="pre">COMMENT</span> <span class="pre">'xxxxxx'</span></code>
说明：
index_name：索引名称
col_name：列名
注意：
当前仅支持BITMAP索引， BITMAP索引仅支持应用于单列</p>
</li>
<li><p class="first">ENGINE 类型
默认为 olap。可选 mysql, broker</p>
<ol class="simple">
<li>如果是 mysql，则需要在 properties 提供以下信息：</li>
</ol>
</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">PROPERTIES</span> <span class="p">(</span>
        <span class="s2">&quot;host&quot;</span> <span class="o">=</span> <span class="s2">&quot;mysql_server_host&quot;</span><span class="p">,</span>
        <span class="s2">&quot;port&quot;</span> <span class="o">=</span> <span class="s2">&quot;mysql_server_port&quot;</span><span class="p">,</span>
        <span class="s2">&quot;user&quot;</span> <span class="o">=</span> <span class="s2">&quot;your_user_name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;password&quot;</span> <span class="o">=</span> <span class="s2">&quot;your_password&quot;</span><span class="p">,</span>
        <span class="s2">&quot;database&quot;</span> <span class="o">=</span> <span class="s2">&quot;database_name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;table&quot;</span> <span class="o">=</span> <span class="s2">&quot;table_name&quot;</span>
        <span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>注意：
    &quot;table&quot; 条目中的 &quot;table_name&quot; 是 mysql 中的真实表名。
    而 CREATE TABLE 语句中的 table_name 是该 mysql 表在 Palo 中的名字，可以不同。

在 Palo 创建 mysql 表的目的是可以通过 Palo 访问 mysql 数据库。
    而 Palo 本身并不维护、存储任何 mysql 数据。
1) 如果是 broker，表示表的访问需要通过指定的broker, 需要在 properties 提供以下信息：
    ```
    PROPERTIES (
    &quot;broker_name&quot; = &quot;broker_name&quot;,
    &quot;path&quot; = &quot;file_path1[,file_path2]&quot;,
    &quot;column_separator&quot; = &quot;value_separator&quot;
    &quot;line_delimiter&quot; = &quot;value_delimiter&quot;
    )
    ```
    另外还需要提供Broker需要的Property信息，通过BROKER PROPERTIES来传递，例如HDFS需要传入
    ```
    BROKER PROPERTIES(
        &quot;username&quot; = &quot;name&quot;,
        &quot;password&quot; = &quot;password&quot;
    )
    ```
    这个根据不同的Broker类型，需要传入的内容也不相同
注意：
    &quot;path&quot; 中如果有多个文件，用逗号[,]分割。如果文件名中包含逗号，那么使用 %2c 来替代。如果文件名中包含 %，使用 %25 代替
    现在文件内容格式支持CSV，支持GZ，BZ2，LZ4，LZO(LZOP) 压缩格式。
</pre></div>
</div>
<ol>
<li><p class="first">key_desc
语法：
<code class="docutils literal notranslate"><span class="pre">key_type(k1[,k2</span> <span class="pre">...])</span></code>
说明：
数据按照指定的key列进行排序，且根据不同的key_type具有不同特性。
key_type支持一下类型：
AGGREGATE KEY:key列相同的记录，value列按照指定的聚合类型进行聚合，
适合报表、多维分析等业务场景。
UNIQUE KEY:key列相同的记录，value列按导入顺序进行覆盖，
适合按key列进行增删改查的点查询业务。
DUPLICATE KEY:key列相同的记录，同时存在于Palo中，
适合存储明细数据或者数据无聚合特性的业务场景。
默认为DUPLICATE KEY，key列为列定义中前36个字节, 如果前36个字节的列数小于3，将使用前三列。
注意：
除AGGREGATE KEY外，其他key_type在建表时，value列不需要指定聚合类型。</p>
</li>
<li><p class="first">partition_desc
partition描述有两种使用方式</p>
<ol>
<li><p class="first">LESS THAN
语法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">PARTITION</span> <span class="n">BY</span> <span class="n">RANGE</span> <span class="p">(</span><span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
    <span class="p">(</span>
    <span class="n">PARTITION</span> <span class="n">partition_name1</span> <span class="n">VALUES</span> <span class="n">LESS</span> <span class="n">THAN</span> <span class="n">MAXVALUE</span><span class="o">|</span><span class="p">(</span><span class="s2">&quot;value1&quot;</span><span class="p">,</span> <span class="s2">&quot;value2&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">),</span>
    <span class="n">PARTITION</span> <span class="n">partition_name2</span> <span class="n">VALUES</span> <span class="n">LESS</span> <span class="n">THAN</span> <span class="n">MAXVALUE</span><span class="o">|</span><span class="p">(</span><span class="s2">&quot;value1&quot;</span><span class="p">,</span> <span class="s2">&quot;value2&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
    <span class="o">...</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>说明：
使用指定的 key 列和指定的数值范围进行分区。
1) 分区名称仅支持字母开头，字母、数字和下划线组成
2) 目前仅支持以下类型的列作为 Range 分区列，且只能指定一个分区列
TINYINT, SMALLINT, INT, BIGINT, LARGEINT, DATE, DATETIME
3) 分区为左闭右开区间，首个分区的左边界为做最小值
4) NULL 值只会存放在包含最小值的分区中。当包含最小值的分区被删除后，NULL 值将无法导入。
5) 可以指定一列或多列作为分区列。如果分区值缺省，则会默认填充最小值。</p>
<p>注意：
1) 分区一般用于时间维度的数据管理
2) 有数据回溯需求的，可以考虑首个分区为空分区，以便后续增加分区</p>
</li>
</ol>
<p>2）Fixed Range
语法：
<code class="docutils literal notranslate"><span class="pre">PARTITION</span> <span class="pre">BY</span> <span class="pre">RANGE</span> <span class="pre">(k1,</span> <span class="pre">k2,</span> <span class="pre">k3,</span> <span class="pre">...)</span> <span class="pre">(</span> <span class="pre">PARTITION</span> <span class="pre">partition_name1</span> <span class="pre">VALUES</span> <span class="pre">[(&quot;k1-lower1&quot;,</span> <span class="pre">&quot;k2-lower1&quot;,</span> <span class="pre">&quot;k3-lower1&quot;,...),</span> <span class="pre">(&quot;k1-upper1&quot;,</span> <span class="pre">&quot;k2-upper1&quot;,</span> <span class="pre">&quot;k3-upper1&quot;,</span> <span class="pre">...)),</span> <span class="pre">PARTITION</span> <span class="pre">partition_name2</span> <span class="pre">VALUES</span> <span class="pre">[(&quot;k1-lower1-2&quot;,</span> <span class="pre">&quot;k2-lower1-2&quot;,</span> <span class="pre">...),</span> <span class="pre">(&quot;k1-upper1-2&quot;,</span> <span class="pre">MAXVALUE,</span> <span class="pre">))</span> <span class="pre">&quot;k3-upper1-2&quot;,</span> <span class="pre">...</span> <span class="pre">)</span></code>
说明：
1）Fixed Range比LESS THAN相对灵活些，左右区间完全由用户自己确定
2）其他与LESS THAN保持同步</p>
</li>
<li><p class="first">distribution_desc
1) Hash 分桶
语法：
<code class="docutils literal notranslate"><span class="pre">DISTRIBUTED</span> <span class="pre">BY</span> <span class="pre">HASH</span> <span class="pre">(k1[,k2</span> <span class="pre">...])</span> <span class="pre">[BUCKETS</span> <span class="pre">num]</span></code>
说明：
使用指定的 key 列进行哈希分桶。默认分区数为10</p>
<p>建议:建议使用Hash分桶方式</p>
</li>
<li><p class="first">PROPERTIES</p>
<ol class="simple">
<li>如果 ENGINE 类型为 olap
可以在 properties 设置该表数据的初始存储介质、存储到期时间和副本数。</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="n">PROPERTIES</span> <span class="p">(</span>
       <span class="s2">&quot;storage_medium&quot;</span> <span class="o">=</span> <span class="s2">&quot;[SSD|HDD]&quot;</span><span class="p">,</span>
       <span class="p">[</span><span class="s2">&quot;storage_cooldown_time&quot;</span> <span class="o">=</span> <span class="s2">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="p">],</span>
       <span class="p">[</span><span class="s2">&quot;replication_num&quot;</span> <span class="o">=</span> <span class="s2">&quot;3&quot;</span><span class="p">]</span>
       <span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>storage_medium：        用于指定该分区的初始存储介质，可选择 SSD 或 HDD。默认初始存储介质可通过fe的配置文件 `fe.conf` 中指定 `default_storage_medium=xxx`，如果没有指定，则默认为 HDD。
    storage_cooldown_time： 当设置存储介质为 SSD 时，指定该分区在 SSD 上的存储到期时间。
                            默认存放 30 天。
                            格式为：&quot;yyyy-MM-dd HH:mm:ss&quot;
    replication_num:        指定分区的副本数。默认为 3

当表为单分区表时，这些属性为表的属性。
    当表为两级分区时，这些属性为附属于每一个分区。
    如果希望不同分区有不同属性。可以通过 ADD PARTITION 或 MODIFY PARTITION 进行操作
</pre></div>
</div>
<p>2 如果 Engine 类型为 olap, 可以指定某列使用 bloom filter 索引
bloom filter 索引仅适用于查询条件为 in 和 equal 的情况，该列的值越分散效果越好
目前只支持以下情况的列:除了 TINYINT FLOAT DOUBLE 类型以外的 key 列及聚合方法为 REPLACE 的 value 列</p>
</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>       <span class="n">PROPERTIES</span> <span class="p">(</span>
           <span class="s2">&quot;bloom_filter_columns&quot;</span><span class="o">=</span><span class="s2">&quot;k1,k2,k3&quot;</span>
           <span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>3) 如果希望使用 Colocate Join 特性，需要在 properties 中指定
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>       <span class="n">PROPERTIES</span> <span class="p">(</span>
           <span class="s2">&quot;colocate_with&quot;</span><span class="o">=</span><span class="s2">&quot;table1&quot;</span>
           <span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>4) 如果希望使用动态分区特性，需要在properties 中指定
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>      <span class="n">PROPERTIES</span> <span class="p">(</span>
          <span class="s2">&quot;dynamic_partition.enable&quot;</span> <span class="o">=</span> <span class="s2">&quot;true|false&quot;</span><span class="p">,</span>
          <span class="s2">&quot;dynamic_partition.time_unit&quot;</span> <span class="o">=</span> <span class="s2">&quot;DAY|WEEK|MONTH&quot;</span><span class="p">,</span>
          <span class="s2">&quot;dynamic_partition.start&quot;</span> <span class="o">=</span> <span class="s2">&quot;$</span><span class="si">{integer_value}</span><span class="s2">&quot;</span><span class="p">,</span>
          <span class="s2">&quot;dynamic_partitoin.end&quot;</span> <span class="o">=</span> <span class="s2">&quot;$</span><span class="si">{integer_value}</span><span class="s2">&quot;</span><span class="p">,</span>
          <span class="s2">&quot;dynamic_partition.prefix&quot;</span> <span class="o">=</span> <span class="s2">&quot;$</span><span class="si">{string_value}</span><span class="s2">&quot;</span><span class="p">,</span>
          <span class="s2">&quot;dynamic_partition.buckets&quot;</span> <span class="o">=</span> <span class="s2">&quot;$</span><span class="si">{integer_value}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>dynamic_partition.enable: 用于指定表级别的动态分区功能是否开启。默认为 true。
dynamic_partition.time_unit: 用于指定动态添加分区的时间单位，可选择为DAY（天），WEEK(周)，MONTH（月）
dynamic_partition.start: 用于指定向前删除多少个分区。值必须小于0。默认为 Integer.MIN_VALUE。
dynamic_partition.end: 用于指定提前创建的分区数量。值必须大于0。
dynamic_partition.prefix: 用于指定创建的分区名前缀，例如分区名前缀为p，则自动创建分区名为p20200108
dynamic_partition.buckets: 用于指定自动创建的分区分桶数量

5) 建表时可以批量创建多个 Rollup
语法：
```
    ROLLUP (rollup_name (column_name1, column_name2, ...)
           [FROM from_index_name]
            [PROPERTIES (&quot;key&quot;=&quot;value&quot;, ...)],...)
```

6) 如果希望使用 内存表 特性，需要在 properties 中指定
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>        <span class="n">PROPERTIES</span> <span class="p">(</span>
           <span class="s2">&quot;in_memory&quot;</span><span class="o">=</span><span class="s2">&quot;true&quot;</span>
        <span class="p">)</span>   
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>当 in_memory 属性为 true 时，Doris会尽可能将该表的数据和索引Cache到BE 内存中
</pre></div>
</div>
</div>
<div class="section" id="example">
<h2>example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<ol>
<li><p class="first">创建一个 olap 表，使用 HASH 分桶，使用列存，相同key的记录进行聚合</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">table_hash</span>
<span class="p">(</span>
<span class="n">k1</span> <span class="n">TINYINT</span><span class="p">,</span>
<span class="n">k2</span> <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="n">DEFAULT</span> <span class="s2">&quot;10.5&quot;</span><span class="p">,</span>
<span class="n">v1</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="n">REPLACE</span><span class="p">,</span>
<span class="n">v2</span> <span class="n">INT</span> <span class="n">SUM</span>
<span class="p">)</span>
<span class="n">ENGINE</span><span class="o">=</span><span class="n">olap</span>
<span class="n">AGGREGATE</span> <span class="n">KEY</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">)</span>
<span class="n">COMMENT</span> <span class="s2">&quot;my first doris table&quot;</span>
<span class="n">DISTRIBUTED</span> <span class="n">BY</span> <span class="n">HASH</span><span class="p">(</span><span class="n">k1</span><span class="p">)</span> <span class="n">BUCKETS</span> <span class="mi">32</span>
<span class="n">PROPERTIES</span> <span class="p">(</span><span class="s2">&quot;storage_type&quot;</span><span class="o">=</span><span class="s2">&quot;column&quot;</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p class="first">创建一个 olap 表，使用 Hash 分桶，使用列存，相同key的记录进行覆盖，
设置初始存储介质和冷却时间</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> CREATE TABLE example_db.table_hash
 (
 k1 BIGINT,
 k2 LARGEINT,
 v1 VARCHAR(2048) REPLACE,
 v2 SMALLINT SUM DEFAULT &quot;10&quot;
 )
 ENGINE=olap
 UNIQUE KEY(k1, k2)
 DISTRIBUTED BY HASH (k1, k2) BUCKETS 32
 PROPERTIES(
 &quot;storage_type&quot;=&quot;column&quot;，
 &quot;storage_medium&quot; = &quot;SSD&quot;,
 &quot;storage_cooldown_time&quot; = &quot;2015-06-04 00:00:00&quot;
 );
</pre></div>
</div>
</li>
<li><p class="first">创建一个 olap 表，使用 Range 分区，使用Hash分桶，默认使用列存，
相同key的记录同时存在，设置初始存储介质和冷却时间</p>
<p>1）LESS THAN</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">table_range</span>
<span class="p">(</span>
<span class="n">k1</span> <span class="n">DATE</span><span class="p">,</span>
<span class="n">k2</span> <span class="n">INT</span><span class="p">,</span>
<span class="n">k3</span> <span class="n">SMALLINT</span><span class="p">,</span>
<span class="n">v1</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">2048</span><span class="p">),</span>
<span class="n">v2</span> <span class="n">DATETIME</span> <span class="n">DEFAULT</span> <span class="s2">&quot;2014-02-04 15:36:00&quot;</span>
<span class="p">)</span>
<span class="n">ENGINE</span><span class="o">=</span><span class="n">olap</span>
<span class="n">DUPLICATE</span> <span class="n">KEY</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">)</span>
<span class="n">PARTITION</span> <span class="n">BY</span> <span class="n">RANGE</span> <span class="p">(</span><span class="n">k1</span><span class="p">)</span>
<span class="p">(</span>
<span class="n">PARTITION</span> <span class="n">p1</span> <span class="n">VALUES</span> <span class="n">LESS</span> <span class="n">THAN</span> <span class="p">(</span><span class="s2">&quot;2014-01-01&quot;</span><span class="p">),</span>
<span class="n">PARTITION</span> <span class="n">p2</span> <span class="n">VALUES</span> <span class="n">LESS</span> <span class="n">THAN</span> <span class="p">(</span><span class="s2">&quot;2014-06-01&quot;</span><span class="p">),</span>
<span class="n">PARTITION</span> <span class="n">p3</span> <span class="n">VALUES</span> <span class="n">LESS</span> <span class="n">THAN</span> <span class="p">(</span><span class="s2">&quot;2014-12-01&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">DISTRIBUTED</span> <span class="n">BY</span> <span class="n">HASH</span><span class="p">(</span><span class="n">k2</span><span class="p">)</span> <span class="n">BUCKETS</span> <span class="mi">32</span>
<span class="n">PROPERTIES</span><span class="p">(</span>
<span class="s2">&quot;storage_medium&quot;</span> <span class="o">=</span> <span class="s2">&quot;SSD&quot;</span><span class="p">,</span> <span class="s2">&quot;storage_cooldown_time&quot;</span> <span class="o">=</span> <span class="s2">&quot;2015-06-04 00:00:00&quot;</span>
<span class="p">);</span>
</pre></div>
</div>
<p>说明：
这个语句会将数据划分成如下3个分区：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span> <span class="p">{</span>    <span class="n">MIN</span>     <span class="p">},</span>   <span class="p">{</span><span class="s2">&quot;2014-01-01&quot;</span><span class="p">}</span> <span class="p">)</span>
<span class="p">[</span> <span class="p">{</span><span class="s2">&quot;2014-01-01&quot;</span><span class="p">},</span>   <span class="p">{</span><span class="s2">&quot;2014-06-01&quot;</span><span class="p">}</span> <span class="p">)</span>
<span class="p">[</span> <span class="p">{</span><span class="s2">&quot;2014-06-01&quot;</span><span class="p">},</span>   <span class="p">{</span><span class="s2">&quot;2014-12-01&quot;</span><span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
<p>不在这些分区范围内的数据将视为非法数据被过滤</p>
<ol class="simple">
<li>Fixed Range</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">table_range</span>
<span class="p">(</span>
<span class="n">k1</span> <span class="n">DATE</span><span class="p">,</span>
<span class="n">k2</span> <span class="n">INT</span><span class="p">,</span>
<span class="n">k3</span> <span class="n">SMALLINT</span><span class="p">,</span>
<span class="n">v1</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">2048</span><span class="p">),</span>
<span class="n">v2</span> <span class="n">DATETIME</span> <span class="n">DEFAULT</span> <span class="s2">&quot;2014-02-04 15:36:00&quot;</span>
<span class="p">)</span>
<span class="n">ENGINE</span><span class="o">=</span><span class="n">olap</span>
<span class="n">DUPLICATE</span> <span class="n">KEY</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">)</span>
<span class="n">PARTITION</span> <span class="n">BY</span> <span class="n">RANGE</span> <span class="p">(</span><span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">)</span>
<span class="p">(</span>
<span class="n">PARTITION</span> <span class="n">p1</span> <span class="n">VALUES</span> <span class="p">[(</span><span class="s2">&quot;2014-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="s2">&quot;200&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;2014-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;20&quot;</span><span class="p">,</span> <span class="s2">&quot;300&quot;</span><span class="p">)),</span>
<span class="n">PARTITION</span> <span class="n">p2</span> <span class="n">VALUES</span> <span class="p">[(</span><span class="s2">&quot;2014-06-01&quot;</span><span class="p">,</span> <span class="s2">&quot;100&quot;</span><span class="p">,</span> <span class="s2">&quot;200&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;2014-07-01&quot;</span><span class="p">,</span> <span class="s2">&quot;100&quot;</span><span class="p">,</span> <span class="s2">&quot;300&quot;</span><span class="p">))</span>
<span class="p">)</span>
<span class="n">DISTRIBUTED</span> <span class="n">BY</span> <span class="n">HASH</span><span class="p">(</span><span class="n">k2</span><span class="p">)</span> <span class="n">BUCKETS</span> <span class="mi">32</span>
<span class="n">PROPERTIES</span><span class="p">(</span>
<span class="s2">&quot;storage_medium&quot;</span> <span class="o">=</span> <span class="s2">&quot;SSD&quot;</span>
<span class="p">);</span>
</pre></div>
</div>
</li>
<li><p class="first">创建一个 mysql 表</p>
</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">table_mysql</span>
    <span class="p">(</span>
    <span class="n">k1</span> <span class="n">DATE</span><span class="p">,</span>
    <span class="n">k2</span> <span class="n">INT</span><span class="p">,</span>
    <span class="n">k3</span> <span class="n">SMALLINT</span><span class="p">,</span>
    <span class="n">k4</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">2048</span><span class="p">),</span>
    <span class="n">k5</span> <span class="n">DATETIME</span>
    <span class="p">)</span>
    <span class="n">ENGINE</span><span class="o">=</span><span class="n">mysql</span>
    <span class="n">PROPERTIES</span>
    <span class="p">(</span>
    <span class="s2">&quot;host&quot;</span> <span class="o">=</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;port&quot;</span> <span class="o">=</span> <span class="s2">&quot;8239&quot;</span><span class="p">,</span>
    <span class="s2">&quot;user&quot;</span> <span class="o">=</span> <span class="s2">&quot;mysql_user&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span> <span class="o">=</span> <span class="s2">&quot;mysql_passwd&quot;</span><span class="p">,</span>
    <span class="s2">&quot;database&quot;</span> <span class="o">=</span> <span class="s2">&quot;mysql_db_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;table&quot;</span> <span class="o">=</span> <span class="s2">&quot;mysql_table_test&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
<ol class="simple">
<li>创建一个数据文件存储在HDFS上的 broker 外部表, 数据使用 “|” 分割，”\n” 换行</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">CREATE</span> <span class="n">EXTERNAL</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">table_broker</span> <span class="p">(</span>
    <span class="n">k1</span> <span class="n">DATE</span><span class="p">,</span>
    <span class="n">k2</span> <span class="n">INT</span><span class="p">,</span>
    <span class="n">k3</span> <span class="n">SMALLINT</span><span class="p">,</span>
    <span class="n">k4</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">2048</span><span class="p">),</span>
    <span class="n">k5</span> <span class="n">DATETIME</span>
    <span class="p">)</span>
    <span class="n">ENGINE</span><span class="o">=</span><span class="n">broker</span>
    <span class="n">PROPERTIES</span> <span class="p">(</span>
    <span class="s2">&quot;broker_name&quot;</span> <span class="o">=</span> <span class="s2">&quot;hdfs&quot;</span><span class="p">,</span>
    <span class="s2">&quot;path&quot;</span> <span class="o">=</span> <span class="s2">&quot;hdfs://hdfs_host:hdfs_port/data1,hdfs://hdfs_host:hdfs_port/data2,hdfs://hdfs_host:hdfs_port/data3</span><span class="si">%2c</span><span class="s2">4&quot;</span><span class="p">,</span>
    <span class="s2">&quot;column_separator&quot;</span> <span class="o">=</span> <span class="s2">&quot;|&quot;</span><span class="p">,</span>
    <span class="s2">&quot;line_delimiter&quot;</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="p">)</span>
    <span class="n">BROKER</span> <span class="n">PROPERTIES</span> <span class="p">(</span>
    <span class="s2">&quot;username&quot;</span> <span class="o">=</span> <span class="s2">&quot;hdfs_user&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span> <span class="o">=</span> <span class="s2">&quot;hdfs_password&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
<ol class="simple">
<li>创建一张含有HLL列的表</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">example_table</span>
    <span class="p">(</span>
    <span class="n">k1</span> <span class="n">TINYINT</span><span class="p">,</span>
    <span class="n">k2</span> <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="n">DEFAULT</span> <span class="s2">&quot;10.5&quot;</span><span class="p">,</span>
    <span class="n">v1</span> <span class="n">HLL</span> <span class="n">HLL_UNION</span><span class="p">,</span>
    <span class="n">v2</span> <span class="n">HLL</span> <span class="n">HLL_UNION</span>
    <span class="p">)</span>
    <span class="n">ENGINE</span><span class="o">=</span><span class="n">olap</span>
    <span class="n">AGGREGATE</span> <span class="n">KEY</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">)</span>
    <span class="n">DISTRIBUTED</span> <span class="n">BY</span> <span class="n">HASH</span><span class="p">(</span><span class="n">k1</span><span class="p">)</span> <span class="n">BUCKETS</span> <span class="mi">32</span>
    <span class="n">PROPERTIES</span> <span class="p">(</span><span class="s2">&quot;storage_type&quot;</span><span class="o">=</span><span class="s2">&quot;column&quot;</span><span class="p">);</span>
</pre></div>
</div>
<ol class="simple">
<li>创建一张含有BITMAP_UNION聚合类型的表（v1和v2列的原始数据类型必须是TINYINT,SMALLINT,INT）</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">example_table</span>
    <span class="p">(</span>
    <span class="n">k1</span> <span class="n">TINYINT</span><span class="p">,</span>
    <span class="n">k2</span> <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="n">DEFAULT</span> <span class="s2">&quot;10.5&quot;</span><span class="p">,</span>
    <span class="n">v1</span> <span class="n">BITMAP</span> <span class="n">BITMAP_UNION</span><span class="p">,</span>
    <span class="n">v2</span> <span class="n">BITMAP</span> <span class="n">BITMAP_UNION</span>
    <span class="p">)</span>
    <span class="n">ENGINE</span><span class="o">=</span><span class="n">olap</span>
    <span class="n">AGGREGATE</span> <span class="n">KEY</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">)</span>
    <span class="n">DISTRIBUTED</span> <span class="n">BY</span> <span class="n">HASH</span><span class="p">(</span><span class="n">k1</span><span class="p">)</span> <span class="n">BUCKETS</span> <span class="mi">32</span>
    <span class="n">PROPERTIES</span> <span class="p">(</span><span class="s2">&quot;storage_type&quot;</span><span class="o">=</span><span class="s2">&quot;column&quot;</span><span class="p">);</span>
</pre></div>
</div>
<ol class="simple">
<li>创建两张支持Colocat Join的表t1 和t2</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    CREATE TABLE `t1` (
    `id` int(11) COMMENT &quot;&quot;,
    `value` varchar(8) COMMENT &quot;&quot;
    ) ENGINE=OLAP
    DUPLICATE KEY(`id`)
    DISTRIBUTED BY HASH(`id`) BUCKETS 10
    PROPERTIES (
    &quot;colocate_with&quot; = &quot;t1&quot;
    );

    CREATE TABLE `t2` (
    `id` int(11) COMMENT &quot;&quot;,
    `value` varchar(8) COMMENT &quot;&quot;
    ) ENGINE=OLAP
    DUPLICATE KEY(`id`)
    DISTRIBUTED BY HASH(`id`) BUCKETS 10
    PROPERTIES (
    &quot;colocate_with&quot; = &quot;t1&quot;
    );
</pre></div>
</div>
<ol class="simple">
<li>创建一个数据文件存储在BOS上的 broker 外部表</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">CREATE</span> <span class="n">EXTERNAL</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">table_broker</span> <span class="p">(</span>
    <span class="n">k1</span> <span class="n">DATE</span>
    <span class="p">)</span>
    <span class="n">ENGINE</span><span class="o">=</span><span class="n">broker</span>
    <span class="n">PROPERTIES</span> <span class="p">(</span>
    <span class="s2">&quot;broker_name&quot;</span> <span class="o">=</span> <span class="s2">&quot;bos&quot;</span><span class="p">,</span>
    <span class="s2">&quot;path&quot;</span> <span class="o">=</span> <span class="s2">&quot;bos://my_bucket/input/file&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">BROKER</span> <span class="n">PROPERTIES</span> <span class="p">(</span>
      <span class="s2">&quot;bos_endpoint&quot;</span> <span class="o">=</span> <span class="s2">&quot;http://bj.bcebos.com&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bos_accesskey&quot;</span> <span class="o">=</span> <span class="s2">&quot;xxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bos_secret_accesskey&quot;</span><span class="o">=</span><span class="s2">&quot;yyyyyyyyyyyyyyyyyyyy&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
<ol class="simple">
<li>创建一个带有bitmap 索引的表</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">table_hash</span>
    <span class="p">(</span>
    <span class="n">k1</span> <span class="n">TINYINT</span><span class="p">,</span>
    <span class="n">k2</span> <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="n">DEFAULT</span> <span class="s2">&quot;10.5&quot;</span><span class="p">,</span>
    <span class="n">v1</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="n">REPLACE</span><span class="p">,</span>
    <span class="n">v2</span> <span class="n">INT</span> <span class="n">SUM</span><span class="p">,</span>
    <span class="n">INDEX</span> <span class="n">k1_idx</span> <span class="p">(</span><span class="n">k1</span><span class="p">)</span> <span class="n">USING</span> <span class="n">BITMAP</span> <span class="n">COMMENT</span> <span class="s1">&#39;xxxxxx&#39;</span>
    <span class="p">)</span>
    <span class="n">ENGINE</span><span class="o">=</span><span class="n">olap</span>
    <span class="n">AGGREGATE</span> <span class="n">KEY</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">)</span>
    <span class="n">COMMENT</span> <span class="s2">&quot;my first doris table&quot;</span>
    <span class="n">DISTRIBUTED</span> <span class="n">BY</span> <span class="n">HASH</span><span class="p">(</span><span class="n">k1</span><span class="p">)</span> <span class="n">BUCKETS</span> <span class="mi">32</span>
    <span class="n">PROPERTIES</span> <span class="p">(</span><span class="s2">&quot;storage_type&quot;</span><span class="o">=</span><span class="s2">&quot;column&quot;</span><span class="p">);</span>
</pre></div>
</div>
<ol class="simple">
<li>创建一个动态分区表(需要在FE配置中开启动态分区功能)，该表每天提前创建3天的分区，并删除3天前的分区。例如今天为<code class="docutils literal notranslate"><span class="pre">2020-01-08</span></code>，则会创建分区名为<code class="docutils literal notranslate"><span class="pre">p20200108</span></code>, <code class="docutils literal notranslate"><span class="pre">p20200109</span></code>, <code class="docutils literal notranslate"><span class="pre">p20200110</span></code>, <code class="docutils literal notranslate"><span class="pre">p20200111</span></code>的分区. 分区范围分别为:</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[types: [DATE]; keys: [2020-01-08]; ‥types: [DATE]; keys: [2020-01-09]; )
[types: [DATE]; keys: [2020-01-09]; ‥types: [DATE]; keys: [2020-01-10]; )
[types: [DATE]; keys: [2020-01-10]; ‥types: [DATE]; keys: [2020-01-11]; )
[types: [DATE]; keys: [2020-01-11]; ‥types: [DATE]; keys: [2020-01-12]; )
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">dynamic_partition</span>
    <span class="p">(</span>
    <span class="n">k1</span> <span class="n">DATE</span><span class="p">,</span>
    <span class="n">k2</span> <span class="n">INT</span><span class="p">,</span>
    <span class="n">k3</span> <span class="n">SMALLINT</span><span class="p">,</span>
    <span class="n">v1</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">2048</span><span class="p">),</span>
    <span class="n">v2</span> <span class="n">DATETIME</span> <span class="n">DEFAULT</span> <span class="s2">&quot;2014-02-04 15:36:00&quot;</span>
    <span class="p">)</span>
    <span class="n">ENGINE</span><span class="o">=</span><span class="n">olap</span>
    <span class="n">DUPLICATE</span> <span class="n">KEY</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">)</span>
    <span class="n">PARTITION</span> <span class="n">BY</span> <span class="n">RANGE</span> <span class="p">(</span><span class="n">k1</span><span class="p">)</span>
    <span class="p">(</span>
    <span class="n">PARTITION</span> <span class="n">p1</span> <span class="n">VALUES</span> <span class="n">LESS</span> <span class="n">THAN</span> <span class="p">(</span><span class="s2">&quot;2014-01-01&quot;</span><span class="p">),</span>
    <span class="n">PARTITION</span> <span class="n">p2</span> <span class="n">VALUES</span> <span class="n">LESS</span> <span class="n">THAN</span> <span class="p">(</span><span class="s2">&quot;2014-06-01&quot;</span><span class="p">),</span>
    <span class="n">PARTITION</span> <span class="n">p3</span> <span class="n">VALUES</span> <span class="n">LESS</span> <span class="n">THAN</span> <span class="p">(</span><span class="s2">&quot;2014-12-01&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">DISTRIBUTED</span> <span class="n">BY</span> <span class="n">HASH</span><span class="p">(</span><span class="n">k2</span><span class="p">)</span> <span class="n">BUCKETS</span> <span class="mi">32</span>
    <span class="n">PROPERTIES</span><span class="p">(</span>
    <span class="s2">&quot;storage_medium&quot;</span> <span class="o">=</span> <span class="s2">&quot;SSD&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dynamic_partition.time_unit&quot;</span> <span class="o">=</span> <span class="s2">&quot;DAY&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dynamic_partition.start&quot;</span> <span class="o">=</span> <span class="s2">&quot;-3&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dynamic_partition.end&quot;</span> <span class="o">=</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dynamic_partition.prefix&quot;</span> <span class="o">=</span> <span class="s2">&quot;p&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dynamic_partition.buckets&quot;</span> <span class="o">=</span> <span class="s2">&quot;32&quot;</span>
     <span class="p">);</span>
</pre></div>
</div>
<ol class="simple">
<li>Create a table with rollup index</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">rolup_index_table</span>
    <span class="p">(</span>
        <span class="n">event_day</span> <span class="n">DATE</span><span class="p">,</span>
        <span class="n">siteid</span> <span class="n">INT</span> <span class="n">DEFAULT</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span>
        <span class="n">citycode</span> <span class="n">SMALLINT</span><span class="p">,</span>
        <span class="n">username</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">DEFAULT</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="n">pv</span> <span class="n">BIGINT</span> <span class="n">SUM</span> <span class="n">DEFAULT</span> <span class="s1">&#39;0&#39;</span>
    <span class="p">)</span>
    <span class="n">AGGREGATE</span> <span class="n">KEY</span><span class="p">(</span><span class="n">event_day</span><span class="p">,</span> <span class="n">siteid</span><span class="p">,</span> <span class="n">citycode</span><span class="p">,</span> <span class="n">username</span><span class="p">)</span>
    <span class="n">DISTRIBUTED</span> <span class="n">BY</span> <span class="n">HASH</span><span class="p">(</span><span class="n">siteid</span><span class="p">)</span> <span class="n">BUCKETS</span> <span class="mi">10</span>
    <span class="n">rollup</span> <span class="p">(</span>
    <span class="n">r1</span><span class="p">(</span><span class="n">event_day</span><span class="p">,</span><span class="n">siteid</span><span class="p">),</span>
    <span class="n">r2</span><span class="p">(</span><span class="n">event_day</span><span class="p">,</span><span class="n">citycode</span><span class="p">),</span>
    <span class="n">r3</span><span class="p">(</span><span class="n">event_day</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">PROPERTIES</span><span class="p">(</span><span class="s2">&quot;replication_num&quot;</span> <span class="o">=</span> <span class="s2">&quot;3&quot;</span><span class="p">);</span>
    
<span class="mf">13.</span> <span class="n">创建一个内存表</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">example_db</span><span class="o">.</span><span class="n">table_hash</span>
<span class="p">(</span>
<span class="n">k1</span> <span class="n">TINYINT</span><span class="p">,</span>
<span class="n">k2</span> <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="n">DEFAULT</span> <span class="s2">&quot;10.5&quot;</span><span class="p">,</span>
<span class="n">v1</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="n">REPLACE</span><span class="p">,</span>
<span class="n">v2</span> <span class="n">INT</span> <span class="n">SUM</span><span class="p">,</span>
<span class="n">INDEX</span> <span class="n">k1_idx</span> <span class="p">(</span><span class="n">k1</span><span class="p">)</span> <span class="n">USING</span> <span class="n">BITMAP</span> <span class="n">COMMENT</span> <span class="s1">&#39;xxxxxx&#39;</span>
<span class="p">)</span>
<span class="n">ENGINE</span><span class="o">=</span><span class="n">olap</span>
<span class="n">AGGREGATE</span> <span class="n">KEY</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">)</span>
<span class="n">COMMENT</span> <span class="s2">&quot;my first doris table&quot;</span>
<span class="n">DISTRIBUTED</span> <span class="n">BY</span> <span class="n">HASH</span><span class="p">(</span><span class="n">k1</span><span class="p">)</span> <span class="n">BUCKETS</span> <span class="mi">32</span>
<span class="n">PROPERTIES</span> <span class="p">(</span><span class="s2">&quot;in_memory&quot;</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">## keyword</span>

    <span class="n">CREATE</span><span class="p">,</span><span class="n">TABLE</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="CREATE VIEW.html" class="btn btn-neutral float-right" title="CREATE VIEW" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="CREATE REPOSITORY.html" class="btn btn-neutral float-left" title="CREATE REPOSITORY" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Apache Doris(Incubating)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
<div role="contentinfo">
    <p></p>
    <p>

        Apache Doris(incubating) is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.

    </p>
</div>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>