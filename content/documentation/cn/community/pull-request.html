

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>代码提交指南 &mdash; Doris Documentations 0.11.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Apache Doris 发布流程" href="release-process.html" />
    <link rel="prev" title="PMC Members &amp; Committer" href="members.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Doris Documentations
          

          
          </a>

          
            
            
              <div class="version">
                0.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">中文</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../installing/index.html">编译与部署</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/index.html">开始使用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../administrator-guide/index.html">操作手册</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending-doris/index.html">扩展功能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal/index.html">设计文档</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql-reference/index.html">SQL 手册</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer-guide/index.html">开发者手册</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Apache 社区</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="gitter.html">Gitter 使用指南</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-contribute.html">为 Doris 做贡献</a></li>
<li class="toctree-l3"><a class="reference internal" href="members.html">PMC Members &amp; Committer</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">代码提交指南</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fork">1. Fork仓库</a></li>
<li class="toctree-l4"><a class="reference internal" href="#git">2. 配置git和提交修改</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pr">3. 创建PR</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">4. 冲突解决</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">5. 一个例子</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="release-process.html">Apache Doris 发布流程</a></li>
<li class="toctree-l3"><a class="reference internal" href="subscribe-mail-list.html">订阅邮件列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="verify-apache-release.html">Verify Apache Release</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../en/index.html">English</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Doris Documentations</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">中文</a> &raquo;</li>
        
          <li><a href="index.html">Apache 社区</a> &raquo;</li>
        
      <li>代码提交指南</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/apache/incubator-doris/blob/master/docs/documentation/cn/community/pull-request.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>代码提交指南<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>在 <a class="reference external" href="https://github.com/apache/incubator-doris">Github</a> 上面可以很方便地提交 <a class="reference external" href="https://help.github.com/articles/about-pull-requests/">Pull Request (PR)</a>，下面介绍 Doris 项目的 PR 方法。</p>
<div class="section" id="fork">
<h2>1. Fork仓库<a class="headerlink" href="#fork" title="Permalink to this headline">¶</a></h2>
<p>进入 apache/incubator-doris 的 <a class="reference external" href="https://github.com/apache/incubator-doris">github 页面</a> ，点击右上角按钮 <code class="docutils literal notranslate"><span class="pre">Fork</span></code> 进行 Fork。</p>
<p><img alt="../../../_images/fork-repo.png" src="../../../_images/fork-repo.png" />Fork</p>
</div>
<div class="section" id="git">
<h2>2. 配置git和提交修改<a class="headerlink" href="#git" title="Permalink to this headline">¶</a></h2>
<p>####（1）将代码克隆到本地：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/&lt;</span><span class="n">your_github_name</span><span class="o">&gt;/</span><span class="n">incubator</span><span class="o">-</span><span class="n">doris</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>注意：请将 &lt;your_github_name&gt; 替换为您的 github 名字。</p>
<p>clone 完成后，origin 会默认指向 github 上的远程 fork 地址。</p>
<p>####（2）将 apache/incubator-doris 添加为本地仓库的远程分支 upstream：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span>  <span class="n">incubator</span><span class="o">-</span><span class="n">doris</span>
<span class="n">git</span> <span class="n">remote</span> <span class="n">add</span> <span class="n">upstream</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">apache</span><span class="o">/</span><span class="n">incubator</span><span class="o">-</span><span class="n">doris</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>####（3）检查远程仓库设置：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">remote</span> <span class="o">-</span><span class="n">v</span>
<span class="n">origin</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/&lt;</span><span class="n">your_github_name</span><span class="o">&gt;/</span><span class="n">incubator</span><span class="o">-</span><span class="n">doris</span><span class="o">.</span><span class="n">git</span> <span class="p">(</span><span class="n">fetch</span><span class="p">)</span>
<span class="n">origin</span>    <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/&lt;</span><span class="n">your_github_name</span><span class="o">&gt;/</span><span class="n">incubator</span><span class="o">-</span><span class="n">doris</span><span class="o">.</span><span class="n">git</span> <span class="p">(</span><span class="n">push</span><span class="p">)</span>
<span class="n">upstream</span>  <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">apache</span><span class="o">/</span><span class="n">incubator</span><span class="o">-</span><span class="n">doris</span><span class="o">.</span><span class="n">git</span> <span class="p">(</span><span class="n">fetch</span><span class="p">)</span>
<span class="n">upstream</span>  <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">apache</span><span class="o">/</span><span class="n">incubator</span><span class="o">-</span><span class="n">doris</span><span class="o">.</span><span class="n">git</span> <span class="p">(</span><span class="n">push</span><span class="p">)</span>
</pre></div>
</div>
<p>####（4）新建分支以便在分支上做修改：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="o">&lt;</span><span class="n">your_branch_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>注意： &lt;your_branch_name&gt; 为您自定义的分支名字。</p>
<p>创建完成后可进行代码更改。</p>
<p>####（5）提交代码到远程分支：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">a</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;&lt;you_commit_message&gt;&quot;</span>
<span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="o">&lt;</span><span class="n">your_branch_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>更多 git 使用方法请访问：<a class="reference external" href="https://www.atlassian.com/git/tutorials/setting-up-a-repository">git 使用</a>，这里不赘述。</p>
</div>
<div class="section" id="pr">
<h2>3. 创建PR<a class="headerlink" href="#pr" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id2">
<h3>（1）新建 PR<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>在浏览器切换到自己的 github 页面，切换分支到提交的分支 &lt;your_branch_name&gt; ，点击 <code class="docutils literal notranslate"><span class="pre">New</span> <span class="pre">pull</span> <span class="pre">request</span></code> 按钮进行创建，如下图所示：</p>
<p><img alt="../../../_images/new-pr.png" src="../../../_images/new-pr.png" />new PR</p>
</div>
<div class="section" id="id3">
<h3>（2）准备分支<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>这时候，会出现 <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">pull</span> <span class="pre">request</span></code> 按钮，如果没有请检查是否正确选择了分支，也可以点击 “compare across forks” 重新选择 repo 和分支。</p>
<p><img alt="../../../_images/create-pr.png" src="../../../_images/create-pr.png" />create PR</p>
</div>
<div class="section" id="commit-message">
<h3>（3）填写 Commit Message<a class="headerlink" href="#commit-message" title="Permalink to this headline">¶</a></h3>
<p>这里请填写 comment 的总结和详细内容，然后点击 <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">pull</span> <span class="pre">request</span></code> 进行创建。</p>
<p>关于如何写 Commit Message，下面列出了一些 Tips：</p>
<ul class="simple">
<li>请用英文 动词 + 宾语 的形式，动词不用过去式，语句用祈使句；</li>
<li>消息主题（Subject）和具体内容（Body）都要写，它们之间要有空行分隔（GitHub PR界面上分别填写即可）;</li>
<li>消息主题长度不要超过<strong>50</strong>个字符；</li>
<li>消息内容每行不要超过<strong>72</strong>个字符，超过的需要手动换行；</li>
<li>消息内容用于解释做了什么、为什么做以及怎么做的；</li>
<li>消息主题第一个字母要<strong>大写</strong>，句尾<strong>不要</strong>有句号；</li>
<li>消息内容中写明关联的issue(如果有)，例如 #233;</li>
</ul>
<p>更详细的内容请参考 <a class="reference external" href="https://chris.beams.io/posts/git-commit">https://chris.beams.io/posts/git-commit</a></p>
<p><img alt="../../../_images/create-pr2.png" src="../../../_images/create-pr2.png" />create PR</p>
</div>
<div class="section" id="id4">
<h3>（4）完成创建<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>创建成功后，您可以看到 Doris 项目需要 review，您可以等待我们 review 和合入，您也可以直接联系我们。</p>
<p><img alt="../../../_images/create-pr3.png" src="../../../_images/create-pr3.png" />create PR</p>
<p>至此，您的PR创建完成，更多关于 PR 请阅读 <a class="reference external" href="https://help.github.com/categories/collaborating-with-issues-and-pull-requests/">collaborating-with-issues-and-pull-requests</a> 。</p>
</div>
</div>
<div class="section" id="id5">
<h2>4. 冲突解决<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>提交PR时的代码冲突一般是由于多人编辑同一个文件引起的，解决冲突主要通过以下步骤即可：</p>
<p>####（1）切换至主分支</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">master</span>
</pre></div>
</div>
<p>####（2）同步远端主分支至本地</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">pull</span> <span class="n">upstream</span> <span class="n">master</span>
</pre></div>
</div>
<p>####（3）切换回刚才的分支（假设分支名为fix）</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">fix</span>
</pre></div>
</div>
<p>####（4）进行rebase</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">rebase</span> <span class="o">-</span><span class="n">i</span> <span class="n">master</span>
</pre></div>
</div>
<p>此时会弹出修改记录的文件，一般直接保存即可。然后会提示哪些文件出现了冲突，此时可打开冲突文件对冲突部分进行修改，将提示的所有冲突文件的冲突都解决后，执行</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
<span class="n">git</span> <span class="n">rebase</span> <span class="o">--</span><span class="k">continue</span>
</pre></div>
</div>
<p>依此往复，直至屏幕出现类似 <em>rebase successful</em> 字样即可，此时您可以进行往提交PR的分支进行更新：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">push</span> <span class="o">-</span><span class="n">f</span> <span class="n">origin</span> <span class="n">fix</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h2>5. 一个例子<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>####（1）对于已经配置好 upstream 的本地分支 fetch 到最新代码</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git branch
* master

$ git fetch upstream          
remote: Counting objects: 195, done.
remote: Compressing objects: 100% (68/68), done.
remote: Total 141 (delta 75), reused 108 (delta 48)
Receiving objects: 100% (141/141), 58.28 KiB, done.
Resolving deltas: 100% (75/75), completed with 43 local objects.
From https://github.com/apache/incubator-doris
   9c36200..0c4edc2  master     -&gt; upstream/master
</pre></div>
</div>
<p>####（2）进行rebase</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git rebase upstream/master  
First, rewinding head to replay your work on top of it...
Fast-forwarded master to upstream/master.
</pre></div>
</div>
<p>####（3）检查看是否有别人提交未同步到自己 repo 的提交</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git status
# On branch master
# Your branch is ahead of &#39;origin/master&#39; by 8 commits.
#
# Untracked files:
#   (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)
#
#       custom_env.sh
nothing added to commit but untracked files present (use &quot;git add&quot; to track)
</pre></div>
</div>
<p>####（4）合并其他人提交的代码到自己的 repo</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git push origin master
Counting objects: 195, done.
Delta compression using up to 32 threads.
Compressing objects: 100% (41/41), done.
Writing objects: 100% (141/141), 56.66 KiB, done.
Total 141 (delta 76), reused 140 (delta 75)
remote: Resolving deltas: 100% (76/76), completed with 44 local objects.
To https://lide-reed:fc35ff925bd8fd6629be3f6412bacee99d4e5f97@github.com/lide-reed/incubator-doris.git
   9c36200..0c4edc2  master -&gt; master
</pre></div>
</div>
<p>####（5）新建分支，准备开发</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git checkout -b my_branch
Switched to a new branch &#39;my_branch&#39;

$ git branch
  master
* my_branch
</pre></div>
</div>
<p>####（6）代码修改完成后，准备提交</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git add -u
</pre></div>
</div>
<p>####（7）填写 message 并提交到本地的新建分支上</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git commit -m &quot;Fix a typo&quot;
[my_branch 55e0ba2] Fix a typo
 1 files changed, 2 insertions(+), 2 deletions(-)
</pre></div>
</div>
<p>####（8）将分支推到 GitHub 远端自己的 repo 中</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git push origin my_branch
Counting objects: 11, done.
Delta compression using up to 32 threads.
Compressing objects: 100% (6/6), done.
Writing objects: 100% (6/6), 534 bytes, done.
Total 6 (delta 4), reused 0 (delta 0)
remote: Resolving deltas: 100% (4/4), completed with 4 local objects.
remote: 
remote: Create a pull request for &#39;my_branch&#39; on GitHub by visiting:
remote:      https://github.com/lide-reed/incubator-doris/pull/new/my_branch
remote: 
To https://lide-reed:fc35ff925bd8fd6629be3f6412bacee99d4e5f97@github.com/lide-reed/incubator-doris.git
 * [new branch]      my_branch -&gt; my_branch
</pre></div>
</div>
<p>至此，就可以按照前面的流程进行创建 PR 了。</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="release-process.html" class="btn btn-neutral float-right" title="Apache Doris 发布流程" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="members.html" class="btn btn-neutral float-left" title="PMC Members &amp; Committer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Apache Doris(Incubating)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
<div role="contentinfo">
    <p></p>
    <p>

        Apache Doris is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the name of Apache TLP sponsor. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.

    </p>
</div>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>