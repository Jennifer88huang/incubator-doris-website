

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Bitmap 索引 &mdash; Doris Documentations 0.11.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Rollup" href="alter-table-rollup.html" />
    <link rel="prev" title="表结构变更" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> Doris Documentations
          

          
          </a>

          
            
            
              <div class="version">
                0.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">中文</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../installing/index.html">编译与部署</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/index.html">开始使用</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">操作手册</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../load-data/index.html">数据导入</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">表结构变更</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Bitmap 索引</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">原理介绍</a></li>
<li class="toctree-l4"><a class="reference internal" href="alter-table-rollup.html">Rollup</a></li>
<li class="toctree-l4"><a class="reference internal" href="alter-table-schema-change.html">Scheam Change</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../http-actions/index.html">HTTP API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operation/index.html">运维操作</a></li>
<li class="toctree-l3"><a class="reference internal" href="../config/index.html">配置文件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../backup-restore.html">备份与恢复</a></li>
<li class="toctree-l3"><a class="reference internal" href="../broker.html">Broker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../colocation-join.html">Colocation Join</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dynamic-partition.html">动态分区</a></li>
<li class="toctree-l3"><a class="reference internal" href="../export-manual.html">数据导出</a></li>
<li class="toctree-l3"><a class="reference internal" href="../privilege.html">权限管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../small-file-mgr.html">文件管理器</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sql-mode.html">SQL MODE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../time-zone.html">时区</a></li>
<li class="toctree-l3"><a class="reference internal" href="../variables.html">变量</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../extending-doris/index.html">扩展功能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../internal/index.html">设计文档</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sql-reference/index.html">SQL 手册</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer-guide/index.html">开发者手册</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../community/index.html">Apache 社区</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../en/index.html">English</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Doris Documentations</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">中文</a> &raquo;</li>
        
          <li><a href="../index.html">操作手册</a> &raquo;</li>
        
          <li><a href="index.html">表结构变更</a> &raquo;</li>
        
      <li>Bitmap 索引</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/apache/incubator-doris/blob/master/docs/documentation/cn/administrator-guide/alter-table/alter-table-bitmap-index.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <!-- 
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
--><div class="section" id="bitmap">
<h1>Bitmap 索引<a class="headerlink" href="#bitmap" title="Permalink to this headline">¶</a></h1>
<p>用户可以通过创建bitmap index 加速查询
本文档主要介绍如何创建 index 作业，以及创建 index 的一些注意事项和常见问题。</p>
<div class="section" id="id1">
<h2>名词解释<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>bitmap index：位图索引，是一种快速数据结构，能够加快查询速度</li>
</ul>
</div>
</div>
<div class="section" id="id2">
<h1>原理介绍<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h1>
<p>创建和删除本质上是一个 schema change 的作业，具体细节可以参照 <a class="reference internal" href="alter-table-schema-change.html"><span class="doc">Schema Change</span></a>。</p>
<div class="section" id="id3">
<h2>语法<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>index 创建和修改相关语法有两种形式，一种集成与 alter table 语句中，另一种是使用单独的
create/drop index 语法</p>
<ol>
<li><p class="first">创建索引</p>
<p>创建索引的的语法可以参见 <a class="reference external" href="../../sql-reference/sql-statements/Data%20Definition/CREATE%20INDEX.html">CREATE INDEX</a>
或 <a class="reference external" href="../../sql-reference/sql-statements/Data%20Definition/ALTER%20TABLE.html">ALTER TABLE</a> 中bitmap 索引相关的操作,
也可以通过在创建表时指定bitmap 索引，参见<a class="reference external" href="../../sql-reference/sql-statements/Data%20Definition/CREATE%20TABLE.html">CREATE TABLE</a></p>
</li>
<li><p class="first">查看索引</p>
<p>参照<a class="reference external" href="../../sql-reference/sql-statements/Administration/SHOW%20INDEX.html">SHOW INDEX</a></p>
</li>
<li><p class="first">删除索引</p>
<p>参照<a class="reference external" href="../../sql-reference/sql-statements/Data%20Definition/DROP%20INDEX.html">DROP INDEX</a>
或者 <a class="reference external" href="../../sql-reference/sql-statements/Data%20Definition/ALTER%20TABLE.html">ALTER TABLE</a> 中bitmap 索引相关的操作</p>
</li>
</ol>
</div>
<div class="section" id="id4">
<h2>创建作业<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>参照 schema change 文档 <a class="reference external" href="alter-table-schema-change.html">Scheam Change</a></p>
</div>
<div class="section" id="id5">
<h2>查看作业<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>参照 schema change 文档 <a class="reference external" href="alter-table-schema-change.html">Scheam Change</a></p>
</div>
<div class="section" id="id6">
<h2>取消作业<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>参照 schema change 文档 <a class="reference external" href="alter-table-schema-change.html">Scheam Change</a></p>
</div>
<div class="section" id="id7">
<h2>注意事项<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">目前索引仅支持 bitmap 类型的索引。</p>
</li>
<li><p class="first">bitmap 索引仅在单列上创建。</p>
</li>
<li><p class="first">bitmap 索引能够应用在 <code class="docutils literal notranslate"><span class="pre">Duplicate</span></code> 数据模型的所有列和 <code class="docutils literal notranslate"><span class="pre">Aggregate</span></code>, <code class="docutils literal notranslate"><span class="pre">Uniq</span></code> 模型的key列上。</p>
</li>
<li><p class="first">bitmap 索引支持的数据类型如下:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">TINYINT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">INT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">UNSIGNEDINT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">CHAR</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">VARCHAE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">DATE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">DATETIME</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">LARGEINT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">DECIMAL</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">BOOL</span></code></li>
</ul>
</li>
<li><p class="first">bitmap索引仅在 segmentV2 下生效，需要在be的配置文件中增加如下配置</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default_rowset_type</span><span class="o">=</span><span class="n">BETA</span>
<span class="n">compaction_rowset_type</span><span class="o">=</span><span class="n">BETA</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="alter-table-rollup.html" class="btn btn-neutral float-right" title="Rollup" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="表结构变更" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Apache Doris(Incubating)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
<div role="contentinfo">
    <p></p>
    <p>

        Apache Doris(incubating) is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.

    </p>
</div>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>